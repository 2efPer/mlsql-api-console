(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{132:function(e,t,a){},133:function(e,t,a){},306:function(e,t,a){},477:function(e,t,a){e.exports=a(940)},482:function(e,t,a){},486:function(e,t,a){},488:function(e,t,a){},490:function(e,t,a){},502:function(e,t,a){},582:function(e,t,a){},930:function(e,t,a){},940:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(15),o=a.n(l);a(482),a(486),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=a(7),c=a(10),s=a(12),u=a(11),m=a(13),d=a(4),p=(a(488),a(383)),h=a(71),f=a(386),g=a(946),b=a(304),E=a(305),v=(a(490),{GET:"get",POST:"post",PUT:"put"}),y={Success:200,BadRequest:400,Unauthorized:401,Forbidden:404,ServerError:500},O={name:"access-token"},S=a(268),j=function e(t){Object(i.a)(this,e),this.value=t},w=function e(t,a,n){var r=this;Object(i.a)(this,e),this.json=function(e,t){r.content.then(function(a){try{var n=JSON.parse(a);e(n)}catch(r){t(a)}})},this.status=t,this.content=a,this.accessToken=n},T=function(){function e(t){Object(i.a)(this,e),this.url=t}return Object(c.a)(e,[{key:"request2",value:function(e,t,a){this.request(v.POST,e,function(e){e.json(function(e){t(e)},function(e){a(e)})},function(e){try{e.value().content(function(e){a(e)})}catch(t){a(e?e.toString():"result is null")}})}},{key:"runScript",value:function(e,t,a,n){var r=new H,l=S(),o=this;r.user(function(r){var i=r.userName,c=r.backendTags;if(c){var s={sql:t,owner:i,jobName:l,sessionPerUser:!0,show_stack:!0,tags:c||""};Object.assign(s,e),(e.background||!1)&&Object.assign(s,{async:!0,callback:""}),o.request(v.POST,s,function(e){if(200===e.status)e.json(function(e){a(e)},function(e){n(e)});else try{e.content.then(function(e){n(e)})}catch(t){n("backend status:"+e.status)}},function(e){try{e.value().content(function(e){n(e)})}catch(t){n(e?e.toString():"result is null")}})}else n("\n                \n                ---------------Warning--------------------\n                \n                Please make sure you have backend configured. \n                If not, please contact admin;\n                \n                ------------------------------------------\n                ")})}},{key:"request",value:function(e,t,a,n){e=e.toUpperCase();var r=[];for(var l in t){var o=encodeURIComponent(l),i=encodeURIComponent(t[l]);r.push(o+"="+i)}var c=this.url;return"GET"===e?(c=c+"?"+r,r=void 0):r=r.join("&"),fetch(c,{method:e,timeout:864e5,headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json","Access-Token":sessionStorage.getItem(O.name)||""},body:r}).then(function(e){a(new w(e.status,e.text(),e.headers.get(O.name)))}).catch(function(e){n(new j(e))})}}]),e}(),k="/api_v1/user/tags/update",C="/api_v1/users",D="/api_v1/script_file",N="/api_v1/script_file/remove",x="/api_v1/script_file/get",R="/api_v1/run/script",M="/api_v1/cluster",P="/api_v1/file/upload",I="/api_v1/team/create",L="/api_v1/team/name/check",_="/api_v1/team",V="/api_v1/team/invited",B="/api_v1/team/member/add",A="/api_v1/team/role/add",F="/api_v1/team/table/add",q="/api_v1/role/table/add",U=a(419),H=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,[{key:"isLogin",value:function(){return null!==sessionStorage.getItem(O.name)}},{key:"userName",value:function(e){new T("/api_v1/user/userName").request(v.GET,{},function(t){t.status===y.Unauthorized?sessionStorage.removeItem(O.name):t.content.then(function(t){e(JSON.parse(t).userName)}).catch(function(e){})},function(e){console.log(e)})}},{key:"user",value:function(e){new T("/api_v1/user/userName").request2({},function(t){e(t)},function(e){})}},{key:"login",value:function(e,t,a,n){this.registerOrLogin("/api_v1/user/login",e,t,a,n)}},{key:"logout",value:function(){sessionStorage.removeItem(O.name)}},{key:"register",value:function(e,t,a,n){this.registerOrLogin("/api_v1/user/register",e,t,a,n)}},{key:"registerOrLogin",value:function(e,t,a,n,r){var l={userName:t,password:a};new T(e).request(v.POST,l,function(e){e.accessToken&&(sessionStorage.setItem(O.name,e.accessToken),(new U.a).set(O.name,e.accessToken,{path:"/"}));n(e)},function(e){r(e)})}}]),e}(),G=(a(140),a(270),a(83)),z=a.n(G),Q=(a(501),a(274),a(275),a(502),a(276),a(385)),W=a(950),J=function(e,t){if(!e){if(t=t||"Assertion failed","undefined"!==typeof Error)throw new Error(t);throw t}},K=a(949),$=a(941),Y=a(389),X=a(391),Z=a(954),ee=a(185),te=a.n(ee),ae=a(951),ne=a(384),re=ae.a.Group,le=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).etPopLoad=e.parent,a.state={},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.createElement("div",null,n.createElement("span",null,"parameters:"),n.createElement(re,{compact:!0},this.state.dataForRender))}}]),t}(n.Component),oe=ae.a.Group,ie=ne.a.Option,ce=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).params=function(e){a.data.params[e.target.getAttribute("name")]=e.target.value},a.sourceType=function(e,t){a.data.sourceTypeV=e;var r=Object(d.a)(Object(d.a)(a));new T(R).runScript({},"load _mlsql_.`datasources/params/".concat(e,"` as output;"),function(e){var t=[];e.forEach(function(e){t.push(n.createElement(Y.a,{key:e.param},n.createElement(X.a,null,n.createElement(ae.a,{style:{marginBottom:"10px"},name:e.param,onChange:r.params,type:"text",addonBefore:e.param,placeholder:e.description}))))}),r.loadParamsRef.current.setState({dataForRender:t})},function(e){})},a.path=function(e){a.data.pathV=e.target.value},a.tableName=function(e){a.data.tableNameV=e.target.value},a.makeMLSQL=function(){var e=Object(d.a)(Object(d.a)(a)),t=[];for(var n in a.data.params){var r=a.data.params[n],l='"'+r+'"';"code"!==n&&"fitParam.[group].code"!==n||(l="'''"+r+"'''"),t.push(n.replace(/\[group\]/g,"0")+"="+l)}var o="";return t.length>0&&(o="where"),"load ".concat(e.data.sourceTypeV,".`").concat(e.data.pathV,"` ").concat(o," ").concat(t.join("and\\n ")," as ").concat(e.data.tableNameV,";")},a.etpop=e.parent,a.data={params:{}},a.state={datasourcesRender:[]},a.loadParamsRef=n.createRef(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;new T(R).runScript({},"load _mlsql_.`datasources` as output;",function(t){var a=[];t.forEach(function(e){a.push(n.createElement(ie,{key:e.name,value:e.name},e.name))}),e.setState({datasourcesRender:a})},function(e){})}},{key:"render",value:function(){return n.createElement("div",null,n.createElement(oe,{compact:!0},n.createElement(Y.a,null,n.createElement(X.a,null,"soureType:",n.createElement(ne.a,{onChange:this.sourceType,showSearch:!0,style:{width:200},placeholder:"Choose DataSource type",optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.datasourcesRender)))),n.createElement("br",null),n.createElement(oe,{compact:!0},n.createElement(Y.a,null,n.createElement(X.a,null,n.createElement(ae.a,{onChange:this.path,type:"text",label:"Path",addonBefore:"Path",placeholder:"File path or tableName"})))),n.createElement("br",null),n.createElement(oe,{compact:!0},n.createElement(Y.a,null,n.createElement(X.a,null,n.createElement(ae.a,{type:"text",onChange:this.tableName,label:"tableName",addonBefore:"tableName",placeholder:"tableName"})))),n.createElement("br",null),n.createElement(le,{parent:this,ref:this.loadParamsRef}))}}]),t}(n.Component),se=ae.a.Group,ue=(ne.a.Option,ae.a.TextArea),me=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).renderParam=function(e){return"keepVersion"===e.param&&"evaluateTable"===e.param?null:"code"===e.param||"fitParam.[group].code"===e.param?n.createElement(Y.a,null,n.createElement(X.a,null,e.param,":",n.createElement(ue,{style:{marginBottom:"10px"},name:e.param,onChange:a.params,type:"text",rows:10}))):n.createElement(Y.a,null,n.createElement(X.a,null,n.createElement(ae.a,{style:{marginBottom:"10px"},name:e.param,onChange:a.params,type:"text",addonBefore:e.param,placeholder:e.description})))},a.params=function(e){a.data.params[e.target.getAttribute("name")]=e.target.value},a.path=function(e){a.data.pathV=e.target.value},a.tableName=function(e){a.data.tableNameV=e.target.value},a.makeMLSQL=function(){Object(d.a)(Object(d.a)(a));var e=[];for(var t in a.data.params){var n=a.data.params[t];e.push(t.replace(/\[group\]/g,"0")+'="'+n+'"')}return 0==e.length&&e.push('keepVersion="true"'),"train ".concat(a.data.tableNameV," as ").concat(a.name,".`").concat(a.data.pathV,"` where \n").concat(e.join(" and\n "),";")},a.etpop=e.parent,a.name=e.name,a.data={params:{}},a.state={dataForRender:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this;new T(R).runScript({},"load modelParams.`".concat(t.name,"` as output;"),function(a){var r=[];a.forEach(function(t){var a=e.renderParam(t);null!==a&&(r.push(a),r.push(n.createElement("br",null)))}),t.setState({dataForRender:r})},function(e){})}},{key:"render",value:function(){return n.createElement("div",null,n.createElement("span",null,"Training data and model path:"),n.createElement(se,{compact:!0},n.createElement(Y.a,null,n.createElement(X.a,null,n.createElement(ae.a,{type:"text",onChange:this.tableName,size:"large",addonBefore:"tableName",placeholder:"the table of training data"})))),n.createElement("br",null),n.createElement(se,{compact:!0},n.createElement(Y.a,null,n.createElement(X.a,null,n.createElement(ae.a,{onChange:this.path,type:"text",size:"large",addonBefore:"Model save path",placeholder:"the location you save you model"})))),n.createElement("br",null),n.createElement("span",null,"Algorithm parameters:"),n.createElement(se,{compact:!0},this.state.dataForRender))}}]),t}(n.Component),de=ae.a.Group,pe=ne.a.Option,he=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).sourceType=function(e,t){a.data.sourceTypeV=e},a.saveMode=function(e,t){a.data.saveModeV=e},a.path=function(e){a.data.pathV=e.target.value},a.tableName=function(e){a.data.tableNameV=e.target.value},a.partitionBy=function(e){a.data.partitionByV=e.target.value},a.fileNum=function(e){a.data.fileNumV=e.target.value},a.makeMLSQL=function(){var e=Object(d.a)(Object(d.a)(a)),t="";a.data.partitionByV&&(t="partitionBy "+a.data.partitionByV);var n='key="value"';return a.data.fileNumV&&(n='fileNum="'.concat(a.data.fileNumV,'"')),"save ".concat(e.data.saveModeV," ").concat(e.data.tableNameV," as ").concat(e.data.sourceTypeV,".`").concat(e.data.pathV,"` \n where ").concat(n," ").concat(t,";")},a.etpop=e.parent,a.data={},a.state={datasourcesRender:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;new T(R).runScript({},"load _mlsql_.`datasources` as output;",function(t){var a=[];t.forEach(function(e){a.push(n.createElement(pe,{key:e.name,value:e.name},e.name))}),e.setState({datasourcesRender:a})},function(e){})}},{key:"render",value:function(){return n.createElement("div",null,n.createElement(de,{compact:!0},n.createElement(Y.a,null,n.createElement(X.a,null,"soureType:",n.createElement(ne.a,{onChange:this.sourceType,showSearch:!0,style:{width:200},placeholder:"Choose DataSource type",optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.datasourcesRender)))),n.createElement("br",null),n.createElement(de,{compact:!0},n.createElement(Y.a,null,n.createElement(X.a,null,"SaveMode:",n.createElement(ne.a,{onChange:this.saveMode,showSearch:!0,style:{width:200},placeholder:"Choose save mode type",optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},n.createElement(pe,{key:"overwrite",value:"overwrite"},"overwrite"),n.createElement(pe,{key:"append",value:"append"},"append"),n.createElement(pe,{key:"errorIfExists",value:"errorIfExists"},"errorIfExists"),n.createElement(pe,{key:"ignore",value:"ignore"},"ignore"))))),n.createElement("br",null),n.createElement(de,{compact:!0},n.createElement(Y.a,null,n.createElement(X.a,null,n.createElement(ae.a,{type:"text",onChange:this.tableName,label:"tableName",addonBefore:"tableName",placeholder:"the tableName will be saved"})))),n.createElement("br",null),n.createElement(de,{compact:!0},n.createElement(Y.a,null,n.createElement(X.a,null,n.createElement(ae.a,{onChange:this.path,type:"text",addonBefore:"Target Path",placeholder:"File path or tableName"})))),n.createElement("br",null),n.createElement(de,{compact:!0},n.createElement(Y.a,null,n.createElement(X.a,null,n.createElement(ae.a,{type:"text",onChange:this.partitionBy,addonBefore:"partitionBy",placeholder:"partitionBy"})))),n.createElement("br",null),n.createElement(de,{compact:!0},n.createElement(Y.a,null,n.createElement(X.a,null,n.createElement(ae.a,{type:"text",onChange:this.fileNum,addonBefore:"fileNum",placeholder:"fileNum"})))),n.createElement("br",null))}}]),t}(n.Component),fe=a(101),ge=ae.a.Group,be=(ne.a.Option,ae.a.TextArea),Ee=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).renderParam=function(e){return"keepVersion"===e.param||"evaluateTable"===e.param?null:"code"===e.param||"fitParam.[group].code"===e.param?n.createElement(Y.a,null,n.createElement(X.a,null,e.param,":",n.createElement(be,{style:{marginBottom:"10px"},name:e.param,onChange:a.params,type:"text",rows:10}))):n.createElement(Y.a,{key:e.param},n.createElement(X.a,null,n.createElement(ae.a,{style:{marginBottom:"10px"},name:e.param,onChange:a.params,type:"text",addonBefore:e.param,placeholder:e.description})))},a.params=function(e){a.data.params[e.target.getAttribute("name")]=e.target.value},a.path=function(e){a.data.pathV=e.target.value},a.tableName=function(e){a.data.tableNameV=e.target.value},a.outputTableName=function(e){a.data.outputTableNameV=e.target.value},a.showTableName=function(){return"true"!==a.state.tableHidden?n.createElement(ge,{compact:!0},n.createElement(Y.a,null,n.createElement(X.a,null,n.createElement(ae.a,{type:"text",onChange:a.tableName,size:"large",addonBefore:a.state.tableAlias?a.state.tableAlias:"Input table",placeholder:""})))):null},a.showOutputTableName=function(){return"true"!==a.state.outputTableHidden?n.createElement(ge,{compact:!0},n.createElement(Y.a,null,n.createElement(X.a,null,n.createElement(ae.a,{type:"text",onChange:a.outputTableName,size:"large",addonBefore:a.state.outputTableAlias?a.state.outputTableAlias:"Output table",placeholder:""})))):null},a.pathNameForRender=function(){return a.state.pathAlias?a.state.pathAlias:"Save path"},a.showPathName=function(){return"true"!==a.state.pathHidden?n.createElement(ge,{compact:!0},n.createElement(Y.a,null,n.createElement(X.a,null,n.createElement(ae.a,{onChange:a.path,type:"text",size:"large",addonBefore:a.pathNameForRender(),placeholder:""})))):""},a.etpop=e.parent,a.name=e.name,a.data={params:{}},a.state={dataForRender:[],tableHidden:e.tableHidden,pathAlias:e.pathAlias,pathHidden:e.pathHidden,outputTableHidden:e.outputTableHidden,outputTableAlias:e.outputTableAlias,tableAlias:e.tableAlias},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this;new T(R).runScript({},"load modelParams.`".concat(t.name,"` as output;"),function(a){var r=[];a.forEach(function(t){var a=e.renderParam(t);null!==a&&(r.push(a),r.push(n.createElement("br",null)))}),t.setState({dataForRender:r})},function(e){})}},{key:"_makeMLSQL",value:function(){var e=[];for(var t in this.data.params){var a=this.data.params[t],n='"'+a+'"';"code"!==t&&"fitParam.[group].code"!==t||(n="'''"+a+"'''"),e.push(t.replace(/\[group\]/g,"0")+"="+n)}var r="";e.length>0&&(r="where");var l="";return this.data.outputTableNameV&&(l="as ".concat(this.data.outputTableNameV)),"run ".concat(this.data.tableNameV||"command"," as ").concat(this.name,".`").concat(this.data.pathV||"","` ").concat(r," ").concat(e.join("and\n ")," ").concat(l,";")}},{key:"_render",value:function(){return n.createElement("div",null,this.showTableName(),n.createElement("br",null),this.showOutputTableName(),n.createElement("br",null),this.showPathName(),n.createElement("br",null),0==this.state.dataForRender.length?"":n.createElement("span",null,"Parameters:"),n.createElement(ge,{compact:!0},this.state.dataForRender))}}]),t}(n.Component),ve=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).makeMLSQL=function(){return Object(fe.a)(Object(u.a)(t.prototype),"_makeMLSQL",Object(d.a)(a)).call(Object(d.a)(a))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return Object(fe.a)(Object(u.a)(t.prototype),"_render",this).call(this)}}]),t}(Ee),ye=ae.a.Group,Oe=(ne.a.Option,function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).makeMLSQL=function(){Object(d.a)(Object(d.a)(a));var e=[];for(var t in a.data.params){var n=a.data.params[t];e.push(t.replace(/\[group\]/g,"0")+'="'+n+'"')}return 0==e.length&&e.push('keepVersion="true"'),"run command as ".concat(a.name,".`` where \n").concat(e.join(" and\n "),";")},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.createElement("div",null,n.createElement(ye,{compact:!0},this.state.dataForRender))}}]),t}(ve)),Se=(a(558),a(559),a(560),a(393)),je=a.n(Se),we=ne.a.Option,Te=ae.a.TextArea,ke=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).udfName=function(e){a.data.udfNameV=e.target.value},a.dataType=function(e){a.data.dataTypeV=e.target.value},a.udfType=function(e){a.udfTypeV=e},a.code=function(e){a.codeV=e},a.langSelect=function(e){a.lang=e,a.codeCheckRef.current.checked=!1,a.setState({dataType:!1}),"python"===a.lang&&a.setState({dataType:!0}),a.setState({codeLang:e})},a.setCodeExample=function(e){e?a.codeRef.current.editor.setValue(a.codeExample()):a.codeRef.current.editor.setValue("")},a.codeExample=function(){var e=a.state.codeLang||"scala";return"scala"===e?"def apply(a:Double,b:Double)={\n   a + b\n}":"python"===e?"def apply(self,m):\n    return m":"java"===e?"import java.util.HashMap;\nimport java.util.Map;\npublic class UDF {\n  public Map<String, Integer[]> apply(String s) {\n    Map<String, Integer[]> m = new HashMap<>();\n    Integer[] arr = {1};\n    m.put(s, arr);\n    return m;\n  }\n}":null},a.showDataType=function(){return a.state.dataType?n.createElement(Y.a,null,n.createElement(X.a,null,"dataType:",n.createElement(Te,{style:{marginBottom:"10px"},name:"dataType",rows:10,onChange:a.dataType,type:"text",addonBefore:"dataType",placeholder:"This is not required when lang is scala\nAs we know python is not strongly typed language, so\nwe should manually spcify the return type.\nmap(string,string) means a map with key is string type,value also is string type.\narray(string) means a array with string type element.\nnested is support e.g. array(array(map(string,array(string))))\n\n"}))):null},a.showCode=function(){return n.createElement("div",null,n.createElement(Y.a,null,n.createElement(X.a,null,"code:",n.createElement(z.a,{ref:a.codeRef,mode:a.state.codeLang||"scala",theme:"github",width:"400px",height:"300px",name:"code",fontSize:16,showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0,onChange:a.code,editorProps:{$blockScrolling:1/0},setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!1,showLineNumbers:!0,tabSize:2}}))),n.createElement(Y.a,null,n.createElement(X.a,null,n.createElement(X.a,{span:8},"Show CodeExample:",n.createElement(je.a,{ref:a.codeCheckRef,onChange:a.setCodeExample})))))},a.makeMLSQL=function(){Object(d.a)(Object(d.a)(a));var e=[];return e.push('lang="'.concat(a.lang,'"')),e.push("code='''".concat(a.codeV,"'''")),e.push('udfType="'.concat(a.udfTypeV,'"')),a.dataTypeV&&e.push("dataType='''".concat(a.dataTypeV,"'''")),"register ScriptUDF.`` as ".concat(a.data.udfNameV," where \n").concat(e.join("\nand "),";")},a.etpop=e.parent,a.name=e.name,a.data={params:{}},a.state={dataForRender:[]},a.codeRef=n.createRef(),a.codeCheckRef=n.createRef(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return n.createElement("div",null,n.createElement(Y.a,null,n.createElement(X.a,null,n.createElement(ae.a,{onChange:this.udfName,type:"text",size:"large",addonBefore:"UDF Name",placeholder:"the name of udf"}))),n.createElement("br",null),n.createElement(Y.a,null,n.createElement(X.a,{span:4},n.createElement("span",null,"udfType:")),n.createElement(X.a,{span:20},n.createElement(ne.a,{showSearch:!0,onChange:this.udfType,style:{width:200},placeholder:"Select udf type",optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},n.createElement(we,{value:"udf"},"udf"),n.createElement(we,{value:"udaf"},"udaf")))),n.createElement("br",null),n.createElement(Y.a,null,n.createElement(X.a,{span:4},n.createElement("span",null,"Lang:")),n.createElement(X.a,{span:20},n.createElement(ne.a,{showSearch:!0,style:{width:200},placeholder:"Select language type",optionFilterProp:"children",onChange:this.langSelect,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},n.createElement(we,{value:"java"},"java"),n.createElement(we,{value:"scala"},"scala"),n.createElement(we,{value:"python"},"python")))),n.createElement("br",null),this.showDataType(),n.createElement("br",null),this.showCode(),n.createElement("br",null),n.createElement(Y.a,null,n.createElement(X.a,null,n.createElement(ae.a,{style:{marginBottom:"10px"},name:"methodName",onChange:this.params,type:"text",addonBefore:"methodName",placeholder:"methodName"}))))}}]),t}(n.Component),Ce=(ae.a.Group,ne.a.Option),De=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).etName=function(e){a.etName=e},a.makeMLSQL=function(){return"load modelExample.`".concat(a.etName,"` as output;")},a.etpop=e.parent,a.name=e.name,a.data={params:{}},a.state={dataForRender:[],tableHidden:e.tableHidden,pathAlias:e.pathAlias,pathHidden:e.pathHidden},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;new T(R).runScript({},"load model.`list` as output;",function(t){var a=[];t.forEach(function(e){a.push(n.createElement(Ce,{key:e.name,value:e.name},e.name))}),e.setState({dataForRender:a})},function(e){})}},{key:"render",value:function(){return n.createElement("div",null,n.createElement(Y.a,null,n.createElement(X.a,null,"ET:",n.createElement(ne.a,{onChange:this.etName,showSearch:!0,style:{width:200},placeholder:"Choose DataSource type",optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.dataForRender))))}}]),t}(n.Component),Ne=(ae.a.Group,ne.a.Option),xe=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).makeMLSQL=function(){var e=Object(d.a)(Object(d.a)(a));return"register ".concat(e.data.sourceTypeV,".`").concat(e.data.pathV,"` as ").concat(e.data.outputTableNameV,";")},a.etName=function(e){a.data.sourceTypeV=e},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;new T(R).runScript({},"load model.`list` as output;",function(t){var a=[];t.forEach(function(e){a.push(n.createElement(Ne,{key:e.name,value:e.name},e.name))}),e.setState({dataForRender:a})},function(e){})}},{key:"render",value:function(){return n.createElement("div",null,this.showTableName(),n.createElement("br",null),this.showOutputTableName(),n.createElement("br",null),this.showPathName(),n.createElement("br",null),n.createElement(Y.a,null,n.createElement(X.a,null,"ET:",n.createElement(ne.a,{onChange:this.etName,showSearch:!0,style:{width:200},placeholder:"Choose DataSource type",optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.dataForRender))))}}]),t}(ve),Re=ae.a.Group,Me=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).makeMLSQL=function(){var e="";a.data.outputTableNameV&&(e="as ".concat(a.data.outputTableNameV));var n=Object(fe.a)(Object(u.a)(t.prototype),"_makeMLSQL",Object(d.a)(a)).call(Object(d.a)(a)).replace(e,""),r="predict ".concat(a.data.tableNameV," as ").concat(a.name,".`").concat(a.data.pathV||"","` ").concat(e,";");return"".concat(n,"\n        ").concat(r,"\n        register ").concat(a.name,".`").concat(a.data.pathV||"","` as ").concat(a.data.functionNameV,"; \n        ").stripMargin()},a.functionName=function(e){a.data.functionNameV=e.target.value},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.createElement("div",null,this.showTableName(),n.createElement("br",null),this.showOutputTableName(),n.createElement("br",null),this.showPathName(),n.createElement("br",null),n.createElement(Re,{compact:!0},n.createElement(Y.a,null,n.createElement(X.a,null,n.createElement(ae.a,{onChange:this.functionName,type:"text",size:"large",addonBefore:"functionName",placeholder:"A function you can use to convert String to number or number to String"})))),n.createElement("br",null),0==this.state.dataForRender.length?"":n.createElement("span",null,"Parameters:"),n.createElement(Re,{compact:!0},this.state.dataForRender))}}]),t}(Ee),Pe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).makeMLSQL=function(){var e="/api_v1/public/file/download?fileName=".concat(encodeURIComponent(a.data.pathV)),t=document.createElement("a");return t.href=e,t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t),""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(fe.a)(Object(u.a)(t.prototype),"_render",this).call(this)}}]),t}(Ee),Ie=(ae.a.Group,ne.a.Option),Le=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).etName=function(e){a.etName=e},a.makeMLSQL=function(){return"load _mlsql_.`progress/".concat(a.etName,"` as output;")},a.etpop=e.parent,a.name=e.name,a.data={params:{}},a.state={dataForRender:[],tableHidden:e.tableHidden,pathAlias:e.pathAlias,pathHidden:e.pathHidden},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;new T(R).runScript({},"load _mlsql_.`jobs` as output;",function(t){var a=t.filter(function(e){return"stream"===e.jobType}).map(function(e){return n.createElement(Ie,{key:e.jobName,value:e.jobName},e.jobName)});e.setState({dataForRender:a})},function(e){})}},{key:"render",value:function(){return n.createElement("div",null,n.createElement(Y.a,null,n.createElement(X.a,null,"Stream Jobs:",n.createElement(ne.a,{onChange:this.etName,showSearch:!0,style:{width:200},placeholder:"Choose Stream Name",optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.dataForRender))))}}]),t}(n.Component),_e=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).disableEtModalVisible=function(){a.et.setState({etPop:!1,etModalVisible:!1})},a.enableEtModalVisible=function(){var e=a.popChild.current.makeMLSQL();a.et.makeMLSQL(e),a.et.setState({etPop:!1,etModalVisible:!1})},a.renderContent=function(){return"load"===a.et.state.eventName?n.createElement(ce,{parent:Object(d.a)(Object(d.a)(a)),ref:a.popChild}):"save"===a.et.state.eventName?n.createElement(he,{name:a.et.state.eventName,ref:a.popChild}):"DownloadExt"===a.et.state.eventName?n.createElement(Oe,{name:a.et.state.eventName,ref:a.popChild}):"StringIndex"===a.et.state.eventName?n.createElement(Me,{name:a.et.state.eventName,ref:a.popChild}):"DownloadFile"===a.et.state.eventName?n.createElement(Pe,Object.assign({name:a.et.state.eventName,ref:a.popChild},a.et.state)):"ETExample"===a.et.state.eventName?n.createElement(De,{name:a.et.state.eventName,ref:a.popChild}):"ETStreamProgress"===a.et.state.eventName?n.createElement(Le,{name:a.et.state.eventName,ref:a.popChild}):"ScriptUDF"===a.et.state.eventName?n.createElement(ke,{name:a.et.state.eventName,ref:a.popChild}):"register"===a.et.state.eventName?n.createElement(xe,Object.assign({name:a.et.state.eventName,ref:a.popChild},a.et.state)):"tool"===a.et.state.processType?n.createElement(ve,Object.assign({name:a.et.state.eventName,ref:a.popChild},a.et.state)):n.createElement(me,{name:a.et.state.eventName,ref:a.popChild})},a.et=e.parent,a.popChild=n.createRef(),a.state={etModalVisible:!0,title:e.title},a.data={},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.createElement("div",null,n.createElement(te.a,{title:this.state.title,visible:this.state.etModalVisible,onCancel:this.disableEtModalVisible,onOk:this.enableEtModalVisible,okText:"Ok",cancelText:"Cancel"},this.renderContent()))}}]),t}(n.Component),Ve=a(27),Be=a.n(Ve),Ae=K.a.Panel,Fe=($.a.TabPane,function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).onDragStart=function(e){var t=e.target.getAttribute("processtype");e.dataTransfer.setData("eventName",e.target.getAttribute("name")),e.dataTransfer.setData("popName",e.target.getAttribute("help")),e.dataTransfer.setData("processType",t),e.dataTransfer.setData("pathAlias",e.target.getAttribute("pathalias")||""),e.dataTransfer.setData("outputTableAlias",e.target.getAttribute("outputtablealias")||""),e.dataTransfer.setData("tableAlias",e.target.getAttribute("tablealias")||""),e.dataTransfer.setData("tableHidden",e.target.getAttribute("tablehidden")||!1),e.dataTransfer.setData("pathHidden",e.target.getAttribute("pathhidden")||!1),e.dataTransfer.setData("outputTableHidden",e.target.getAttribute("outputtablehidden")||!1)},a.makeMLSQL=function(e){a.queryApp.appendToEditor(e)},a.renderPop=function(){return a.state.etPop?n.createElement(_e,{parent:Object(d.a)(Object(d.a)(a)),title:a.state.popName}):null},a.queryApp=e.parent,a.state={},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return n.createElement("div",null,n.createElement(K.a,{style:{margin:"0px 0px",padding:"0px 0px"}},n.createElement(Ae,{header:"Quick Menu",key:"1"},n.createElement(Y.a,{gutter:16},n.createElement(X.a,{span:8},n.createElement(Z.a,{title:"Load/Save Data"},n.createElement(Be.a,{tyle:{marginBottom:"10px"},title:"Load/Save Data",onDragStart:this.onDragStart,name:"load",help:"Load file/db as table",draggable:!0,color:"magenta"},"Load data"),n.createElement(Be.a,{tyle:{marginBottom:"10px"},title:"Save Data",onDragStart:this.onDragStart,name:"save",help:"Save table into file/db ",draggable:!0,color:"magenta"},"Save data"))),n.createElement(X.a,{span:8},n.createElement(Z.a,{title:"Algorithms"},n.createElement(Be.a,{tyle:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"TfIdfInPlace",help:"Use TfIdfInPlace vectorize text",draggable:!0,color:"magenta"},"TfIdf"),n.createElement(Be.a,{tyle:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"Word2VecInPlace",help:"Use Word2VecInPlace vectorize text",draggable:!0,color:"magenta"},"Word2vec"),n.createElement(Be.a,{tyle:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"RandomForest",help:"Use RandomForest to train a model",draggable:!0,color:"magenta"},"RandomForest"),n.createElement(Be.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"PythonAlg",help:"Run python lib to train",draggable:!0,color:"magenta"},"Python Algorithm"),n.createElement(Be.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"BigDLClassifyExt",help:"Use BigDL to develop deep learning algorithm",draggable:!0,color:"magenta"},"Deep Learning"),n.createElement(Be.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"NaiveBayes",help:"Use NaiveBayes",draggable:!0,color:"magenta"},"NaiveBayes"))),n.createElement(X.a,{span:8},n.createElement(Z.a,{title:"Python"},n.createElement(Be.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"PythonEnvExt",processtype:"tool",help:"Create Python Env",pathalias:"Temp directory",tablehidden:"true",pathhidden:"false",outputtablehidden:"true",draggable:!0,color:"magenta"},"Create Python Env"),n.createElement(Be.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"PythonParallelExt",processtype:"tool",help:"Run python project",pathalias:"Temp directory",tablehidden:"true",pathhidden:"false",outputtablehidden:"true",draggable:!0,color:"magenta"},"Run python project")))),n.createElement("br",null),n.createElement(Y.a,{gutter:16},n.createElement(X.a,{span:8},n.createElement(Z.a,{title:"Register model as Function"},n.createElement(Be.a,{onDragStart:this.onDragStart,name:"ScriptUDF",processtype:"tool",help:"Use ScriptUDF create udf",draggable:!0,color:"magenta"},"Create UDF"),n.createElement(Be.a,{onDragStart:this.onDragStart,name:"register",help:"Register model to function ",pathalias:"Model saved path",outputtablealias:"Function name",tablealias:"Function name",tablehidden:"true",pathhidden:"false",outputtablehidden:"false",draggable:!0,color:"magenta"},"Register Model As Function"))),n.createElement(X.a,{span:8},n.createElement(Z.a,{title:"Jobs"},n.createElement(Be.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"JobList",processtype:"direct",draggable:!0,color:"magenta"},"Show jobs"),n.createElement(Be.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"Kill",processtype:"tool",pathalias:"groupId or jobName",tablehidden:"true",help:"Kill your job",draggable:!0,color:"magenta"},"Kill job"),n.createElement(Be.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"ETStreamProgress",processtype:"",help:"Show Progress of Stream",draggable:!0,color:"magenta"},"Show Stream Job Progress"))),n.createElement(X.a,{span:8},n.createElement(Z.a,{title:"Tools"},n.createElement(Be.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"DownloadExt",processtype:"tool",help:"Use DownloadExt to download files you have uploaded",draggable:!0,color:"magenta"},"Download uploaded file"),n.createElement(Be.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"ImageLoaderExt",processtype:"tool",help:"Use ImageLoaderExt to load images",pathalias:"",tablehidden:"true",pathhidden:"true",outputtablehidden:"false",draggable:!0,color:"magenta"},"Load images"),n.createElement(Be.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"ConnectMySQL",processtype:"direct",help:"",draggable:!0,color:"magenta"},"Connect MySQL"),n.createElement(Be.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"JDBC",processtype:"tool",pathalias:"DB name in connect",tablehidden:"false",help:"Run DLL on MySQL",draggable:!0,color:"magenta"},"MySQL DDL"),n.createElement(Be.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"TreeBuildExt",processtype:"tool",pathalias:"",tablehidden:"false",pathhidden:"true",help:"Build tree from parent-child",draggable:!0,color:"magenta"},"Parent-Child"),n.createElement(Be.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"ETExample",processtype:"",help:"Show Example of ET",draggable:!0,color:"magenta"},"Show ET Example"),n.createElement(Be.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"RepartitionExt",processtype:"tool",help:"Change Table Partition Num",pathalias:"",tablehidden:"false",pathhidden:"true",outputtablehidden:"false",draggable:!0,color:"magenta"},"Repartition table"),n.createElement(Be.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"SendMessage",processtype:"tool",help:"Send email",pathalias:"",tablehidden:"false",pathhidden:"true",outputtablehidden:"true",draggable:!0,color:"magenta"},"Send Mail"),n.createElement(Be.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"CacheExt",processtype:"tool",help:"Cache table",pathalias:"",tablehidden:"false",pathhidden:"true",outputtablehidden:"true",draggable:!0,color:"magenta"},"Cache Table"),n.createElement(Be.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"StringIndex",processtype:"tool",help:"Convert String to number",pathalias:"Mapping path",tablehidden:"false",pathhidden:"false",outputtablehidden:"true",draggable:!0,color:"magenta"},"Convert String to number"),n.createElement(Be.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"DownloadFile",processtype:"tool",help:"Download File",pathalias:"Target file",tablehidden:"true",pathhidden:"false",outputtablehidden:"true",draggable:!0,color:"magenta"},"Download File to computer"),n.createElement(Be.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"ShowResource",processtype:"direct",draggable:!0,color:"magenta"},"Cluster Resource")))))),this.renderPop())}}]),t}(n.Component)),qe=function e(){Object(i.a)(this,e),this.makeSQL=function(e){return"JobList"===e?"load _mlsql_.`jobs` as output;":"ConnectMySQL"===e?'connect jdbc where\n url="jdbc:mysql://127.0.0.1:3306/wow?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&tinyInt1isBit=false"\n and driver="com.mysql.jdbc.Driver"\n and user=""\n and password=""\n as db_1;':"ShowResource"===e?"load _mlsql_.`resource` as output;":""}},Ue=a(268),He=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).text=function(e,t){a.setState({value:e,scriptId:t}),a.aceEditorRef.current.editor.setValue(e)},a.executeSave=function(){var e=new T(D),t=Object(d.a)(Object(d.a)(a)),n=a.getMessageBoxAceEditor();t.state.scriptId?e.request(v.POST,{id:t.state.scriptId,content:t.getAceEditor().getValue()},function(e){n.setValue("saved")},function(e){}):n.setValue("no file are opened, cannot executeSave")},a.executeQuery=function(){var e=Ue();a.enterLoading(e);var t=new T(R),n=Object(d.a)(Object(d.a)(a));n.getMessageBoxAceEditor().setValue("");var r=n.getSelection(),l=n.getAllText();""!==r&&(l=r);var o=(new Date).getTime();function i(){return n.exitLoading(),(new Date).getTime()-o}t.runScript({jobName:e,background:a.state.background||!1},l,function(e){try{n.queryApp.setData(e),n.getDisplay().update(e),n.getMessageBoxAceEditor().setValue("\nTime cost:"+i()+"ms")}catch(t){console.log(t),n.getMessageBoxAceEditor().setValue("Can not display the result. raw data:\n"+JSON.stringify(e,null,2))}n.exitLoading()},function(e){var t=e.toString();try{t=JSON.parse(t).msg}catch(a){}n.getMessageBoxAceEditor().setValue(t+"\nTime cost:"+i()+"ms"),n.exitLoading()})},a.getAllText=function(){return a.getAceEditor().getValue()},a.getSelection=function(){var e=a.getAceEditor().getSelectionRange();return a.getAceEditor().session.getTextRange(e)},a.appendToEditor=function(e){var t=a.getAceEditor(),n=t.getCursorPosition();t.session.insert(n,e),t.focus()},a.getAceEditor=function(){return a.aceEditorRef.current.editor},a.getMessageBoxAceEditor=function(){return a.queryApp.messageBox.current.editor},a.getDashBoard=function(){return a.queryApp.dash.current},a.getDisplay=function(){return a.queryApp.display.current},a.enterLoading=function(e){a.commandGroup.current.setState({loading:!0}),a.resourceProgressRef.current.enter({jobName:e}),a.taskProgressRef.current.enter({jobName:e})},a.exitLoading=function(){a.commandGroup.current.setState({loading:!1}),a.resourceProgressRef.current.exit(),a.taskProgressRef.current.exit()},a.etOver=function(e){var t=e.dataTransfer.getData("eventName"),n=e.dataTransfer.getData("popName"),r=e.dataTransfer.getData("processType"),l=e.dataTransfer.getData("pathAlias"),o=e.dataTransfer.getData("tableHidden"),i=e.dataTransfer.getData("pathHidden"),c=e.dataTransfer.getData("outputTableHidden"),s=e.dataTransfer.getData("outputTableAlias"),u=e.dataTransfer.getData("tableAlias");"direct"===r?a.appendToEditor((new qe).makeSQL(t)):a.etRef.current.setState({etPop:!0,eventName:t,popName:n,processType:r,pathAlias:l,tableHidden:o,pathHidden:i,outputTableHidden:c,outputTableAlias:s,tableAlias:u})},a.queryApp=a.props.parent,a.aceEditorRef=n.createRef(),a.commandGroup=n.createRef(),a.resourceProgressRef=n.createRef(),a.taskProgressRef=n.createRef(),a.etRef=n.createRef(),a.state={value:"",loading:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"onChange",value:function(e){}},{key:"render",value:function(){return n.createElement("div",{className:"mlsql-editor-area"},n.createElement("div",null,n.createElement(Fe,{ref:this.etRef,parent:this})),n.createElement("div",{onDragOver:function(e){return e.preventDefault()},onDrop:this.etOver},n.createElement(z.a,{ref:this.aceEditorRef,mode:"sql",theme:"github",width:"100%",height:"300px",onChange:this.onChange,name:"mlsql_editor",fontSize:16,showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0,value:"",editorProps:{$blockScrolling:1/0},setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!1,showLineNumbers:!0,tabSize:2}})),n.createElement(Ge,{ref:this.commandGroup,parent:this}),n.createElement(ze,{ref:this.resourceProgressRef,parent:this}),n.createElement(Qe,{ref:this.taskProgressRef,parent:this}))}}]),t}(n.Component),Ge=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={loading:!1},a.parent=e.parent,a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.createElement("div",{className:"mslql-editor-buttons"},n.createElement(Q.a,{onClick:this.parent.executeQuery,loading:this.state.loading},"Run"),n.createElement(Q.a,{onClick:this.parent.executeSave},"Save"))}}]),t}(n.Component),ze=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).enter=function(e){var t=Object(d.a)(Object(d.a)(a));a.setState({mark:!0}),setTimeout(function(){t.state.mark&&(t.setState({loading:!0}),t.intervalTimer=setInterval(function(){if("loading"!==t.resourceCompute){t.resourceCompute="loading";var a=new T(R);J(e.hasOwnProperty("jobName"),"jobName is required");var n=e.jobName;a.runScript({},"load _mlsql_.`resource/".concat(n,"` as output;"),function(e){var a=e[0];t.setState({percent:a.activeTasks/a.totalCores*100,successPercent:a.currentJobGroupActiveTasks/a.totalCores*100,title:"Resource (for all users): taken/Total: ".concat(a.activeTasks,"/").concat(a.totalCores,"(").concat(a.currentJobGroupActiveTasks," you took)")}),t.resourceCompute="loaded"},function(e){t.resourceCompute="loaded";try{t.parent.getMessageBoxAceEditor().setValue(e)}catch(a){console.log(a)}})}},3e4))},3e3)},a.exit=function(){a.setState({loading:!1,percent:0,successPercent:0,mark:!1}),a.intervalTimer&&clearInterval(a.intervalTimer)},a.state={loading:!1,percent:0,successPercent:0,mark:!1},a.parent=e.parent,a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.state.loading?n.createElement("div",null,this.state.title,n.createElement(W.a,{percent:this.state.percent,successPercent:this.state.successPercent})):n.createElement("div",null)}}]),t}(n.Component),Qe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).enter=function(e){var t=Object(d.a)(Object(d.a)(a));a.setState({mark:!0}),setTimeout(function(){t.state.mark&&(t.setState({loading:!0}),t.intervalTimer=setInterval(function(){if("loading"!==t.taskCompute){t.taskCompute="loading";var a=new T(R);J(e.hasOwnProperty("jobName"),"jobName is required");var n=e.jobName;a.runScript({},"load _mlsql_.`jobs/".concat(n,"` as output;"),function(e){t.taskCompute="loaded";var a=e[0],n={numTasks:0,numActiveTasks:0,numCompletedTasks:0};a.activeJobs.forEach(function(e){n.numTasks+=e.numTasks,n.numActiveTasks+=e.numActiveTasks,n.numCompletedTasks+=e.numCompletedTasks}),t.setState({percent:n.numActiveTasks/n.numTasks*100,successPercent:n.numCompletedTasks/n.numTasks*100,title:"Tasks (for all stages): Succeeded/Total:\n".concat(n.numCompletedTasks,"/").concat(n.numTasks,"(").concat(n.numActiveTasks," running)")})},function(e){t.taskCompute="loaded";try{t.parent.getMessageBoxAceEditor().setValue(e)}catch(a){console.log(a)}})}},3e4))},3e3)},a.exit=function(){a.taskCompute="loaded",a.resourceCompute="loaded",a.setState({loading:!1,percent:0,successPercent:0,mark:!1}),a.intervalTimer&&clearInterval(a.intervalTimer)},a.state={loading:!1,percent:0,successPercent:0,mark:!1},a.parent=e.parent,a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.state.loading?n.createElement("div",null,this.state.title,n.createElement(W.a,{percent:this.state.percent,successPercent:this.state.successPercent})):n.createElement("div",null)}}]),t}(n.Component),We=He,Je=a(303),Ke=a(398),$e=a(75),Ye=a(76),Xe=a(74),Ze=a(957),et=a(77),tt=a(78),at=a(2),nt=a.n(at),rt=(a(582),function e(){Object(i.a)(this,e),this.build=function(e){var t,a,n={},r=[];for(a=0;a<e.length;a+=1)n[e[a].id]=a,e[a].childNodes=[];for(a=0;a<e.length;a+=1)if(0!==(t=e[a]).parentId)try{e[n[t.parentId]].childNodes.push(t)}catch(l){console.log("------------"),console.log(t),console.log(n[t.parentId])}else r.push(t);return r}}),lt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).reloadData=function(){var e=new T(D),t=Object(d.a)(Object(d.a)(a));e.request(v.GET,{},function(e){e.content.then(function(e){var a=[];try{a=JSON.parse(e||"[]")}catch(r){}var n=(new rt).build(a).sort(function(e,t){return e.id-t.id});t.setState({nodes:n})})},function(e){})},a.isRootNode=function(e){return a.state.nodes[0].id===e},a.onNodeContextMenu=function(e,t,r){r.preventDefault();var l=Object(d.a)(Object(d.a)(a));Ze.a.show(n.createElement(it,{parent:l,nodeId:e.id}),{left:r.clientX,top:r.clientY},function(){return a.setState({isContextMenuOpen:!1})}),a.setState({isContextMenuOpen:!0})},a.handNodeDoubleClick=function(e,t,n){if(e.isDir)e.isExpanded=!e.isExpanded,a.toggleIsExpanded(e.id,e.isExpanded);else{var r=new T(x),l=Object(d.a)(Object(d.a)(a));r.request(v.GET,{id:e.id},function(t){t.content.then(function(t){var a=JSON.parse(t||"{}");l.parent.editor.current.text(a.content,e.id)})},function(e){})}a.setState(a.state)},a.handleNodeClick=function(e,t,n){var r=e.isSelected;n.shiftKey||a.forEachNode(a.state.nodes,function(e){return e.isSelected=!1}),e.isSelected=null==r||!r,a.setState(a.state)},a.toggleIsExpanded=function(e,t){var n=new T(D);Object(d.a)(Object(d.a)(a));n.request(v.POST,{id:e,isExpanded:t},function(e){e.content.then(function(e){})},function(e){})},a.handleNodeCollapse=function(e){e.isExpanded=!1,a.setState(a.state)},a.handleNodeExpand=function(e){e.isExpanded=!0,a.setState(a.state)},a.state={isContextMenuOpen:!1,openCreateScriptDialog:!1},a.parent=a.props.parent,a.reloadData(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.createElement("div",null,n.createElement(Je.a,{contents:this.state.nodes,onNodeClick:this.handleNodeClick,onNodeCollapse:this.handleNodeCollapse,onNodeExpand:this.handleNodeExpand,onNodeContextMenu:this.onNodeContextMenu,onNodeDoubleClick:this.handNodeDoubleClick,className:"mlsql-directory-tree"}),this.state.openCreateScriptDialog?n.createElement(ot,{nodeId:this.state.nodeId,parent:this,queryApp:this.parent}):"")}},{key:"forEachNode",value:function(e,t){if(null!=e){var a=!0,n=!1,r=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done);a=!0){var i=l.value;t(i),this.forEachNode(i.childNodes,t)}}catch(c){n=!0,r=c}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}}}}]),t}(n.Component),ot=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).title=function(){return a.props.parent.state.isDir?"Create Folder":"Create Script"},a.fileName=function(e){a.setState({fileName:e.target.value})},a.content=function(e){a.setState({content:e.target.value})},a.finish=function(){a.props.parent.setState({openCreateScriptDialog:!1}),a.props.parent.reloadData()},a.create=function(){var e=new T(D),t=Object(d.a)(Object(d.a)(a)),n={fileName:a.state.fileName,isDir:a.props.parent.state.isDir,content:a.state.content,parentId:a.props.nodeId};n.fileName?n.isDir||n.fileName.endsWith(".mlsql")?e.request(v.POST,n,function(e){e.status===y.Success?t.finish():e.content.then(function(e){a.setState({msg:e})})},function(e){t.setState({msg:"Server error"})}):a.setState({msg:"filename should be ends with .mlsql"}):a.setState({msg:"filename should not be empty"})},a.close=function(){var e=a.props.parent;e.setState({openCreateScriptDialog:!1}),e.reloadData()},a.state={msg:""},a.messageBox=a.props.queryApp.messageBox.current.editor,a.directoryTree=a.props.parent,a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=nt()(Ke.a.CARD,Ke.a.ELEVATION_4,"docs-md-overlay-example-transition");return n.createElement("div",null,n.createElement($e.a,{className:"msql-treenode-dialog",isOpen:!0,usePortal:!0},n.createElement("div",{className:e},n.createElement(Ye.a,null,this.title()," "),n.createElement("div",{className:"msql-treenode-dialog-form"},n.createElement("p",{style:{color:"red"}},this.state.msg),n.createElement(b.a,{helperText:"The file of name you want create.",label:"fileName",labelFor:"fileName",labelInfo:"(required)"},n.createElement(E.a,{id:"fileName",placeholder:"example.mlsql",onChange:this.fileName}))),n.createElement("br",null),n.createElement(f.a,{onClick:this.create},"Create"),n.createElement(f.a,{intent:Xe.a.DANGER,onClick:this.close,style:{float:"right"}},"Close"))))}}]),t}(n.Component),it=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).removeFile=function(){var e=new T(N),t=Object(d.a)(Object(d.a)(a));e.request(v.POST,{id:t.nodeId},function(e){e.status===y.Success?t.parent.reloadData():e.content.then(function(e){t.parent.setState({msg:e})})},function(e){t.parent.setState({msg:"Server error"})})},a.isCreateProject=function(){return a.parent.isRootNode(a.nodeId)},a.createDocMenuItem=function(){if(!a.isCreateProject())return n.createElement(et.a,{icon:"document",text:"Create Script",onClick:function(){a.parent.setState({openCreateScriptDialog:!0,nodeId:a.nodeId,isDir:!1})}.bind(Object(d.a)(Object(d.a)(a)))})},a.createFolderTitle=function(){return a.isCreateProject()?"Create Project":"Create Folder"},a.deleteMenu=function(){if(!a.isCreateProject())return n.createElement(et.a,{icon:"remove",text:"Delete",onClick:function(){a.removeFile()}.bind(Object(d.a)(Object(d.a)(a)))})},a.parent=a.props.parent,a.nodeId=a.props.nodeId,a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return n.createElement("div",null,n.createElement(tt.a,null,this.createDocMenuItem(),n.createElement(et.a,{icon:"folder-new",text:this.createFolderTitle(),onClick:function(){e.parent.setState({openCreateScriptDialog:!0,nodeId:e.nodeId,isDir:!0})}.bind(this)}),this.deleteMenu()))}}]),t}(n.Component),ct=(a(306),a(947)),st=a(147),ut=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).setRender=function(e,t){var r=t[0][e.key];if(a.state.config&&a.state.config.render){var l=a.state.config.render[e.key];l&&(e.render=l)}else{try{if(n.Component.isPrototypeOf(r.type))return void(e.render=function(e){return n.createElement("span",null,e)})}catch(o){}"object"!==typeof r?"array"!==typeof r?"boolean"!==typeof r||(e.render=function(e){return n.createElement("span",null,e.toString())}):e.render=function(e){return n.createElement("span",null,e.join(",").substring(0,300))}:e.render=function(e){return n.createElement("span",null,JSON.stringify(e).substring(0,300))}}},a.update=function(e,t){a.setState({config:t});var n=[],r={},l=[],o=Object(d.a)(Object(d.a)(a));e.forEach(function(t){for(var a in t)if(!r[a]){var l={title:a,dataIndex:a,key:a};o.setRender(l,e),n.push(l),r[a]=!0}}),e.forEach(function(e,t){var a={};n.forEach(function(t){a[t.key]=e[t.key]}),a.key=t,l.push(a)}),a.setState({columns:n,data:l})},a.rowDoubleClick=function(e,t,n){"codeExample"!==e.name&&"doc"!==e.name||a.setState({view:{enabled:!0,content:e.value}})},a.disablePreview=function(){a.setState({view:{enabled:!1}})},a.state={columns:[],rows:[],view:{enabled:!1}},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return n.createElement("div",null,n.createElement(ct.a,{onRow:function(t,a){return{onDoubleClick:function(n){e.rowDoubleClick(t,a,n)}}},columns:this.state.columns,dataSource:this.state.data}),n.createElement(te.a,{title:"View",visible:this.state.view.enabled,onCancel:this.disablePreview,onOk:this.disablePreview,cancelText:"Cancel",OkText:"Ok"},n.createElement(st,{source:this.state.view.content||""})))}}]),t}(n.Component),mt=a(196),dt=a(420),pt=a(418),ht=a(404),ft=a.n(ht),gt={width:200,height:200,borderWidth:2,borderColor:"#666",borderStyle:"dashed",borderRadius:5},bt={borderStyle:"solid",borderColor:"#6c6",backgroundColor:"#eee"},Et={borderStyle:"solid",borderColor:"#c66",backgroundColor:"#eee"},vt={display:"flex"},yt=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).onDrop=function(t){e.setState({files:t});var a=ft.a.post(P);a.set("Access-Token",sessionStorage.getItem(O.name)||""),t.forEach(function(e){a.attach(e.path,e)}),a.end(function(a,n){e.setState({files:[]}),a?(console.log(a),e.setState({msg:a.toString()+"\n Sometimes this caused by your upload space is not enough."})):n.ok&&e.setState({msg:"total files:"+t.length+" are uploaded"})})},e.state={files:[]},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.files.map(function(e){return r.a.createElement("li",{key:e.name},e.path," - ",e.size," bytes")});return r.a.createElement("section",{style:vt},r.a.createElement("div",null,r.a.createElement(dt.a,{onDrop:this.onDrop,getDataTransferItems:function(e){return Object(pt.a)(e)}},function(e){var t=e.getRootProps,a=e.getInputProps,n=e.isDragActive,l=e.isDragAccept,o=e.isDragReject,i=(e.acceptedFiles,e.rejectedFiles,Object(mt.a)({},gt));return i=n?Object(mt.a)({},i,bt):i,i=o?Object(mt.a)({},i,Et):i,r.a.createElement("div",Object.assign({},t(),{style:i}),r.a.createElement("input",a()),r.a.createElement("div",null,l?"Drop":"Drag"," files here..."),o&&r.a.createElement("div",null,"Unsupported file type..."))})),r.a.createElement("aside",null,r.a.createElement("h4",null,0==e.length?"":"Files"),r.a.createElement("ul",null,e)),r.a.createElement("div",null,this.state.msg?this.state.msg:""))}}]),t}(r.a.Component),Ot=(a(742),a(256)),St=a.n(Ot),jt=a(417),wt=a(34),Tt=a(378),kt=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,null,[{key:"render",value:function(e){var t=e[0].hasOwnProperty("z");e.hasOwnProperty("dataType")||e.forEach(function(e){e.dataType="default",t||(e.z=0)});var a=e.reduce(function(e,t){t.x,t.y,t.z;var a=t.dataType,n=e.get(a);return n?n.push(t):e.set(a,[t]),e},new Map),n=e[0]._dash_config||{},l=Object(jt.a)(a.keys()).map(function(e){var t=Object.assign({fill:function(){var e=Tt();return"#000000"===e&&(e="#8884d8"),e}(),shape:"triangle"},n[e]||{});return r.a.createElement(wt.g,Object.assign({key:e,name:e,data:a.get(e)},t))}),o=Object.assign({type:"number",dataKey:"x"},n.x||{}),i=Object.assign({type:"number",dataKey:"y"},n.y||{}),c=Object.assign({type:"number",dataKey:"z"},n.z||{});return r.a.createElement(wt.h,{width:400,height:400,margin:{top:20,right:20,bottom:20,left:20}},r.a.createElement(wt.c,null),r.a.createElement(wt.j,o),r.a.createElement(wt.k,i),t?r.a.createElement(wt.l,c):"",r.a.createElement(wt.i,{cursor:{strokeDasharray:"3 3"}}),r.a.createElement(wt.d,null),l)}}]),e}();kt.basicCheck=function(e,t){if(e.length<1)return!1;try{return t(e[0])}catch(a){return!1}return!0},kt.isShouldRender=function(e){return kt.basicCheck(e,function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")&&(e.hasOwnProperty("_dash_config")||e.hasOwnProperty("dash"))&&("scatter"===e.dash||"scatter"===(e._dash_config||{}).dash)})};var Ct=a(378),Dt=function(){var e=Ct();return"#000000"===e&&(e="#8884d8"),e},Nt=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,null,[{key:"render",value:function(e){var t=e[0],a=[],n=t._dash_config||{};return"line"===t.dash||"line"===n.dash?(Object.keys(t).forEach(function(e){if("number"===typeof t[e]){var l=Object.assign({stroke:Dt()},n[e]||{});a.push(r.a.createElement(wt.e,Object.assign({key:e,type:"monotone",dataKey:e},l)))}}),r.a.createElement(wt.f,{width:500,height:300,data:e,margin:{top:5,right:30,left:20,bottom:5}},r.a.createElement(wt.c,{strokeDasharray:"3 3"}),r.a.createElement(wt.j,{dataKey:"x"}),r.a.createElement(wt.k,null),r.a.createElement(wt.i,null),r.a.createElement(wt.d,null),a)):"bar"===t.dash||"bar"===n.dash?(Object.keys(t).forEach(function(e){if("number"===typeof t[e]){var l=Object.assign({fill:Dt()},n[e]||{});a.push(r.a.createElement(wt.a,Object.assign({key:e,dataKey:e},l)))}}),r.a.createElement(wt.b,{width:500,height:300,data:e,margin:{top:5,right:30,left:20,bottom:5}},r.a.createElement(wt.c,{strokeDasharray:"3 3"}),r.a.createElement(wt.j,{dataKey:"x"}),r.a.createElement(wt.k,null),r.a.createElement(wt.i,null),r.a.createElement(wt.d,null),a)):void 0}}]),e}();Nt.basicCheck=function(e,t){if(e.length<1)return!1;try{return t(e[0])}catch(a){return!1}return!0},Nt.isShouldRender=function(e){return Nt.basicCheck(e,function(e){return e.hasOwnProperty("x")&&(e.hasOwnProperty("dash")||e.hasOwnProperty("_dash_config"))})};var xt=a(88),Rt=a(260),Mt=a.n(Rt),Pt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).renderStream=function(){var e=a.state.data,t=[],n=[];e.forEach(function(e){var a=JSON.parse(e.value),r=Mt.a.utc(a.timestamp).toDate().getTime();t.push({x:r,y1:a.inputRowsPerSecond,y2:a.processedRowsPerSecond}),n.push({x:r,y1:a.numInputRows})}),a.setState({dataForRender:t,titleMap:{y1:"inputRowsPerSecond",y2:"processedRowsPerSecond"},dataForRender2:n,titleMap2:{y1:"numInputRows"}})},a.queryApp=e.parent.parent,a.state={data:e.data,dataForRender:[],titleMap:{}},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.renderStream()}},{key:"render",value:function(){return 0===this.state.dataForRender.length?null:r.a.createElement("div",null,r.a.createElement(xt.TimelineChart,{height:200,data:this.state.dataForRender,titleMap:this.state.titleMap}),r.a.createElement(xt.TimelineChart,{height:200,data:this.state.dataForRender2,titleMap:this.state.titleMap2}))}}]),t}(n.Component);Pt.isStream=function(e){if(e.length<1)return!1;try{if(!JSON.parse(e[0].value).runId)return!1}catch(t){return!1}return!0},Pt.isShouldRender=function(e){return Pt.isStream(e)},Pt.renderRawData=function(e){if(!Pt.isShouldRender(e))return"";var t=[];return e.forEach(function(e){var a=JSON.parse(e.value);t.push(JSON.stringify(a,null,2))}),t.join("\n")};var It=a(257),Lt=a.n(It),_t=a(259),Vt=a.n(_t),Bt=a(70),At=a.n(Bt),Ft=a(191),qt=a.n(Ft),Ut=a(79),Ht=a.n(Ut),Gt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).resourceRender=function(){var e=a.state.data[0],t=[{x:"used",y:e.activeTasks},{x:"free",y:e.totalCores-e.activeTasks}],n=[{x:"taskTime",y:e.taskTime},{x:"gcTime",y:e.gcTime}],l=[{x:"used",y:e.activeExecutorNum},{x:"free",y:e.totalExecutorNum-e.activeExecutorNum}],o=-1===e.totalMemory?[]:[{x:"used",y:e.usedMemory/1048576},{x:"free",y:(e.totalMemory-e.usedMemory)/1048576}],i=function(t,a,n){return r.a.createElement(Lt.a,{title:t,action:r.a.createElement(Vt.a,{title:a},r.a.createElement(At.a,{type:"info-circle-o"})),total:function(){return r.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.shuffleData[n]/1048576}})}})},c=i("Disk Spilled","The size(M) spilled in disk","diskBytesSpilled"),s=i("Memory Spilled","The memory size(M) spilled in disk","memoryBytesSpilled"),u=i("InputRecords","Current active jobs have processed how many records","inputRecords");return r.a.createElement("div",null,r.a.createElement(qt.a,null,r.a.createElement(Ht.a,{span:6},r.a.createElement(xt.Pie,{hasLegend:!0,title:"CPU",subTitle:"CPU",total:function(){return r.a.createElement("span",{dangerouslySetInnerHTML:{__html:t.reduce(function(e,t){return t.y+e},0)}})},data:t,valueFormat:function(e){return r.a.createElement("span",{dangerouslySetInnerHTML:{__html:e}})},height:200})),r.a.createElement(Ht.a,{span:6},r.a.createElement(xt.Pie,{hasLegend:!0,title:"Memory",subTitle:"Memory",total:function(){return r.a.createElement("span",{dangerouslySetInnerHTML:{__html:(o.reduce(function(e,t){return t.y+e},0)+"").split(".")[0]+"M"}})},data:o,valueFormat:function(e){return r.a.createElement("span",{dangerouslySetInnerHTML:{__html:(e+"").split(".")[0]+"M"}})},height:200})),r.a.createElement(Ht.a,{span:6},r.a.createElement(xt.Pie,{hasLegend:!0,title:"Task/GC",subTitle:"Task/GC",total:function(){return r.a.createElement("span",{dangerouslySetInnerHTML:{__html:n.reduce(function(e,t){return t.y+e},0)}})},data:n,valueFormat:function(e){return r.a.createElement("span",{dangerouslySetInnerHTML:{__html:e}})},height:200})),r.a.createElement(Ht.a,{span:6},r.a.createElement(xt.Pie,{hasLegend:!0,title:"Executors",subTitle:"Executors",total:function(){return r.a.createElement("span",{dangerouslySetInnerHTML:{__html:l.reduce(function(e,t){return t.y+e},0)}})},data:l,valueFormat:function(e){return r.a.createElement("span",{dangerouslySetInnerHTML:{__html:e}})},height:200}))),r.a.createElement(qt.a,null,r.a.createElement(Ht.a,{span:8},c),r.a.createElement(Ht.a,{span:8},s),r.a.createElement(Ht.a,{span:8},u)))},a.queryApp=e.parent.parent,a.state={data:e.data,dataForRender:[],titleMap:{}},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.resourceRender()}}]),t}(n.Component);Gt.isResource=function(e){if(e.length<1)return!1;var t=e[0];try{return t.hasOwnProperty("activeTasks")&&t.hasOwnProperty("totalCores")&&t.hasOwnProperty("activeExecutorNum")}catch(a){return!1}},Gt.isShouldRender=function(e){return Gt.isResource(e)};var zt=K.a.Panel,Qt=$.a.TabPane;function Wt(e){}var Jt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).isNormalXY=function(e){return t.basicCheck(e,function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")&&"number"===typeof e.y})},a.xYRender=function(e){return r.a.createElement(St.a,{height:200,title:"Bar",data:e})},a.renderDash=function(){var e=a.state.data;return Gt.isShouldRender(e)?r.a.createElement(Gt,{data:e,parent:Object(d.a)(Object(d.a)(a))}):Pt.isShouldRender(e)?r.a.createElement(Pt,{data:e,parent:Object(d.a)(Object(d.a)(a))}):kt.isShouldRender(e)?kt.render(e):a.isNormalXY(e)?a.xYRender(e):Nt.isShouldRender(e)?Nt.render(e):r.a.createElement("div",null)},a.queryApp=e.parent,a.state={data:[],dataForRender:[],titleMap:{}},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"refresh",value:function(){try{var e=this.queryApp.queryResData||[];this.setState({data:e})}catch(t){}}},{key:"render",value:function(){return r.a.createElement(K.a,{onChange:Wt},r.a.createElement(zt,{header:"Tools/Dashboard",key:"1"},r.a.createElement($.a,{defaultActiveKey:"1",onChange:Wt},r.a.createElement(Qt,{tab:"Upload",key:"1"},r.a.createElement(yt,null)),r.a.createElement(Qt,{tab:"Dashboard",key:"2"},this.renderDash()),r.a.createElement(Qt,{tab:"RawData",key:"3"},r.a.createElement("pre",null,Pt.renderRawData(this.state.data))))))}}]),t}(n.PureComponent);Jt.basicCheck=function(e,t){if(e.length<1)return!1;try{return t(e[0])}catch(a){return!1}return!0};var Kt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).setData=function(e){a.queryResData=e,a.dash.current.refresh()},a.state={sqlContent:""},a.directoryTree=r.a.createRef(),a.editor=r.a.createRef(),a.messageBox=r.a.createRef(),a.display=r.a.createRef(),a.dash=r.a.createRef(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"mlsql-queryapp"},r.a.createElement("div",{className:"mlsql-directory-tree"},r.a.createElement(lt,{ref:this.directoryTree,parent:this})),r.a.createElement("div",{className:"mlsql-editor"},r.a.createElement(We,{ref:this.editor,parent:this}),r.a.createElement("div",{className:"mlsql-messagebox"},r.a.createElement(z.a,{height:"100px",width:"100%",ref:this.messageBox,mode:"text",theme:"github",name:"message_box"})),r.a.createElement("div",null,r.a.createElement(Jt,{ref:this.dash,parent:this})),r.a.createElement("div",{className:"mlsql-query-display"},r.a.createElement(ut,{ref:this.display,parent:this}))))}}]),t}(n.Component),$t="cluster",Yt="console",Xt="team",Zt="demo",ea="BackendForm",ta="BackendList",aa="SetBackendTags",na="bigdl",ra="nlp",la="stream",oa="basic",ia="team_view_basic",ca="cluster_view_basic",sa=a(953),ua=a(942),ma=a(32),da=a(955),pa=(a(930),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e)))._submit=function(){var e=a.state,t=e.name,n=e.url,r=e.tag,l=new T(M),o=Object(d.a)(Object(d.a)(a));l.request2({action:"/backend/add",name:t,tag:r,url:n},function(e){o.clusterMainPage.switchToBackendList()},function(e){a.setState({msg:e})})},a.submit=function(){a.validateForm()},a.validateForm=function(){var e=a.state,t=e.name,n=e.url,r=e.tag;if(t&&n&&r)if(n.includes(":")){var l=Object(d.a)(Object(d.a)(a));new T(M).request2({action:"/backend/list"},function(e){new Set(e.map(function(e){return e.name})).has(t)?a.setState({msg:"".concat(t," exists")}):l._submit()},function(e){a.setState({msg:e})})}else a.setState({msg:"".concat(n," should format like: ip/dns:port  ")});else a.setState({msg:"name, url ,tag should not empty"})},a.setName=function(e){a.setState({name:e.target.value})},a.setTag=function(e){a.setState({tag:e.target.value})},a.setUrl=function(e){a.setState({url:e.target.value})},a.state={msg:""},a.clusterMainPage=e.parent,a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.createElement("div",null,n.createElement(b.a,{helperText:"name",label:"the name of backend",labelFor:"name",labelInfo:"(required)"},n.createElement(E.a,{id:"name",onChange:this.setName,placeholder:"name"})),n.createElement(b.a,{helperText:"multi tag please use comma separate",label:"tag",labelFor:"tag",labelInfo:"(required)"},n.createElement(E.a,{id:"tag",onChange:this.setTag,placeholder:"tag"})),n.createElement(b.a,{helperText:"address",label:"url",labelFor:"url",labelInfo:"(required)"},n.createElement(E.a,{id:"url",onChange:this.setUrl,placeholder:"url e.g. 127.0.0.1:9003"})),n.createElement(f.a,{type:"submit",text:"Add",onClick:this.submit}),""!==this.state.msg&&n.createElement("div",{className:"mlsql-backend-messagebox"},this.state.msg))}}]),t}(n.Component)),ha=ne.a.Option,fa=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).renderTags=function(){var e=Object(d.a)(Object(d.a)(a));new T(M).request2({action:"/backend/list"},function(t){t.forEach(function(t){t.tag.split(",").forEach(function(t){e.state.renderTags.push(n.createElement(ha,{key:t},t))})})},function(t){e.setState({msg:t})})},a.renderUsers=function(){var e=Object(d.a)(Object(d.a)(a));new T(C).request2({},function(t){t.forEach(function(t){e.state.renderUsers.push(n.createElement(ha,{key:t},t))})},function(t){e.setState({msg:t})})},a.setTag=function(e){a.setState({updateTag:e})},a.setUser=function(e){a.setState({updateUser:e})},a.setDefaultBackend=function(){var e=Object(d.a)(Object(d.a)(a)),t=new T(k),n=(a.state.updateTag||[]).join(","),r=(a.state.updateUser||[]).join(",");n&&t.request2({backendTags:n,users:r},function(t){e.mainPage.switchToBackendList()},function(t){e.setState({msg:t})})},a.mainPage=e.parent,a.state={tags:[],renderTags:[],renderUsers:[]},a.tagSelectRef=n.createRef(),a.userSelectRef=n.createRef();var r=Object(d.a)(Object(d.a)(a));return(new H).user(function(e){e.userName;var t=e.backendTags;t&&(console.log(t.split(",")),r.setState({tags:t.split(",")})),r.renderTags(),r.renderUsers()}),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return n.createElement("div",null,"Backend Tag:",n.createElement("div",{style:{margin:"10px 0px"}},n.createElement(ne.a,{mode:"multiple",style:{width:"100%"},placeholder:"Please select",onChange:this.setTag,ref:this.tagSelectRef},this.state.renderTags)),"For Users:",n.createElement("div",{style:{margin:"10px 0px"}},n.createElement(ne.a,{mode:"multiple",style:{width:"100%"},placeholder:"Please select",onChange:this.setUser,ref:this.userSelectRef},this.state.renderUsers)),n.createElement(Q.a,{type:"primary",onClick:function(){e.setDefaultBackend()}},"Update"),n.createElement("div",null),this.state.msg&&n.createElement("div",{className:"mlsql-backend-messagebox"},this.state.msg))}}]),t}(n.Component),ga=sa.a.Header,ba=sa.a.Content,Ea=sa.a.Footer,va=sa.a.Sider,ya=(ua.a.SubMenu,function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).deleteBackend=function(e){var t=Object(d.a)(Object(d.a)(a));new T(M).request2({id:e,action:"/backend/remove"},function(e){t.switchToBackendList()},function(e){})},a.loadBackends=function(){var e=Object(d.a)(Object(d.a)(a)),t=new T(M);(new H).user(function(a){a.userName;var r=a.backendTags;t.request2({action:"/backend/list"},function(t){t.forEach(function(t){var a="";r==t.tag&&(a=n.createElement(Q.a,{disabled:!0,style:{color:"green"},type:"primary"},"Active")),t.status=a,t.operator=n.createElement("div",null,n.createElement(Q.a,{type:"danger",onClick:function(){e.deleteBackend(t.id)}},"delete")),delete t.tags}),e.tableDisplayRef.current.update(t,{render:{operator:function(e){return n.createElement("span",null,e)},status:function(e){return n.createElement("span",null,e)}}})},function(e){})})},a.switchToBackendForm=function(){a.setState({currentView:ea})},a.switchToBackendList=function(){a.setState({currentView:ta}),a.loadBackends()},a.switchToSetBackendTags=function(){a.setState({currentView:aa})},a.renderView=function(){return a.state.currentView==ta?(a.loadBackends(),n.createElement(ut,{ref:a.tableDisplayRef,parent:Object(d.a)(Object(d.a)(a))})):a.state.currentView==ea?n.createElement(pa,{ref:a.backendFormRef,parent:Object(d.a)(Object(d.a)(a))}):a.state.currentView==aa?n.createElement(fa,{ref:a.setBackendTagsViewRef,parent:Object(d.a)(Object(d.a)(a))}):void 0},a.renderViewIndex=function(){return a.state.currentView==ta?"1":a.state.currentView==ea?"2":a.state.currentView==aa?"3":"1"},a.onCollapse=function(e){a.setState({collapsed:e})},a.state={collapsed:!1,currentView:ta},a.tableDisplayRef=n.createRef(),a.backendFormRef=n.createRef(),a.setBackendTagsViewRef=n.createRef(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.createElement(sa.a,{style:{minHeight:"100vh"}},n.createElement(va,{collapsible:!0,collapsed:this.state.collapsed,onCollapse:this.onCollapse},n.createElement("div",{className:"logo"}),n.createElement(ua.a,{theme:"dark",defaultSelectedKeys:[this.renderViewIndex()],mode:"inline"},n.createElement(ua.a.Item,{key:"1"},n.createElement(ma.a,{type:"desktop"}),n.createElement("span",null,n.createElement("a",{style:{color:"white"},onClick:this.switchToBackendList},"List Backend"))),n.createElement(ua.a.Item,{key:"2"},n.createElement(ma.a,{type:"desktop"}),n.createElement("span",null,n.createElement("a",{style:{color:"white"},onClick:this.switchToBackendForm},"Add Backend"))),n.createElement(ua.a.Item,{key:"3"},n.createElement(ma.a,{type:"desktop"}),n.createElement("span",null,n.createElement("a",{style:{color:"white"},onClick:this.switchToSetBackendTags},"Set Console Backend"))))),n.createElement(sa.a,null,n.createElement(ga,{style:{background:"#fff",padding:0}}),n.createElement(ba,{style:{margin:"0 16px"}},n.createElement(da.a,{style:{margin:"16px 0"}},n.createElement(da.a.Item,null)),n.createElement("div",{style:{padding:24,background:"#fff",minHeight:360}},this.renderView())),n.createElement(Ea,{style:{textAlign:"center"}})))}}]),t}(n.Component)),Oa=function(e){function t(e){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.createElement("div",null,n.createElement(ya,null))}}]),t}(n.Component),Sa=a(952),ja=a(956),wa=a(945),Ta=Sa.a.Step,ka=a(147),Ca=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).setData=function(e){a.queryResData=e,a.dash.current.refresh()},a.getEditor=function(){return a.editor.current.aceEditorRef.current.editor},a.state={current:0},a.editor=n.createRef(),a.dash=n.createRef(),a.display=n.createRef(),a.messageBox=n.createRef(),a.techData=a.generateTechData(),a.commandData=a.generateCommandData(),a.steps=a.generateSteps(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"generateView",value:function(e){return n.createElement("div",{style:{marginTop:"30px"}},this.techData[e].length>0&&n.createElement(ja.a,{header:n.createElement("div",null,"How to do:"),footer:n.createElement("div",null,"Congratulations"),bordered:!0,dataSource:this.techData[e],renderItem:function(e){return n.createElement(ja.a.Item,null,e)}}),n.createElement("div",{className:"mlsql-queryapp"},n.createElement("div",{className:"mlsql-editor"},n.createElement(We,{ref:this.editor,parent:this}),n.createElement("div",{className:"mlsql-messagebox"},n.createElement(z.a,{height:"100px",width:"100%",ref:this.messageBox,mode:"text",theme:"github",name:"message_box"})),n.createElement("div",null,n.createElement(Jt,{ref:this.dash,parent:this})),n.createElement("div",{className:"mlsql-query-display"},n.createElement(ut,{ref:this.display,parent:this})))))}},{key:"generateSteps",value:function(){return[{title:"Download Cifar10 Images",content:this.generateView(0)},{title:"Resize Images",content:this.generateView(1)},{title:"Extract Label",content:this.generateView(2)},{title:"Train",content:this.generateView(3)},{title:"Predict",content:this.generateView(4)}]}},{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){try{e.getEditor().setValue(e.commandData[0],-1)}catch(t){}},1e3)}},{key:"next",value:function(){var e=this,t=this.state.current+1;this.setState({current:t}),setTimeout(function(){try{e.getEditor().setValue(e.commandData[t],-1)}catch(a){}},1e3)}},{key:"prev",value:function(){var e=this,t=this.state.current-1;this.setState({current:t}),setTimeout(function(){try{e.getEditor().setValue(e.commandData[t],-1)}catch(a){}},1e3)}},{key:"render",value:function(){var e=this,t=this.state.current;return n.createElement("div",null,n.createElement("div",{className:"steps-action",style:{marginBottom:"30px"}},t<this.steps.length-1&&n.createElement(Q.a,{type:"primary",onClick:function(){return e.next()}},"Next Step"),t===this.steps.length-1&&n.createElement(Q.a,{type:"primary",onClick:function(){return wa.a.success("Processing complete!")}},"Done"),t>0&&n.createElement(Q.a,{style:{marginLeft:8},onClick:function(){return e.prev()}},"Previous Step")),n.createElement(Sa.a,{current:t},this.steps.map(function(e){return n.createElement(Ta,{key:e.title,title:e.title})})),n.createElement("div",{className:"steps-content"},this.steps[t].content))}},{key:"generateTechData",value:function(){return[["Step 0: Clear the content in editor","Step 1: Click Quick Menu","Step 2: Drag Tools/Download uploaded file to Editor","Step 3: An dialog will be opened, fill field [from] with 'public/cifar.tar' and field [to] with '/tmp'","Step 4: Click Ok in dialog","Step 5: Click button Run(Since there are so many files, it will take a while.)"],["Step 0: Clear the content in editor","Step 1: Click Quick Menu","Step 2: Drag Tools/Load images",n.createElement(ka,{source:"Step 3: An dialog will be opened\nfill field [Output table] with 'images'\nfield [imageDir]  with '/tmp/cifar'\nfield [code]  with \n\n```scala\ndef apply(params:Map[String,String]) = {\n         Resize(256, 256) -> CenterCrop(224, 224) ->\n          MatToTensor() -> ImageFrameToSample()\n       }\n```"}),"Step 4: Click Ok in dialog","Step 5: Click button Run"],["Step 0: Use set statement to set a variable named labelMappingPath.","Step 1: extract the class name from path","Step 2: map label string to number","Step 3: add 1 to label number since the bigdl requires that.","Step 4: finally, we get features and label","Step 5: Click button Run"],["Step 0: Clear the content in editor","Step 1: Click Quick Menu","Step 2: Drag Algorithms/Deep Learning",n.createElement(ka,{source:"Step 3: An dialog will be opened  \nfill field [tableName] with 'trainData'  \nfield [Model save path]  with '/tmp/bigdl' \nfield [code]  with    \n```scala  \n def apply(params:Map[String,String])={\n                        val model = Sequential()\n                        model.add(Reshape(Array(3, 28, 28), inputShape = Shape(28, 28, 3)))\n"+'                        model.add(Convolution2D(6, 5, 5, activation = "tanh").setName("conv1_5x5"))\n                        model.add(MaxPooling2D())\n                        model.add(Convolution2D(12, 5, 5, activation = "tanh").setName("conv2_5x5"))\n                        model.add(MaxPooling2D())\n                        model.add(Flatten())\n                        model.add(Dense(100, activation = "tanh").setName("fc1"))\n                        model.add(Dense(params("classNum").toInt, activation = "softmax").setName("fc2"))\n                    }```  \n'}),"Step 4: Click Ok in dialog",n.createElement(ka,{source:'Step 5: modify the where statement, add \n```\nfitParam.0.featureSize="[3,28,28]"\nand fitParam.0.classNum="10"\nand fitParam.0.maxEpoch="50"\n```'}),"Step 6: Click button Run"],[]]}},{key:"generateCommandData",value:function(){return['run command as DownloadExt.`` where \n            from="public/cifar.tar" \n            and to="/tmp";'.stripMargin(),"run command as ImageLoaderExt.`/tmp/cifar` \n            where code='''\n        def apply(params:Map[String,String]) = {\n         Resize(256, 256) -> CenterCrop(224, 224) ->\n          MatToTensor() -> ImageFrameToSample()\n       }''' as images;".stripMargin(),'-- convert image path to number label \n            set labelMappingPath = "/tmp/si"; \n            select split(split(imageName,"_")[1],"\\\\.")[0] as labelStr,features from images as tempData;\n            --convert the label string to number \n            train tempData as StringIndex.`${labelMappingPath}` where inputCol="labelStr" and outputCol="labelIndex";\n            predict tempData as StringIndex.`${labelMappingPath}` as tempData;\n            -- Since the bigdl need label number from 1, we should plus one\n            select (cast(labelIndex as float) + 1) as label,features from tempData as trainData;'.stripMargin(),'--train with LeNet5 model\n            set modelPath = "/tmp/bigdl";            \n            train trainData as BigDLClassifyExt.`${modelPath}` where\n            fitParam.0.featureSize="[3,28,28]"\n            and fitParam.0.classNum="10"\n            and fitParam.0.maxEpoch="50"\n            and fitParam.0.code=\'\'\'\n            |       def apply(params:Map[String,String])={\n            |            val model = Sequential()\n            |            model.add(Reshape(Array(3, 28, 28), inputShape = Shape(28, 28, 3)))\n            |            model.add(Convolution2D(6, 5, 5, activation = "tanh").setName("conv1_5x5"))\n            |            model.add(MaxPooling2D())\n            |            model.add(Convolution2D(12, 5, 5, activation = "tanh").setName("conv2_5x5"))\n            |            model.add(MaxPooling2D())\n            |            model.add(Flatten())\n            |            model.add(Dense(100, activation = "tanh").setName("fc1"))\n            |            model.add(Dense(params("classNum").toInt, activation = "softmax").setName("fc2"))\n            |        }\'\'\';\n            '.stripMargin(),'set modelPath = "/tmp/bigdl";\n            \n            -- batch predict            \n            predict trainData as BigDLClassifyExt.`${modelPath}` as predictdata;\n            \n            -- register BigDLClassifyExt.`/tmp/bigdl` as cifarPredict;\n            select vec_argmax(cifarPredict(vec_dense(features))) as predicted_label,\n            label from trainData\n            as output;'.stripMargin()]}}]),t}(n.Component),Da=a(147),Na=function(e){function t(e){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"generateSteps",value:function(){return[{title:"Download Dataset SogouCS.WWW08",content:this.generateView(0)},{title:"Parse the xml file",content:this.generateView(1)},{title:"Extract Label",content:this.generateView(2)},{title:"Run TFIDF",content:this.generateView(3)},{title:"Train/Register",content:this.generateView(4)},{title:"Predict",content:this.generateView(5)}]}},{key:"generateTechData",value:function(){return[["Step 0: Clear the content in editor","Step 1: Click Quick Menu","Step 2: Drag Tools/Download uploaded file to Editor","Step 3: An dialog will be opened, fill field [from] with 'public/SogouCS.reduced.tar' and field [to] with '/tmp/nlp/sogo'","Step 4: Click Ok in dialog","Step 5: Click button Run(it will take a while.)"],["Step 0: Clear the content in editor","Step 1: Click Quick Menu","Step 2: Drag Load/Save Data/Load data",n.createElement(Da,{source:"\n                |\n                |Step 3: An dialog will be opened,\n                |fill field [path] with '/tmp/nlp/sogo' and field [Output table] with 'xmlData',\n                |specify rowTag to doc and charset to GBK\n                |\"\n                |\n                ".stripMargin()}),"Step 4: Click Ok in dialog","Step 5: Use SQL to filter _corrupt_record","Step 6: Click button Run(it will take a while.)"],[n.createElement(Da,{source:'\n                | Step 0: We will treat url as label source, we use SQL to extract label from url:\n                |\n                |\n                |```\n                |-- http://sports.sohu.com/20070422/n249599819.shtml extract sports from url\n                |select temp.* from (select split(split(url,"/")[2],"\\\\.")[0] as labelStr,content from xmlData) as temp\n                |where temp.labelStr is not null\n                |as rawData;\n                |```\n                |\n                |For now , the label is string, we should convert them to number\n\n                '.stripMargin()}),n.createElement(Da,{source:"\n                |Step 1:  Drag Tools/Convert String to number, a dialog will open,\n                |\n                |```\n                |     1. set Input table as rawData,\n                |     2. Set save path as /tmp/nlp/label_mapping\n                |     3. Set inputCol as labelStr\n                |     4. Set outputCol as label\n                |     5. set Output table as rawDataWithLabel\n                |     6. set functionName table as rawDataWithLabel\n                |```\n                |We can use the functionName in SQL to convert String to number or number to String.\n                ".stripMargin()})],[n.createElement(Da,{source:"\n                |Step 0:  Drag Algorithms/TfIdf, a dialog will open,\n                |\n                |```\n                |         1. set Input table as rawDataWithLabel,\n                |         2. Set save path as /tmp/nlp/tfidf\n                |         3. Set inputCol as content\n                |         4. Set nGrams as 2\n                |         5. set Output table as trainData\n                |```\n                |Click Ok in dialog\n                ".stripMargin()}),n.createElement(Da,{source:"\n                |Step 1:  Drag [Register model as Function]/[Register Model As Function], a dialog will open,\n                |\n                |```\n                |         1. set Function name  as tfidf_predict,\n                |         2. Set Model saved path as /tmp/nlp/tfidf\n                |         3. Set et as TfIdfInPlace\n                |```\n                |Click Ok in dialog\n                ".stripMargin()}),"Step 2: Click button Run(it will take a while.)"],[n.createElement(Da,{source:"\n                |Step 0:  Drag Algorithms/RandomForest, a dialog will open,\n                |\n                |```\n                |         1. set tableName as trainData,\n                |         2. Set Model save path as /tmp/nlp/rf\n                |```\n                |Click Ok in dialog\n                ".stripMargin()}),n.createElement(Da,{source:"\n                |Step 1:  Drag [Register model as Function]/[Register Model As Function], a dialog will open,\n                |\n                |```\n                |         1. set Function name  as rf_predict,\n                |         2. Set Model saved path as /tmp/nlp/rf\n                |         3. Set et as RandomForest\n                |```\n                |Click Ok in dialog\n                ".stripMargin()}),"Step 2: Click button Run(it will take a while.)"],[n.createElement(Da,{source:'\n                |Paste:\n                |\n                |```sql\n                |select rf_predict(tfidf_predict("china is cool")) as predicted as output;\n                |```\n                '.stripMargin()}),"Step 2: Click button Run(it will take a while.)"]]}},{key:"generateCommandData",value:function(){return['run command as DownloadExt.`` where \n             |from="public/SogouCS.reduced.tar" and\n             |to="/tmp/nlp/sogo";'.stripMargin(),'load xml.`/tmp/nlp/sogo` where rowTag="doc" and charset="GBK" as xmlData;\n            |select * from xmlData where _corrupt_record is null as xmlData; \n            '.stripMargin(),'-- http://sports.sohu.com/20070422/n249599819.shtml extract sports from url\n            |select temp.* from (select split(split(url,"/")[2],"\\\\.")[0] as labelStr,content from xmlData) as temp \n            |where temp.labelStr is not null \n            |as rawData;\n            |-- select distinct(split(split(url,"/")[2],"\\\\.")[0]) as labelStr from rawData as output;\n            |-- select split(split(url,"/")[2],"\\\\.")[0] as labelStr,url from rawData as output;\n            |\n            |run rawData as StringIndex.`/tmp/nlp/label_mapping` where inputCol="labelStr"and\n            |outputCol="label" ;\n            |predict rawData as StringIndex.`/tmp/nlp/label_mapping` as rawDataWithLabel;\n            |register StringIndex.`/tmp/nlp/label_mapping` as convert_label; '.stripMargin(),'train rawDataWithLabel as TfIdfInPlace.`/tmp/nlp/tfidf` where inputCol="content"\n            |and nGrams="2" as trainData;\n            |\n            |register TfIdfInPlace.`/tmp/nlp/tfidf` as tfidf_predict;'.stripMargin(),'train trainData as RandomForest.`/tmp/nlp/rf` where \n            |keepVersion="true";\n            |\n            |register RandomForest.`/tmp/nlp/rf` as rf_predict;'.stripMargin(),'select rf_predict(tfidf_predict("china is cool")) as predicted as output;'.stripMargin()]}}]),t}(Ca),xa=a(147),Ra=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"generateSteps",value:function(){return[{title:"Variable in MLSQL",content:this.generateView(0)},{title:"Process excel",content:this.generateView(1)},{title:"Extract Label",content:this.generateView(2)},{title:"Run TFIDF",content:this.generateView(3)},{title:"Train/Register",content:this.generateView(4)},{title:"Predict",content:this.generateView(5)}]}},{key:"generateTechData",value:function(){return[[n.createElement(xa,{source:"\n                |\n                |\n                |\n                ".stripMargin()})],[],[],[],[],[]]}},{key:"generateCommandData",value:function(){return['|-- set string\n             |set email="allwefantasy@gmail.com";\n             |select "${email}" as email  as table1;\n             |             \n             |-- nested variable reference\n             |set email="allwefantasy@gmail.com";\n             |set hello="hello ${email}";\n             |\n             |-- build-in variable: HOME OWNER date\n             |set day_id =\'\'\'${date.toString("yyyy-MM-dd")}\'\'\';\n             |select "${day_id}" as a as test111;\n             |\n             |-- conf/spark.sql("set spark.sql.shuffle.partitions=200")\n             |set spark.sql.shuffle.partitions="200" where type="conf";\n             |\n             |-- shell\n             |set date=`date` where type="shell";\n             |select "${date}" as dt as output;\n             |                \n             '.stripMargin(),'load xml.`/tmp/nlp/sogo` where rowTag="doc" and charset="GBK" as xmlData;\n            |select * from xmlData where _corrupt_record is null as xmlData; \n            '.stripMargin(),'-- http://sports.sohu.com/20070422/n249599819.shtml extract sports from url\n            |select temp.* from (select split(split(url,"/")[2],"\\\\.")[0] as labelStr,content from xmlData) as temp \n            |where temp.labelStr is not null \n            |as rawData;\n            |-- select distinct(split(split(url,"/")[2],"\\\\.")[0]) as labelStr from rawData as output;\n            |-- select split(split(url,"/")[2],"\\\\.")[0] as labelStr,url from rawData as output;\n            |\n            |run rawData as StringIndex.`/tmp/nlp/label_mapping` where inputCol="labelStr"and\n            |outputCol="label" ;\n            |predict rawData as StringIndex.`/tmp/nlp/label_mapping` as rawDataWithLabel;\n            |register StringIndex.`/tmp/nlp/label_mapping` as convert_label; '.stripMargin(),'train rawDataWithLabel as TfIdfInPlace.`/tmp/nlp/tfidf` where inputCol="content"\n            |and nGrams="2" as trainData;\n            |\n            |register TfIdfInPlace.`/tmp/nlp/tfidf` as tfidf_predict;'.stripMargin(),'train trainData as RandomForest.`/tmp/nlp/rf` where \n            |keepVersion="true";\n            |\n            |register RandomForest.`/tmp/nlp/rf` as rf_predict;'.stripMargin(),'select rf_predict(tfidf_predict("china is cool")) as predicted as output;'.stripMargin()]}}]),t}(Ca),Ma=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).renderView=function(){return a.state.currentView===na?n.createElement(Ca,null):a.state.currentView===ra?n.createElement(Na,null):a.state.currentView===oa?n.createElement(Ra,null):null},a.state={currentView:oa},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.renderView()}}]),t}(n.Component),Pa=sa.a.Header,Ia=sa.a.Content,La=sa.a.Footer,_a=sa.a.Sider,Va=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).switchToBigDL=function(e){a.demosRef.current.setState({currentView:na})},a.switchToNLP=function(e){a.demosRef.current.setState({currentView:ra})},a.switchToStream=function(e){a.demosRef.current.setState({currentView:la})},a.switchToBasic=function(){a.demosRef.current.setState({currentView:oa})},a.demosRef=n.createRef(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.createElement(sa.a,{style:{minHeight:"100vh"}},n.createElement(_a,null,n.createElement("div",{className:"logo"}),n.createElement(ua.a,{theme:"dark",defaultSelectedKeys:["0"],mode:"inline"},n.createElement(ua.a.Item,{key:"0"},n.createElement(Q.a,{block:!0,onClick:this.switchToBasic},"Basic Tutorial")),n.createElement(ua.a.Item,{key:"1"},n.createElement(Q.a,{block:!0,onClick:this.switchToBigDL},"Cifar10")),n.createElement(ua.a.Item,{key:"2"},n.createElement(Q.a,{block:!0,onClick:this.switchToNLP},"NLP")),n.createElement(ua.a.Item,{key:"3"},n.createElement(Q.a,{block:!0},"Stream")),n.createElement(ua.a.Item,{key:"4"},n.createElement(Q.a,{block:!0},"Excel")))),n.createElement(sa.a,null,n.createElement(Pa,{style:{background:"#fff",padding:0}}),n.createElement(Ia,{style:{margin:"0 16px"}},n.createElement("div",{style:{padding:24,background:"#fff",minHeight:360}},n.createElement(Ma,{ref:this.demosRef}))),n.createElement(La,{style:{textAlign:"center"}})))}}]),t}(n.Component),Ba=function(e){function t(e){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.createElement("div",null,n.createElement(Va,null))}}]),t}(n.Component),Aa=(a(132),a(948)),Fa=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=Object(d.a)(Object(d.a)(a));a.props.form.validateFields(function(e,a){e||new T(I).request2(a,function(e){"success"===e.msg?(wa.a.success("Create team success",3),t.teamCards.teamsRef.current.refresh()):wa.a.warning("Create team fail"+e.msg,10)},function(e){wa.a.error("Create team fail:"+e,10)})})},a.teamNameCheck=function(e,t,a){t?new T(L).request2({name:t},function(e){e.msg?a():a("".concat(t," have been taken. Try another"))},function(e){a("server error:"+e)}):a()},console.log(e),a.teamCards=e.parent,a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return n.createElement(Aa.a,{onSubmit:this.handleSubmit,className:"login-form"},n.createElement(Aa.a.Item,null,e("name",{rules:[{required:!0,message:"Please input the team name!"},{validator:this.teamNameCheck}]})(n.createElement(ae.a,{prefix:n.createElement(ma.a,{type:"team",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Team name"}))),n.createElement(Aa.a.Item,null,n.createElement(Q.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Create")))}}]),t}(n.Component),qa=Aa.a.create({name:"create_team"})(Fa),Ua=(a(133),a(47)),Ha=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,null,[{key:"fetchTeams",value:function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data";new T(t).request2({},function(e){a.setState(Object(Ua.a)({},n,e))},function(t){wa.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"fetchMembersByTeam",value:function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data";new T("/api_v1/team/members").request2({teamName:a},function(e){t.setState(Object(Ua.a)({},n,e))},function(t){wa.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"fetchRoles",value:function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data";new T("/api_v1/team/roles").request2({teamName:a},function(e){t.setState(Object(Ua.a)({},n,e))},function(t){wa.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"fetchTablesByRole",value:function(t,a,n,r){new T("/api_v1/role/tables").request2({teamName:a,roleName:n},function(e){r&&t.setState(Object(Ua.a)({},r,e))},function(t){wa.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"removeRole",value:function(t,a,n){new T("/api_v1/team/role/remove").request2({teamName:a,roleName:n},function(e){},function(t){wa.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"removeTeamMember",value:function(t,a,n,r){new T("/api_v1/team/member/remove").request2({teamName:a,userName:n},function(e){r()},function(t){wa.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"teamInvite",value:function(t,a,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"data";new T(a).request2({teamName:n},function(e){t.setState(Object(Ua.a)({},r,e))},function(t){wa.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"fetchTables",value:function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data";new T("/api_v1/team/tables").request2({teamName:a},function(e){t.setState(Object(Ua.a)({},n,e))},function(t){wa.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"removeTable",value:function(t,a,n,r,l){new T("/api_v1/team/table/remove").request2({teamName:a,tableId:n},function(e){r&&t.setState(Object(Ua.a)({},r,e)),l&&l()},function(t){wa.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"fetchTableTypes",value:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data";new T(R).runScript({},"load _mlsql_.`tables/tableTypes` as output;",function(e){t.setState(Object(Ua.a)({},a,e))},function(t){wa.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"fetchSourceTypes",value:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data";new T(R).runScript({},"load _mlsql_.`tables/sourceTypes` as output;",function(e){t.setState(Object(Ua.a)({},a,e))},function(t){wa.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"fetchOperateTypes",value:function(t,a){new T(R).runScript({},"load _mlsql_.`tables/operateTypes` as output;",function(e){a&&t.setState(Object(Ua.a)({},a,e))},function(t){wa.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"removeRoleTable",value:function(t,a,n,r,l,o){new T("/api_v1/role/table/remove").request2({teamName:a,roleName:n,tableId:r},function(e){l&&t.setState(Object(Ua.a)({},l,e)),o&&o()},function(t){wa.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}}]),e}();Ha.MESSAGE_TIMEOUT=10;var Ga=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).refresh=function(){Ha.fetchTeams(a.apiUrl,Object(d.a)(Object(d.a)(a)))},a.renderCommand=function(e){var t=new za(Object(d.a)(Object(d.a)(a)),e);return a.apiUrl===V?[n.createElement("a",{onClick:t.accept},"accept"),n.createElement("a",{onClick:t.refuse},"refuse")]:[]},a.teamCards=e.parent,a.apiUrl=e.apiUrl,a.state={data:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){Ha.fetchTeams(this.apiUrl,this)}},{key:"render",value:function(){var e=this;return n.createElement("div",null,n.createElement(ja.a,{dataSource:this.state.data,renderItem:function(t){return n.createElement(ja.a.Item,{key:t.name,actions:e.renderCommand(t.name)},n.createElement(ja.a.Item.Meta,{title:n.createElement("a",{href:"#"},t.name)}))}}))}}]),t}(n.Component),za=function e(t,a){var n=this;Object(i.a)(this,e),this.accept=function(e){e.preventDefault(),Ha.teamInvite(n.view,"/api_v1/team/member/accept",n.teamName)},this.refuse=function(e){e.preventDefault(),Ha.teamInvite(n.view,"/api_v1/team/member/refuse",n.teamName)},this.view=t,this.teamName=a},Qa=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=Object(d.a)(Object(d.a)(a));a.props.form.validateFields(function(e,a){e||new T(B).request2(a,function(e){"success"===e.msg?(t.teamCards.setState({refresh:!0}),wa.a.success("Invite success",3)):wa.a.warning("Invite fail:"+e.msg,10)},function(e){t.teamCards.setState({refresh:!0}),wa.a.error("Invite fail:"+e,10)})})},a.renderTeams=function(){return a.state.teams.map(function(e){return n.createElement(ne.a.Option,{key:e.name,name:e.name},e.name)})},a.teamCards=e.parent,a.state={teams:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=new T(_),t=this;e.request2({},function(e){t.setState({teams:e})},function(e){wa.a.warning("load data fail:"+e,15)})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return n.createElement(Aa.a,{onSubmit:this.handleSubmit,className:"login-form"},n.createElement(Aa.a.Item,null,e("teamName",{rules:[{required:!0,message:"Please choose the team name"}]})(n.createElement(ne.a,{placeholder:"Team name",size:"large",style:{width:200}},this.renderTeams()))),n.createElement(Aa.a.Item,null,e("userNames",{rules:[{required:!0,message:"Please input the user name you want invite"}]})(n.createElement(ae.a,{prefix:n.createElement(ma.a,{type:"team",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"User name, split with ','"}))),n.createElement(Aa.a.Item,null,n.createElement(Q.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Create")))}}]),t}(n.Component),Wa=Aa.a.create({name:"create_team"})(Qa),Ja=function e(){Object(i.a)(this,e)};Ja.renderTeamsForSelect=function(e){return e.state.teams.map(function(e){return n.createElement(ne.a.Option,{key:e.name,name:e.name},e.name)})},Ja.renderTeamsWithSelect=function(e){return n.createElement(ne.a,{placeholder:"Team name",size:"large",style:{width:200}},Ja.renderTeams(e))};var Ka=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).selectTeam=function(e){a.currentTeam=e,Ha.fetchMembersByTeam(Object(d.a)(Object(d.a)(a)),e,"members")},a.renderCommand=function(e){var t=Object(d.a)(Object(d.a)(a));return[n.createElement("a",{onClick:function(){Ha.removeTeamMember(t,t.currentTeam,e,function(){Ha.fetchMembersByTeam(t,t.currentTeam,"members")})}},"remove")]},a.renderMembers=function(){return n.createElement(ja.a,{dataSource:a.state.members,renderItem:function(e){return n.createElement(ja.a.Item,{key:e.name,actions:a.renderCommand(e.name)},n.createElement(ja.a.Item.Meta,{title:n.createElement("a",{href:"#"},e.name)}))}})},a.teamCards=e.parent,a.apiUrl=e.apiUrl,a.state={teams:[],members:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){Ha.fetchTeams(this.apiUrl,this,"teams")}},{key:"render",value:function(){return n.createElement("div",null,n.createElement(ne.a,{placeholder:"Team name",size:"large",style:{width:200},onChange:this.selectTeam},Ja.renderTeamsForSelect(this)),this.renderMembers())}}]),t}(n.Component),$a=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=Object(d.a)(Object(d.a)(a));a.props.form.validateFields(function(e,a){e||new T(A).request2(a,function(e){"success"===e.msg?(wa.a.success("Create roles success",3),t.teamCards.teamsRef.current.refresh()):wa.a.warning("Create roles fail:"+e.msg,10)},function(e){wa.a.error("Create roles fail:"+e,10)})})},a.renderTeams=function(){return a.state.teams.map(function(e){return n.createElement(ne.a.Option,{key:e.name,name:e.name},e.name)})},a.teamCards=e.parent,a.state={teams:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=new T(_),t=this;e.request2({},function(e){t.setState({teams:e})},function(e){wa.a.warning("load data fail:"+e,15)})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return n.createElement(Aa.a,{onSubmit:this.handleSubmit,className:"login-form"},n.createElement(Aa.a.Item,null,e("teamName",{rules:[{required:!0,message:"Please choose the team name"}]})(n.createElement(ne.a,{placeholder:"Team name",size:"large",style:{width:200}},this.renderTeams()))),n.createElement(Aa.a.Item,null,e("roleNames",{rules:[{required:!0,message:"Please input the role name you want to create"}]})(n.createElement(ae.a,{prefix:n.createElement(ma.a,{type:"role",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"User name, split with ','"}))),n.createElement(Aa.a.Item,null,n.createElement(Q.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Create")))}}]),t}(n.Component),Ya=Aa.a.create({name:"add_role_for_team"})($a),Xa=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).selectTeam=function(e){a.currentTeam=e,Ha.fetchRoles(Object(d.a)(Object(d.a)(a)),e,"roles")},a.refresh=function(){a.currentTeam&&Ha.fetchRoles(Object(d.a)(Object(d.a)(a)),a.currentTeam,"roles")},a.renderCommand=function(e){return[n.createElement("a",{onClick:function(){Ha.removeRole(Object(d.a)(Object(d.a)(a)),a.currentTeam,e),Ha.fetchRoles(Object(d.a)(Object(d.a)(a)),a.currentTeam,"roles")}},"remove")]},a.renderRoles=function(){return n.createElement(ja.a,{dataSource:a.state.roles,renderItem:function(e){return n.createElement(ja.a.Item,{key:e.name,actions:a.renderCommand(e.name)},n.createElement(ja.a.Item.Meta,{title:n.createElement("a",{href:"#"},e.name)}))}})},a.teamCards=e.parent,a.apiUrl=e.apiUrl,a.state={teams:[],members:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){Ha.fetchTeams(_,this,"teams")}},{key:"render",value:function(){return n.createElement("div",null,n.createElement(ne.a,{placeholder:"Team name",size:"large",style:{width:200},onChange:this.selectTeam},Ja.renderTeamsForSelect(this)),this.renderRoles())}}]),t}(n.Component),Za=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=Object(d.a)(Object(d.a)(a));a.props.form.validateFields(function(e,a){e||new T(F).request2(a,function(e){"success"===e.msg?(t.teamCards.teamTablesRef.current.refresh(),wa.a.success("Create  success",3)):wa.a.warning("Create  fail:"+e.msg,10)},function(e){wa.a.error("Create  fail:"+e,10)})})},a.renderTeams=function(){return a.state.teams.map(function(e){return n.createElement(ne.a.Option,{key:e.name,name:e.name},e.name)})},a.renderTableTypes=function(){return a.state.tableTypes.map(function(e){return n.createElement(ne.a.Option,{key:e.value,name:e.value},e.value)})},a.renderSourceTypes=function(){return a.state.sourceTypes.map(function(e){return n.createElement(ne.a.Option,{key:e.value,name:e.value},e.value)})},a.teamCards=e.parent,a.state={teams:[],tableTypes:[],sourceTypes:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){Ha.fetchTeams(_,this,"teams"),Ha.fetchTableTypes(this,"tableTypes"),Ha.fetchSourceTypes(this,"sourceTypes")}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return n.createElement(Aa.a,{onSubmit:this.handleSubmit,className:"login-form"},n.createElement(Aa.a.Item,null,e("teamName",{rules:[{required:!0,message:"Please choose the team name"}]})(n.createElement(ne.a,{placeholder:"Team name",size:"large",style:{width:200}},this.renderTeams()))),n.createElement(Aa.a.Item,null,e("name",{rules:[{required:!0,message:"Please input the table name"}]})(n.createElement(ae.a,{prefix:n.createElement(ma.a,{type:"table",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"table name"}))),n.createElement(Aa.a.Item,null,e("db",{rules:[]})(n.createElement(ae.a,{prefix:n.createElement(ma.a,{type:"table",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"db name"}))),n.createElement(Aa.a.Item,null,e("tableType",{rules:[{required:!0,message:"Please input the table type you want to create"}]})(n.createElement(ne.a,{placeholder:"table Type",size:"large",style:{width:200}},this.renderTableTypes()))),n.createElement(Aa.a.Item,null,e("sourceType",{rules:[]})(n.createElement(ne.a,{placeholder:"source Type",size:"large",style:{width:200}},this.renderSourceTypes()))),n.createElement(Aa.a.Item,null,n.createElement(Q.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Create")))}}]),t}(n.Component),en=Aa.a.create({name:"add_table_for_team"})(Za),tn=(n.Component,function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=Object(d.a)(Object(d.a)(a));a.props.form.validateFields(function(e,a){e||new T(q).request2(a,function(e){"success"===e.msg?(t.teamCards.roleTablesRef.current.refresh(),wa.a.success("Create  success",3)):wa.a.warning("Create  fail:"+e.msg,10)},function(e){wa.a.error("Create  fail:"+e,10)})})},a.onTeamSelect=function(e){Ha.fetchRoles(Object(d.a)(Object(d.a)(a)),e,"roles"),Ha.fetchTables(Object(d.a)(Object(d.a)(a)),e,"tables"),Ha.fetchOperateTypes(Object(d.a)(Object(d.a)(a)),"operateTypes")},a.renderTeams=function(){return a.state.teams.map(function(e){return n.createElement(ne.a.Option,{key:e.name,name:e.name},e.name)})},a.renderRoles=function(){return a.state.roles.map(function(e){return n.createElement(ne.a.Option,{key:e.name,name:e.name},e.name)})},a.renderTables=function(){return a.state.tables.map(function(e){return n.createElement(ne.a.Option,{key:e.name,value:e.id},e.name)})},a.renderOperateTypes=function(){return a.state.operateTypes.map(function(e){return n.createElement(ne.a.Option,{key:e.value,name:e.value},e.value)})},a.teamCards=e.parent,a.state={teams:[],roles:[],tables:[],operateTypes:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){Ha.fetchTeams(_,this,"teams")}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return n.createElement(Aa.a,{onSubmit:this.handleSubmit,className:"login-form"},n.createElement(Aa.a.Item,null,e("teamName",{rules:[{required:!0,message:"Please choose the team name"}]})(n.createElement(ne.a,{placeholder:"Team name",size:"large",style:{width:200},onChange:this.onTeamSelect},this.renderTeams()))),n.createElement(Aa.a.Item,null,e("roleName",{rules:[{required:!0,message:"Please input the role name "}]})(n.createElement(ne.a,{placeholder:"role name",size:"large",style:{width:200}},this.renderRoles()))),n.createElement(Aa.a.Item,null,e("tableName",{rules:[{required:!0,message:"Please input the tableName name "}]})(n.createElement(ne.a,{mode:"multiple",placeholder:"table name",size:"large",style:{width:200}},this.renderTables()))),n.createElement(Aa.a.Item,null,e("operateType",{rules:[{required:!0,message:"Please input the operateType to Role "}]})(n.createElement(ne.a,{mode:"multiple",placeholder:"Operate type",size:"large",style:{width:200}},this.renderOperateTypes()))),n.createElement(Aa.a.Item,null,n.createElement(Q.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Create")))}}]),t}(n.Component)),an=Aa.a.create({name:"add_table_for_role"})(tn),nn=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).selectTeam=function(e){a.currentTeam=e,Ha.fetchRoles(Object(d.a)(Object(d.a)(a)),e,"roles")},a.onRoleSelect=function(e){a.currentRole=e,Ha.fetchTablesByRole(Object(d.a)(Object(d.a)(a)),a.currentTeam,e,"tables")},a.refresh=function(){a.currentTeam&&a.currentRole&&Ha.fetchTablesByRole(Object(d.a)(Object(d.a)(a)),a.currentTeam,a.currentRole,"tables")},a.renderCommand=function(e){var t=Object(d.a)(Object(d.a)(a));return[n.createElement("a",{onClick:function(){a.currentTeam&&a.currentRole&&Ha.removeRoleTable(Object(d.a)(Object(d.a)(a)),a.currentTeam,a.currentRole,e,null,function(){t.refresh()})}},"remove")]},a.renderRoles=function(){return a.state.roles.map(function(e){return n.createElement(ne.a.Option,{key:e.name,name:e.name},e.name)})},a.renderTables=function(){return n.createElement(ja.a,{dataSource:a.state.tables,renderItem:function(e){return n.createElement(ja.a.Item,{key:e.name,actions:a.renderCommand(e.id)},n.createElement(ja.a.Item.Meta,{title:e.name+":"+e.operateType}))}})},a.teamCards=e.parent,a.apiUrl=e.apiUrl,a.state={teams:[],roles:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){Ha.fetchTeams(_,this,"teams")}},{key:"render",value:function(){return n.createElement("div",null,n.createElement(Y.a,{gutter:16},n.createElement(X.a,null,n.createElement(ne.a,{placeholder:"Team name",size:"large",style:{width:200},onChange:this.selectTeam},Ja.renderTeamsForSelect(this)))),n.createElement("br",null),n.createElement(Y.a,{gutter:16},n.createElement(X.a,null,n.createElement(ne.a,{placeholder:"role name",size:"large",style:{width:200},onChange:this.onRoleSelect},this.renderRoles()))),n.createElement("br",null),n.createElement(Y.a,{gutter:16},n.createElement(X.a,null,this.renderTables())))}}]),t}(n.Component),rn=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).openNotificationWithIcon=function(e,t,a){g.a[e]({message:t,description:a})},a.parent=e.parent,a.state={},a.teamRolesRef=n.createRef(),a.teamMembersRef=n.createRef(),a.teamsRef=n.createRef(),a.roleTablesRef=n.createRef(),a.teamTablesRef=n.createRef(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.createElement("div",{style:{background:"#ECECEC",padding:"30px"}},n.createElement(Y.a,{gutter:24},n.createElement(X.a,{span:8},n.createElement(Z.a,{title:"Team belongs to you",bordered:!1},n.createElement(Ga,{parent:this,ref:this.teamsRef,apiUrl:_}))),n.createElement(X.a,{span:8},n.createElement(Z.a,{title:"Team you join",bordered:!1},n.createElement(Ga,{parent:this,apiUrl:"/api_v1/team/joined"}))),n.createElement(X.a,{span:8},n.createElement(Z.a,{title:"Create new team",bordered:!1},n.createElement(qa,{parent:this})))),n.createElement("br",null),n.createElement(Y.a,{gutter:24},n.createElement(X.a,{span:8},n.createElement(Z.a,{title:"Team inviting you",bordered:!1},n.createElement(Ga,{parent:this,apiUrl:V}))),n.createElement(X.a,{span:8},n.createElement(Z.a,{title:"View members By Team",bordered:!1},n.createElement(Ka,{ref:this.teamMembersRef,parent:this,apiUrl:_}))),n.createElement(X.a,{span:8},n.createElement(Z.a,{title:"Invite members",bordered:!1},n.createElement(Wa,{parent:this})))),n.createElement("br",null),n.createElement(Y.a,{gutter:24},n.createElement(X.a,{span:8},n.createElement(Z.a,{title:"View Roles By Team",bordered:!1},n.createElement(Xa,{ref:this.teamRolesRef,parent:this,apiUrl:A}))),n.createElement(X.a,{span:8},n.createElement(Z.a,{title:"Add table to role",bordered:!1},n.createElement(an,{parent:this}))),n.createElement(X.a,{span:8},n.createElement(Z.a,{title:"Add role to Team",bordered:!1},n.createElement(Ya,{parent:this})))),n.createElement("br",null),n.createElement(Y.a,{gutter:24},n.createElement(X.a,{span:8},n.createElement(Z.a,{title:"View tables By Role",bordered:!1},n.createElement(nn,{parent:this,ref:this.roleTablesRef}))),n.createElement(X.a,{span:8},n.createElement(Z.a,{title:"Add Table to Team",bordered:!1},n.createElement(en,{parent:this})))))}}]),t}(n.Component),ln=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).openNotificationWithIcon=function(e,t,a){g.a[e]({message:t,description:a})},a.parent=e.parent,a.state={},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.createElement("div",{style:{background:"#ECECEC",padding:"30px"}},n.createElement(Y.a,{gutter:24},n.createElement(X.a,{span:8},n.createElement(Z.a,{title:"Add Backend",bordered:!1})),n.createElement(X.a,{span:8},n.createElement(Z.a,{title:"List Backends",bordered:!1})),n.createElement(X.a,{span:8},n.createElement(Z.a,{title:"Set backend",bordered:!1}))))}}]),t}(n.Component),on=sa.a.Header,cn=sa.a.Content,sn=sa.a.Footer,un=sa.a.Sider,mn=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).switchToBasic=function(){a.setState({currentView:ia})},a.switchToCluster=function(){a.setState({currentView:ca})},a.renderView=function(){return a.state.currentView===ia?n.createElement(rn,null):a.state.currentView===ca?n.createElement(ln,null):void 0},a.app=e.parent,a.state={currentView:ia},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.createElement(sa.a,{style:{minHeight:"100vh"}},n.createElement(un,null,n.createElement("div",{className:"logo"}),n.createElement(ua.a,{theme:"dark",defaultSelectedKeys:["0"],mode:"inline"},n.createElement(ua.a.Item,{key:"0"},n.createElement(Q.a,{block:!0,onClick:this.switchToBasic},"Team")),n.createElement(ua.a.Item,{key:"1"},n.createElement(Q.a,{block:!0,onClick:this.switchToCluster},"Cluster")))),n.createElement(sa.a,null,n.createElement(on,{style:{background:"#fff",padding:0}}),n.createElement(cn,{style:{margin:"0 16px"}},n.createElement("div",{style:{padding:24,background:"#fff",minHeight:360}},this.renderView())),n.createElement(sn,{style:{textAlign:"center"}})))}}]),t}(n.Component),dn=function(e){function t(e){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.createElement("div",null,n.createElement(mn,{parent:this}))}}]),t}(n.Component),pn="login",hn="register",fn=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).getLoginOrRegisterManager=function(){return a.app.registerOrLoginRef.current},a.logout=function(){a.auth.logout(),a.app.updateLoginoutStatus()},a.login=function(){a.logout(),a.getLoginOrRegisterManager().setState({loginType:pn})},a.register=function(){a.logout(),a.getLoginOrRegisterManager().setState({loginType:hn})},a.updateLoginoutStatus=function(){a.setState({isLogin:a.auth.isLogin()})},a.auth=new H,a.state={isLogin:a.auth.isLogin()},a.app=a.props.parent,a.auth.userName(function(e){a.setState({userName:e})}),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=n.createElement(f.a,{className:"bp3-minimal",icon:"log-in",text:"Login",onClick:this.login}),t=n.createElement(f.a,{className:"bp3-minimal",icon:"log-out",text:"Logout",onClick:this.logout}),a=n.createElement(f.a,{className:"bp3-minimal",icon:"intersection",text:"Register",onClick:this.register});return n.createElement("div",null,this.state.isLogin?"welcome  "+this.state.userName:"",this.state.isLogin?t:e,a)}}]),t}(n.Component),gn=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).currentView=function(){return a.app.state.currentView},a.userName=function(e){a.setState({userName:e.target.value})},a.password=function(e){a.setState({password:e.target.value})},a.updateLoginoutStatus=function(){a.setState({isLogin:a.auth.isLogin()})},a.registerSuccess=function(e){if(e.status===y.Success)a.setState({registerOrLoginSuccess:!0}),a.app.updateLoginoutStatus();else{var t=Object(d.a)(Object(d.a)(a)),n=function(e){var a=e;try{a=JSON.parse(e).msg}catch(n){}t.setState({msg:a})};e.content.then(n).catch(n)}},a.registerFail=function(e){a.setState({msg:e.value.message})},a.login=function(){new bn(Object(d.a)(Object(d.a)(a))).validate()&&a.auth.login(a.state.userName,a.state.password,a.registerSuccess,a.registerFail)},a.register=function(){new bn(Object(d.a)(Object(d.a)(a))).validate()&&a.auth.register(a.state.userName,a.state.password,a.registerSuccess,a.registerFail)},a.auth=new H,a.app=a.props.parent,a.state={registerOrLoginSuccess:!1,msg:"",isLogin:a.auth.isLogin(),loginType:a.props.loginType||pn},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.auth.isLogin()&&this.currentView()===Yt?n.createElement(Kt,null):this.auth.isLogin()&&this.currentView()===$t?n.createElement(Oa,null):this.auth.isLogin()&&this.currentView()===Zt?n.createElement(Ba,null):this.auth.isLogin()&&this.currentView()===Xt?n.createElement(dn,null):n.createElement("div",{className:"mlsql-register"},n.createElement("div",{className:"mlsql-register-form"},n.createElement(b.a,{helperText:"email",label:"userName",labelFor:"userName",labelInfo:"(required)"},n.createElement(E.a,{id:"userName",placeholder:"email",onChange:this.userName})),n.createElement(b.a,{helperText:"password",label:"password",labelFor:"password",labelInfo:"(required)"},n.createElement(E.a,{id:"password",type:"password",placeholder:"password",onChange:this.password})),n.createElement(f.a,{type:"submit",text:this.state.loginType===pn?"Login":"Register",onClick:this.state.loginType===pn?this.login:this.register}),""!==this.state.msg&&n.createElement("div",{className:"mlsql-register-messagebox"},this.state.msg)))}}]),t}(n.Component),bn=function(){function e(t){Object(i.a)(this,e),this.parent=t}return Object(c.a)(e,[{key:"validate",value:function(){return this.validateUserName()&&this.validatePassword()}},{key:"validateUserName",value:function(){var e=/[a-zA-Z0-9]+[\.]?([a-zA-Z0-9]+)?[\@][a-z]{3,9}[\.][a-z]{2,5}/g.test(this.parent.state.userName);return e||this.parent.setState({msg:"userName should be email"}),e}},{key:"validatePassword",value:function(){var e=this.parent.state.password.length>=4;return e||this.parent.setState({msg:"the length of password should > 4"}),e}}]),e}();a(936).inject();var En=function(e,t,a){g.a[e]({message:t,description:a})},vn=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).updateLoginoutStatus=function(){a.menuRef.current.updateLoginoutStatus(),a.registerOrLoginRef.current.updateLoginoutStatus()},a.switchToCluster=function(){var e=new H,t=Object(d.a)(Object(d.a)(a));e.user(function(e){console.log(e.role),"admin"==e.role?t.setState({currentView:$t}):En("error","Auth Fail","You are not allow to visit Cluster Manager")})},a.switchToTeam=function(){a.setState({currentView:Xt})},a.switchToConsole=function(){a.setState({currentView:Yt})},a.switchToDemo=function(){a.setState({currentView:Zt})},a.switchToCnDoc=function(){window.open("http://docs.mlsql.tech/zh/","_blank")},a.menuRef=r.a.createRef(),a.registerOrLoginRef=r.a.createRef(),a.state={currentView:Yt},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement(p.a.Group,{align:h.a.LEFT},r.a.createElement(p.a.Heading,null,"MLSQL Web Console"),r.a.createElement(p.a.Divider,null),r.a.createElement(f.a,{className:"bp3-minimal",icon:"home",text:"Console",onClick:this.switchToConsole}),r.a.createElement(f.a,{className:"bp3-minimal",icon:"document",text:"Demo Center",onClick:this.switchToDemo}),r.a.createElement(f.a,{className:"bp3-minimal",icon:"document",text:"Team",onClick:this.switchToTeam}),r.a.createElement(f.a,{className:"bp3-minimal",icon:"document",text:"Cluster",onClick:this.switchToCluster}),r.a.createElement(f.a,{className:"bp3-minimal",icon:"document",text:"\u4e2d\u6587\u6587\u6863",onClick:this.switchToCnDoc})),r.a.createElement(p.a.Group,{align:h.a.RIGHT},r.a.createElement(fn,{ref:this.menuRef,parent:this}))),r.a.createElement(gn,{ref:this.registerOrLoginRef,parent:this,loginType:pn}),r.a.createElement("div",{style:{bottom:"100px",textAlign:"center",width:"100%"}},"MLSQL Licensed under the Apache License, Version 2.0. @",r.a.createElement("a",{className:"copyright",href:"http://www.miitbeian.gov.cn/"},"\u6d59ICP\u590718052520\u53f7"),r.a.createElement("div",null,"@",r.a.createElement("a",{target:"_blank",href:"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010802009683"},r.a.createElement("img",{src:""}),"\u6d59\u516c\u7f51\u5b89\u5907 33010802009683\u53f7"))))}}]),t}(n.Component);o.a.render(r.a.createElement(vn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[477,2,1]]]);
//# sourceMappingURL=main.6529c482.chunk.js.map