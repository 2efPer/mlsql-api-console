(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{113:function(e,t,a){},114:function(e,t,a){},307:function(e,t,a){},473:function(e,t,a){e.exports=a(939)},478:function(e,t,a){},482:function(e,t,a){},484:function(e,t,a){},486:function(e,t,a){},498:function(e,t,a){},582:function(e,t,a){},939:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(15),o=a.n(l);a(478),a(482),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=a(6),i=a(9),s=a(12),u=a(10),m=a(13),d=(a(484),a(384)),p=a(93),h=a(387),f=a(945),b=a(4),g=a(305),E=a(306),v=(a(486),{GET:"get",POST:"post",PUT:"put"}),y={Success:200,BadRequest:400,Unauthorized:401,Forbidden:404,ServerError:500},O={name:"access-token"},S=a(268),j=function e(t){Object(c.a)(this,e),this.value=t},T=function e(t,a,n){var r=this;Object(c.a)(this,e),this.json=function(e,t){r.content.then(function(a){try{var n=JSON.parse(a);e(n)}catch(r){t(a)}})},this.status=t,this.content=a,this.accessToken=n},k=function(){function e(t){Object(c.a)(this,e),this.url=t}return Object(i.a)(e,[{key:"request2",value:function(e,t,a){this.request(v.POST,e,function(e){e.json(function(e){t(e)},function(e){a(e)})},function(e){try{e.value().content(function(e){a(e)})}catch(t){a(e?e.toString():"result is null")}})}},{key:"runScript",value:function(e,t,a,n){var r=new z,l=S(),o=this;r.user(function(r){var c=r.userName,i=r.backendTags;if(i){var s={sql:t,owner:c,jobName:l,sessionPerUser:!0,show_stack:!0,skipAuth:!1,tags:i||""};Object.assign(s,e),(e.background||!1)&&Object.assign(s,{async:!0,callback:""}),o.request(v.POST,s,function(e){if(200===e.status)e.json(function(e){a(e)},function(e){n(e)});else try{e.content.then(function(e){n(e)})}catch(t){n("backend status:"+e.status)}},function(e){try{e.value().content(function(e){n(e)})}catch(t){n(e?e.toString():"result is null")}})}else n("\n                \n                ---------------Warning--------------------\n                \n                Please make sure you have backend configured. \n                If not, please contact admin;\n                \n                ------------------------------------------\n                ")})}},{key:"request",value:function(e,t,a,n){e=e.toUpperCase();var r=[];for(var l in t){var o=encodeURIComponent(l),c=encodeURIComponent(t[l]);r.push(o+"="+c)}var i=this.url;return"GET"===e?(i=i+"?"+r,r=void 0):r=r.join("&"),fetch(i,{method:e,timeout:864e5,headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json","Access-Token":sessionStorage.getItem(O.name)||""},body:r}).then(function(e){a(new T(e.status,e.text(),e.headers.get(O.name)))}).catch(function(e){n(new j(e))})}}]),e}(),w="/api_v1/user/tags/update",C="/api_v1/script_file",N="/api_v1/script_file/remove",D="/api_v1/script_file/get",R="/api_v1/run/script",x="/api_v1/file/upload",M="/api_v1/team/create",I="/api_v1/team/name/check",_="/api_v1/team",P="/api_v1/team/invited",L="/api_v1/team/member/add",A="/api_v1/team/member/accept",B="/api_v1/team/member/refuse",q="/api_v1/team/role/add",V="/api_v1/team/table/add",F="/api_v1/role/table/add",U="/api_v1/role/member/add",G=a(413),z=function(){function e(){Object(c.a)(this,e)}return Object(i.a)(e,[{key:"isLogin",value:function(){return null!==sessionStorage.getItem(O.name)}},{key:"userName",value:function(e){new k("/api_v1/user/userName").request(v.GET,{},function(t){t.status===y.Unauthorized?sessionStorage.removeItem(O.name):t.content.then(function(t){e(JSON.parse(t).userName)}).catch(function(e){})},function(e){console.log(e)})}},{key:"user",value:function(e){new k("/api_v1/user/userName").request2({},function(t){e(t)},function(e){})}},{key:"login",value:function(e,t,a,n){this.registerOrLogin("/api_v1/user/login",e,t,a,n)}},{key:"logout",value:function(){sessionStorage.removeItem(O.name)}},{key:"register",value:function(e,t,a,n){this.registerOrLogin("/api_v1/user/register",e,t,a,n)}},{key:"registerOrLogin",value:function(e,t,a,n,r){var l={userName:t,password:a};new k(e).request(v.POST,l,function(e){e.accessToken&&(sessionStorage.setItem(O.name,e.accessToken),(new G.a).set(O.name,e.accessToken,{path:"/"}));n(e)},function(e){r(e)})}}]),e}(),H=(a(140),a(270),a(77)),Q=a.n(H),J=(a(497),a(274),a(275),a(498),a(276),a(386)),W=a(949),K=function(e,t){if(!e){if(t=t||"Assertion failed","undefined"!==typeof Error)throw new Error(t);throw t}},$=a(948),Y=a(940),X=a(551),Z=a(556),ee=a(952),te=a(185),ae=a.n(te),ne=a(950),re=a(385),le=ne.a.Group,oe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).etPopLoad=e.parent,a.state={},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.createElement("div",null,n.createElement("span",null,"parameters:"),n.createElement(le,{compact:!0},this.state.dataForRender))}}]),t}(n.Component),ce=ne.a.Group,ie=re.a.Option,se=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).params=function(e){a.data.params[e.target.getAttribute("name")]=e.target.value},a.sourceType=function(e,t){a.data.sourceTypeV=e;var r=Object(b.a)(Object(b.a)(a));new k(R).runScript({},"load _mlsql_.`datasources/params/".concat(e,"` as output;"),function(e){var t=[];e.forEach(function(e){t.push(n.createElement(X.a,{key:e.param},n.createElement(Z.a,null,n.createElement(ne.a,{style:{marginBottom:"10px"},name:e.param,onChange:r.params,type:"text",addonBefore:e.param,placeholder:e.description}))))}),r.loadParamsRef.current.setState({dataForRender:t})},function(e){})},a.path=function(e){a.data.pathV=e.target.value},a.tableName=function(e){a.data.tableNameV=e.target.value},a.makeMLSQL=function(){var e=Object(b.a)(Object(b.a)(a)),t=[];for(var n in a.data.params){var r=a.data.params[n],l='"'+r+'"';"code"!==n&&"fitParam.[group].code"!==n||(l="'''"+r+"'''"),t.push(n.replace(/\[group\]/g,"0")+"="+l)}var o="";return t.length>0&&(o="where"),"load ".concat(e.data.sourceTypeV,".`").concat(e.data.pathV,"` ").concat(o," ").concat(t.join("and\\n ")," as ").concat(e.data.tableNameV,";")},a.etpop=e.parent,a.data={params:{}},a.state={datasourcesRender:[]},a.loadParamsRef=n.createRef(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;new k(R).runScript({},"load _mlsql_.`datasources` as output;",function(t){var a=[];t.forEach(function(e){a.push(n.createElement(ie,{key:e.name,value:e.name},e.name))}),e.setState({datasourcesRender:a})},function(e){})}},{key:"render",value:function(){return n.createElement("div",null,n.createElement(ce,{compact:!0},n.createElement(X.a,null,n.createElement(Z.a,null,"soureType:",n.createElement(re.a,{onChange:this.sourceType,showSearch:!0,style:{width:200},placeholder:"Choose DataSource type",optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.datasourcesRender)))),n.createElement("br",null),n.createElement(ce,{compact:!0},n.createElement(X.a,null,n.createElement(Z.a,null,n.createElement(ne.a,{onChange:this.path,type:"text",label:"Path",addonBefore:"Path",placeholder:"File path or tableName"})))),n.createElement("br",null),n.createElement(ce,{compact:!0},n.createElement(X.a,null,n.createElement(Z.a,null,n.createElement(ne.a,{type:"text",onChange:this.tableName,label:"tableName",addonBefore:"tableName",placeholder:"tableName"})))),n.createElement("br",null),n.createElement(oe,{parent:this,ref:this.loadParamsRef}))}}]),t}(n.Component),ue=ne.a.Group,me=(re.a.Option,ne.a.TextArea),de=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).renderParam=function(e){return"keepVersion"===e.param&&"evaluateTable"===e.param?null:"code"===e.param||"fitParam.[group].code"===e.param?n.createElement(X.a,null,n.createElement(Z.a,null,e.param,":",n.createElement(me,{style:{marginBottom:"10px"},name:e.param,onChange:a.params,type:"text",rows:10}))):n.createElement(X.a,null,n.createElement(Z.a,null,n.createElement(ne.a,{style:{marginBottom:"10px"},name:e.param,onChange:a.params,type:"text",addonBefore:e.param,placeholder:e.description})))},a.params=function(e){a.data.params[e.target.getAttribute("name")]=e.target.value},a.path=function(e){a.data.pathV=e.target.value},a.tableName=function(e){a.data.tableNameV=e.target.value},a.makeMLSQL=function(){Object(b.a)(Object(b.a)(a));var e=[];for(var t in a.data.params){var n=a.data.params[t];e.push(t.replace(/\[group\]/g,"0")+'="'+n+'"')}return 0==e.length&&e.push('keepVersion="true"'),"train ".concat(a.data.tableNameV," as ").concat(a.name,".`").concat(a.data.pathV,"` where \n").concat(e.join(" and\n "),";")},a.etpop=e.parent,a.name=e.name,a.data={params:{}},a.state={dataForRender:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this;new k(R).runScript({},"load modelParams.`".concat(t.name,"` as output;"),function(a){var r=[];a.forEach(function(t){var a=e.renderParam(t);null!==a&&(r.push(a),r.push(n.createElement("br",null)))}),t.setState({dataForRender:r})},function(e){})}},{key:"render",value:function(){return n.createElement("div",null,n.createElement("span",null,"Training data and model path:"),n.createElement(ue,{compact:!0},n.createElement(X.a,null,n.createElement(Z.a,null,n.createElement(ne.a,{type:"text",onChange:this.tableName,size:"large",addonBefore:"tableName",placeholder:"the table of training data"})))),n.createElement("br",null),n.createElement(ue,{compact:!0},n.createElement(X.a,null,n.createElement(Z.a,null,n.createElement(ne.a,{onChange:this.path,type:"text",size:"large",addonBefore:"Model save path",placeholder:"the location you save you model"})))),n.createElement("br",null),n.createElement("span",null,"Algorithm parameters:"),n.createElement(ue,{compact:!0},this.state.dataForRender))}}]),t}(n.Component),pe=ne.a.Group,he=re.a.Option,fe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).sourceType=function(e,t){a.data.sourceTypeV=e},a.saveMode=function(e,t){a.data.saveModeV=e},a.path=function(e){a.data.pathV=e.target.value},a.tableName=function(e){a.data.tableNameV=e.target.value},a.partitionBy=function(e){a.data.partitionByV=e.target.value},a.fileNum=function(e){a.data.fileNumV=e.target.value},a.makeMLSQL=function(){var e=Object(b.a)(Object(b.a)(a)),t="";a.data.partitionByV&&(t="partitionBy "+a.data.partitionByV);var n='key="value"';return a.data.fileNumV&&(n='fileNum="'.concat(a.data.fileNumV,'"')),"save ".concat(e.data.saveModeV," ").concat(e.data.tableNameV," as ").concat(e.data.sourceTypeV,".`").concat(e.data.pathV,"` \n where ").concat(n," ").concat(t,";")},a.etpop=e.parent,a.data={},a.state={datasourcesRender:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;new k(R).runScript({},"load _mlsql_.`datasources` as output;",function(t){var a=[];t.forEach(function(e){a.push(n.createElement(he,{key:e.name,value:e.name},e.name))}),e.setState({datasourcesRender:a})},function(e){})}},{key:"render",value:function(){return n.createElement("div",null,n.createElement(pe,{compact:!0},n.createElement(X.a,null,n.createElement(Z.a,null,"soureType:",n.createElement(re.a,{onChange:this.sourceType,showSearch:!0,style:{width:200},placeholder:"Choose DataSource type",optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.datasourcesRender)))),n.createElement("br",null),n.createElement(pe,{compact:!0},n.createElement(X.a,null,n.createElement(Z.a,null,"SaveMode:",n.createElement(re.a,{onChange:this.saveMode,showSearch:!0,style:{width:200},placeholder:"Choose save mode type",optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},n.createElement(he,{key:"overwrite",value:"overwrite"},"overwrite"),n.createElement(he,{key:"append",value:"append"},"append"),n.createElement(he,{key:"errorIfExists",value:"errorIfExists"},"errorIfExists"),n.createElement(he,{key:"ignore",value:"ignore"},"ignore"))))),n.createElement("br",null),n.createElement(pe,{compact:!0},n.createElement(X.a,null,n.createElement(Z.a,null,n.createElement(ne.a,{type:"text",onChange:this.tableName,label:"tableName",addonBefore:"tableName",placeholder:"the tableName will be saved"})))),n.createElement("br",null),n.createElement(pe,{compact:!0},n.createElement(X.a,null,n.createElement(Z.a,null,n.createElement(ne.a,{onChange:this.path,type:"text",addonBefore:"Target Path",placeholder:"File path or tableName"})))),n.createElement("br",null),n.createElement(pe,{compact:!0},n.createElement(X.a,null,n.createElement(Z.a,null,n.createElement(ne.a,{type:"text",onChange:this.partitionBy,addonBefore:"partitionBy",placeholder:"partitionBy"})))),n.createElement("br",null),n.createElement(pe,{compact:!0},n.createElement(X.a,null,n.createElement(Z.a,null,n.createElement(ne.a,{type:"text",onChange:this.fileNum,addonBefore:"fileNum",placeholder:"fileNum"})))),n.createElement("br",null))}}]),t}(n.Component),be=a(101),ge=ne.a.Group,Ee=(re.a.Option,ne.a.TextArea),ve=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).renderParam=function(e){return"keepVersion"===e.param||"evaluateTable"===e.param?null:"code"===e.param||"fitParam.[group].code"===e.param?n.createElement(X.a,null,n.createElement(Z.a,null,e.param,":",n.createElement(Ee,{style:{marginBottom:"10px"},name:e.param,onChange:a.params,type:"text",rows:10}))):n.createElement(X.a,{key:e.param},n.createElement(Z.a,null,n.createElement(ne.a,{style:{marginBottom:"10px"},name:e.param,onChange:a.params,type:"text",addonBefore:e.param,placeholder:e.description})))},a.params=function(e){a.data.params[e.target.getAttribute("name")]=e.target.value},a.path=function(e){a.data.pathV=e.target.value},a.tableName=function(e){a.data.tableNameV=e.target.value},a.outputTableName=function(e){a.data.outputTableNameV=e.target.value},a.showTableName=function(){return"true"!==a.state.tableHidden?n.createElement(ge,{compact:!0},n.createElement(X.a,null,n.createElement(Z.a,null,n.createElement(ne.a,{type:"text",onChange:a.tableName,size:"large",addonBefore:a.state.tableAlias?a.state.tableAlias:"Input table",placeholder:""})))):null},a.showOutputTableName=function(){return"true"!==a.state.outputTableHidden?n.createElement(ge,{compact:!0},n.createElement(X.a,null,n.createElement(Z.a,null,n.createElement(ne.a,{type:"text",onChange:a.outputTableName,size:"large",addonBefore:a.state.outputTableAlias?a.state.outputTableAlias:"Output table",placeholder:""})))):null},a.pathNameForRender=function(){return a.state.pathAlias?a.state.pathAlias:"Save path"},a.showPathName=function(){return"true"!==a.state.pathHidden?n.createElement(ge,{compact:!0},n.createElement(X.a,null,n.createElement(Z.a,null,n.createElement(ne.a,{onChange:a.path,type:"text",size:"large",addonBefore:a.pathNameForRender(),placeholder:""})))):""},a.etpop=e.parent,a.name=e.name,a.data={params:{}},a.state={dataForRender:[],tableHidden:e.tableHidden,pathAlias:e.pathAlias,pathHidden:e.pathHidden,outputTableHidden:e.outputTableHidden,outputTableAlias:e.outputTableAlias,tableAlias:e.tableAlias},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this;new k(R).runScript({},"load modelParams.`".concat(t.name,"` as output;"),function(a){var r=[];a.forEach(function(t){var a=e.renderParam(t);null!==a&&(r.push(a),r.push(n.createElement("br",null)))}),t.setState({dataForRender:r})},function(e){})}},{key:"_makeMLSQL",value:function(){var e=[];for(var t in this.data.params){var a=this.data.params[t],n='"'+a+'"';"code"!==t&&"fitParam.[group].code"!==t||(n="'''"+a+"'''"),e.push(t.replace(/\[group\]/g,"0")+"="+n)}var r="";e.length>0&&(r="where");var l="";return this.data.outputTableNameV&&(l="as ".concat(this.data.outputTableNameV)),"run ".concat(this.data.tableNameV||"command"," as ").concat(this.name,".`").concat(this.data.pathV||"","` ").concat(r," ").concat(e.join("and\n ")," ").concat(l,";")}},{key:"_render",value:function(){return n.createElement("div",null,this.showTableName(),n.createElement("br",null),this.showOutputTableName(),n.createElement("br",null),this.showPathName(),n.createElement("br",null),0==this.state.dataForRender.length?"":n.createElement("span",null,"Parameters:"),n.createElement(ge,{compact:!0},this.state.dataForRender))}}]),t}(n.Component),ye=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).makeMLSQL=function(){return Object(be.a)(Object(u.a)(t.prototype),"_makeMLSQL",Object(b.a)(a)).call(Object(b.a)(a))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return Object(be.a)(Object(u.a)(t.prototype),"_render",this).call(this)}}]),t}(ve),Oe=ne.a.Group,Se=(re.a.Option,function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).makeMLSQL=function(){Object(b.a)(Object(b.a)(a));var e=[];for(var t in a.data.params){var n=a.data.params[t];e.push(t.replace(/\[group\]/g,"0")+'="'+n+'"')}return 0==e.length&&e.push('keepVersion="true"'),"run command as ".concat(a.name,".`` where \n").concat(e.join(" and\n "),";")},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.createElement("div",null,n.createElement(Oe,{compact:!0},this.state.dataForRender))}}]),t}(ye)),je=(a(558),a(559),a(560),a(390)),Te=a.n(je),ke=re.a.Option,we=ne.a.TextArea,Ce=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).udfName=function(e){a.data.udfNameV=e.target.value},a.dataType=function(e){a.data.dataTypeV=e.target.value},a.udfType=function(e){a.udfTypeV=e},a.code=function(e){a.codeV=e},a.langSelect=function(e){a.lang=e,a.codeCheckRef.current.checked=!1,a.setState({dataType:!1}),"python"===a.lang&&a.setState({dataType:!0}),a.setState({codeLang:e})},a.setCodeExample=function(e){e?a.codeRef.current.editor.setValue(a.codeExample()):a.codeRef.current.editor.setValue("")},a.codeExample=function(){var e=a.state.codeLang||"scala";return"scala"===e?"def apply(a:Double,b:Double)={\n   a + b\n}":"python"===e?"def apply(self,m):\n    return m":"java"===e?"import java.util.HashMap;\nimport java.util.Map;\npublic class UDF {\n  public Map<String, Integer[]> apply(String s) {\n    Map<String, Integer[]> m = new HashMap<>();\n    Integer[] arr = {1};\n    m.put(s, arr);\n    return m;\n  }\n}":null},a.showDataType=function(){return a.state.dataType?n.createElement(X.a,null,n.createElement(Z.a,null,"dataType:",n.createElement(we,{style:{marginBottom:"10px"},name:"dataType",rows:10,onChange:a.dataType,type:"text",addonBefore:"dataType",placeholder:"This is not required when lang is scala\nAs we know python is not strongly typed language, so\nwe should manually spcify the return type.\nmap(string,string) means a map with key is string type,value also is string type.\narray(string) means a array with string type element.\nnested is support e.g. array(array(map(string,array(string))))\n\n"}))):null},a.showCode=function(){return n.createElement("div",null,n.createElement(X.a,null,n.createElement(Z.a,null,"code:",n.createElement(Q.a,{ref:a.codeRef,mode:a.state.codeLang||"scala",theme:"github",width:"400px",height:"300px",name:"code",fontSize:16,showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0,onChange:a.code,editorProps:{$blockScrolling:1/0},setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!1,showLineNumbers:!0,tabSize:2}}))),n.createElement(X.a,null,n.createElement(Z.a,null,n.createElement(Z.a,{span:8},"Show CodeExample:",n.createElement(Te.a,{ref:a.codeCheckRef,onChange:a.setCodeExample})))))},a.makeMLSQL=function(){Object(b.a)(Object(b.a)(a));var e=[];return e.push('lang="'.concat(a.lang,'"')),e.push("code='''".concat(a.codeV,"'''")),e.push('udfType="'.concat(a.udfTypeV,'"')),a.dataTypeV&&e.push("dataType='''".concat(a.dataTypeV,"'''")),"register ScriptUDF.`` as ".concat(a.data.udfNameV," where \n").concat(e.join("\nand "),";")},a.etpop=e.parent,a.name=e.name,a.data={params:{}},a.state={dataForRender:[]},a.codeRef=n.createRef(),a.codeCheckRef=n.createRef(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return n.createElement("div",null,n.createElement(X.a,null,n.createElement(Z.a,null,n.createElement(ne.a,{onChange:this.udfName,type:"text",size:"large",addonBefore:"UDF Name",placeholder:"the name of udf"}))),n.createElement("br",null),n.createElement(X.a,null,n.createElement(Z.a,{span:4},n.createElement("span",null,"udfType:")),n.createElement(Z.a,{span:20},n.createElement(re.a,{showSearch:!0,onChange:this.udfType,style:{width:200},placeholder:"Select udf type",optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},n.createElement(ke,{value:"udf"},"udf"),n.createElement(ke,{value:"udaf"},"udaf")))),n.createElement("br",null),n.createElement(X.a,null,n.createElement(Z.a,{span:4},n.createElement("span",null,"Lang:")),n.createElement(Z.a,{span:20},n.createElement(re.a,{showSearch:!0,style:{width:200},placeholder:"Select language type",optionFilterProp:"children",onChange:this.langSelect,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},n.createElement(ke,{value:"java"},"java"),n.createElement(ke,{value:"scala"},"scala"),n.createElement(ke,{value:"python"},"python")))),n.createElement("br",null),this.showDataType(),n.createElement("br",null),this.showCode(),n.createElement("br",null),n.createElement(X.a,null,n.createElement(Z.a,null,n.createElement(ne.a,{style:{marginBottom:"10px"},name:"methodName",onChange:this.params,type:"text",addonBefore:"methodName",placeholder:"methodName"}))))}}]),t}(n.Component),Ne=(ne.a.Group,re.a.Option),De=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).etName=function(e){a.etName=e},a.makeMLSQL=function(){return"load modelExample.`".concat(a.etName,"` as output;")},a.etpop=e.parent,a.name=e.name,a.data={params:{}},a.state={dataForRender:[],tableHidden:e.tableHidden,pathAlias:e.pathAlias,pathHidden:e.pathHidden},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;new k(R).runScript({},"load model.`list` as output;",function(t){var a=[];t.forEach(function(e){a.push(n.createElement(Ne,{key:e.name,value:e.name},e.name))}),e.setState({dataForRender:a})},function(e){})}},{key:"render",value:function(){return n.createElement("div",null,n.createElement(X.a,null,n.createElement(Z.a,null,"ET:",n.createElement(re.a,{onChange:this.etName,showSearch:!0,style:{width:200},placeholder:"Choose DataSource type",optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.dataForRender))))}}]),t}(n.Component),Re=(ne.a.Group,re.a.Option),xe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).makeMLSQL=function(){var e=Object(b.a)(Object(b.a)(a));return"register ".concat(e.data.sourceTypeV,".`").concat(e.data.pathV,"` as ").concat(e.data.outputTableNameV,";")},a.etName=function(e){a.data.sourceTypeV=e},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;new k(R).runScript({},"load model.`list` as output;",function(t){var a=[];t.forEach(function(e){a.push(n.createElement(Re,{key:e.name,value:e.name},e.name))}),e.setState({dataForRender:a})},function(e){})}},{key:"render",value:function(){return n.createElement("div",null,this.showTableName(),n.createElement("br",null),this.showOutputTableName(),n.createElement("br",null),this.showPathName(),n.createElement("br",null),n.createElement(X.a,null,n.createElement(Z.a,null,"ET:",n.createElement(re.a,{onChange:this.etName,showSearch:!0,style:{width:200},placeholder:"Choose DataSource type",optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.dataForRender))))}}]),t}(ye),Me=ne.a.Group,Ie=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).makeMLSQL=function(){var e="";a.data.outputTableNameV&&(e="as ".concat(a.data.outputTableNameV));var n=Object(be.a)(Object(u.a)(t.prototype),"_makeMLSQL",Object(b.a)(a)).call(Object(b.a)(a)).replace(e,""),r="predict ".concat(a.data.tableNameV," as ").concat(a.name,".`").concat(a.data.pathV||"","` ").concat(e,";");return"".concat(n,"\n        ").concat(r,"\n        register ").concat(a.name,".`").concat(a.data.pathV||"","` as ").concat(a.data.functionNameV,"; \n        ").stripMargin()},a.functionName=function(e){a.data.functionNameV=e.target.value},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.createElement("div",null,this.showTableName(),n.createElement("br",null),this.showOutputTableName(),n.createElement("br",null),this.showPathName(),n.createElement("br",null),n.createElement(Me,{compact:!0},n.createElement(X.a,null,n.createElement(Z.a,null,n.createElement(ne.a,{onChange:this.functionName,type:"text",size:"large",addonBefore:"functionName",placeholder:"A function you can use to convert String to number or number to String"})))),n.createElement("br",null),0==this.state.dataForRender.length?"":n.createElement("span",null,"Parameters:"),n.createElement(Me,{compact:!0},this.state.dataForRender))}}]),t}(ve),_e=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).makeMLSQL=function(){var e="/api_v1/public/file/download?fileName=".concat(encodeURIComponent(a.data.pathV)),t=document.createElement("a");return t.href=e,t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t),""},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(be.a)(Object(u.a)(t.prototype),"_render",this).call(this)}}]),t}(ve),Pe=(ne.a.Group,re.a.Option),Le=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).etName=function(e){a.etName=e},a.makeMLSQL=function(){return"load _mlsql_.`progress/".concat(a.etName,"` as output;")},a.etpop=e.parent,a.name=e.name,a.data={params:{}},a.state={dataForRender:[],tableHidden:e.tableHidden,pathAlias:e.pathAlias,pathHidden:e.pathHidden},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;new k(R).runScript({},"load _mlsql_.`jobs` as output;",function(t){var a=t.filter(function(e){return"stream"===e.jobType}).map(function(e){return n.createElement(Pe,{key:e.jobName,value:e.jobName},e.jobName)});e.setState({dataForRender:a})},function(e){})}},{key:"render",value:function(){return n.createElement("div",null,n.createElement(X.a,null,n.createElement(Z.a,null,"Stream Jobs:",n.createElement(re.a,{onChange:this.etName,showSearch:!0,style:{width:200},placeholder:"Choose Stream Name",optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.dataForRender))))}}]),t}(n.Component),Ae=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).disableEtModalVisible=function(){a.et.setState({etPop:!1,etModalVisible:!1})},a.enableEtModalVisible=function(){var e=a.popChild.current.makeMLSQL();a.et.makeMLSQL(e),a.et.setState({etPop:!1,etModalVisible:!1})},a.renderContent=function(){return"load"===a.et.state.eventName?n.createElement(se,{parent:Object(b.a)(Object(b.a)(a)),ref:a.popChild}):"save"===a.et.state.eventName?n.createElement(fe,{name:a.et.state.eventName,ref:a.popChild}):"DownloadExt"===a.et.state.eventName?n.createElement(Se,{name:a.et.state.eventName,ref:a.popChild}):"StringIndex"===a.et.state.eventName?n.createElement(Ie,{name:a.et.state.eventName,ref:a.popChild}):"DownloadFile"===a.et.state.eventName?n.createElement(_e,Object.assign({name:a.et.state.eventName,ref:a.popChild},a.et.state)):"ETExample"===a.et.state.eventName?n.createElement(De,{name:a.et.state.eventName,ref:a.popChild}):"ETStreamProgress"===a.et.state.eventName?n.createElement(Le,{name:a.et.state.eventName,ref:a.popChild}):"ScriptUDF"===a.et.state.eventName?n.createElement(Ce,{name:a.et.state.eventName,ref:a.popChild}):"register"===a.et.state.eventName?n.createElement(xe,Object.assign({name:a.et.state.eventName,ref:a.popChild},a.et.state)):"tool"===a.et.state.processType?n.createElement(ye,Object.assign({name:a.et.state.eventName,ref:a.popChild},a.et.state)):n.createElement(de,{name:a.et.state.eventName,ref:a.popChild})},a.et=e.parent,a.popChild=n.createRef(),a.state={etModalVisible:!0,title:e.title},a.data={},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.createElement("div",null,n.createElement(ae.a,{title:this.state.title,visible:this.state.etModalVisible,onCancel:this.disableEtModalVisible,onOk:this.enableEtModalVisible,okText:"Ok",cancelText:"Cancel"},this.renderContent()))}}]),t}(n.Component),Be=a(27),qe=a.n(Be),Ve=$.a.Panel,Fe=(Y.a.TabPane,function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).onDragStart=function(e){var t=e.target.getAttribute("processtype");e.dataTransfer.setData("eventName",e.target.getAttribute("name")),e.dataTransfer.setData("popName",e.target.getAttribute("help")),e.dataTransfer.setData("processType",t),e.dataTransfer.setData("pathAlias",e.target.getAttribute("pathalias")||""),e.dataTransfer.setData("outputTableAlias",e.target.getAttribute("outputtablealias")||""),e.dataTransfer.setData("tableAlias",e.target.getAttribute("tablealias")||""),e.dataTransfer.setData("tableHidden",e.target.getAttribute("tablehidden")||!1),e.dataTransfer.setData("pathHidden",e.target.getAttribute("pathhidden")||!1),e.dataTransfer.setData("outputTableHidden",e.target.getAttribute("outputtablehidden")||!1)},a.makeMLSQL=function(e){a.queryApp.appendToEditor(e)},a.renderPop=function(){return a.state.etPop?n.createElement(Ae,{parent:Object(b.a)(Object(b.a)(a)),title:a.state.popName}):null},a.queryApp=e.parent,a.state={},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return n.createElement("div",null,n.createElement($.a,{style:{margin:"0px 0px",padding:"0px 0px"}},n.createElement(Ve,{header:"Quick Menu",key:"1"},n.createElement(X.a,{gutter:16},n.createElement(Z.a,{span:8},n.createElement(ee.a,{title:"Load/Save Data"},n.createElement(qe.a,{tyle:{marginBottom:"10px"},title:"Load/Save Data",onDragStart:this.onDragStart,name:"load",help:"Load file/db as table",draggable:!0,color:"magenta"},"Load data"),n.createElement(qe.a,{tyle:{marginBottom:"10px"},title:"Save Data",onDragStart:this.onDragStart,name:"save",help:"Save table into file/db ",draggable:!0,color:"magenta"},"Save data"))),n.createElement(Z.a,{span:8},n.createElement(ee.a,{title:"Algorithms"},n.createElement(qe.a,{tyle:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"TfIdfInPlace",help:"Use TfIdfInPlace vectorize text",draggable:!0,color:"magenta"},"TfIdf"),n.createElement(qe.a,{tyle:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"Word2VecInPlace",help:"Use Word2VecInPlace vectorize text",draggable:!0,color:"magenta"},"Word2vec"),n.createElement(qe.a,{tyle:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"RandomForest",help:"Use RandomForest to train a model",draggable:!0,color:"magenta"},"RandomForest"),n.createElement(qe.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"PythonAlg",help:"Run python lib to train",draggable:!0,color:"magenta"},"Python Algorithm"),n.createElement(qe.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"BigDLClassifyExt",help:"Use BigDL to develop deep learning algorithm",draggable:!0,color:"magenta"},"Deep Learning"),n.createElement(qe.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"NaiveBayes",help:"Use NaiveBayes",draggable:!0,color:"magenta"},"NaiveBayes"))),n.createElement(Z.a,{span:8},n.createElement(ee.a,{title:"Python"},n.createElement(qe.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"PythonEnvExt",processtype:"tool",help:"Create Python Env",pathalias:"Temp directory",tablehidden:"true",pathhidden:"false",outputtablehidden:"true",draggable:!0,color:"magenta"},"Create Python Env"),n.createElement(qe.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"PythonParallelExt",processtype:"tool",help:"Run python project",pathalias:"Temp directory",tablehidden:"true",pathhidden:"false",outputtablehidden:"true",draggable:!0,color:"magenta"},"Run python project")))),n.createElement("br",null),n.createElement(X.a,{gutter:16},n.createElement(Z.a,{span:8},n.createElement(ee.a,{title:"Register model as Function"},n.createElement(qe.a,{onDragStart:this.onDragStart,name:"ScriptUDF",processtype:"tool",help:"Use ScriptUDF create udf",draggable:!0,color:"magenta"},"Create UDF"),n.createElement(qe.a,{onDragStart:this.onDragStart,name:"register",help:"Register model to function ",pathalias:"Model saved path",outputtablealias:"Function name",tablealias:"Function name",tablehidden:"true",pathhidden:"false",outputtablehidden:"false",draggable:!0,color:"magenta"},"Register Model As Function"))),n.createElement(Z.a,{span:8},n.createElement(ee.a,{title:"Jobs"},n.createElement(qe.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"JobList",processtype:"direct",draggable:!0,color:"magenta"},"Show jobs"),n.createElement(qe.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"Kill",processtype:"tool",pathalias:"groupId or jobName",tablehidden:"true",help:"Kill your job",draggable:!0,color:"magenta"},"Kill job"),n.createElement(qe.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"ETStreamProgress",processtype:"",help:"Show Progress of Stream",draggable:!0,color:"magenta"},"Show Stream Job Progress"))),n.createElement(Z.a,{span:8},n.createElement(ee.a,{title:"Tools"},n.createElement(qe.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"DownloadExt",processtype:"tool",help:"Use DownloadExt to download files you have uploaded",draggable:!0,color:"magenta"},"Download uploaded file"),n.createElement(qe.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"ImageLoaderExt",processtype:"tool",help:"Use ImageLoaderExt to load images",pathalias:"",tablehidden:"true",pathhidden:"true",outputtablehidden:"false",draggable:!0,color:"magenta"},"Load images"),n.createElement(qe.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"ConnectMySQL",processtype:"direct",help:"",draggable:!0,color:"magenta"},"Connect MySQL"),n.createElement(qe.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"JDBC",processtype:"tool",pathalias:"DB name in connect",tablehidden:"false",help:"Run DLL on MySQL",draggable:!0,color:"magenta"},"MySQL DDL"),n.createElement(qe.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"TreeBuildExt",processtype:"tool",pathalias:"",tablehidden:"false",pathhidden:"true",help:"Build tree from parent-child",draggable:!0,color:"magenta"},"Parent-Child"),n.createElement(qe.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"ETExample",processtype:"",help:"Show Example of ET",draggable:!0,color:"magenta"},"Show ET Example"),n.createElement(qe.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"RepartitionExt",processtype:"tool",help:"Change Table Partition Num",pathalias:"",tablehidden:"false",pathhidden:"true",outputtablehidden:"false",draggable:!0,color:"magenta"},"Repartition table"),n.createElement(qe.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"SendMessage",processtype:"tool",help:"Send email",pathalias:"",tablehidden:"false",pathhidden:"true",outputtablehidden:"true",draggable:!0,color:"magenta"},"Send Mail"),n.createElement(qe.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"CacheExt",processtype:"tool",help:"Cache table",pathalias:"",tablehidden:"false",pathhidden:"true",outputtablehidden:"true",draggable:!0,color:"magenta"},"Cache Table"),n.createElement(qe.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"StringIndex",processtype:"tool",help:"Convert String to number",pathalias:"Mapping path",tablehidden:"false",pathhidden:"false",outputtablehidden:"true",draggable:!0,color:"magenta"},"Convert String to number"),n.createElement(qe.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"DownloadFile",processtype:"tool",help:"Download File",pathalias:"Target file",tablehidden:"true",pathhidden:"false",outputtablehidden:"true",draggable:!0,color:"magenta"},"Download File to computer"),n.createElement(qe.a,{style:{marginBottom:"10px"},onDragStart:this.onDragStart,name:"ShowResource",processtype:"direct",draggable:!0,color:"magenta"},"Cluster Resource")))))),this.renderPop())}}]),t}(n.Component)),Ue=function e(){Object(c.a)(this,e),this.makeSQL=function(e){return"JobList"===e?"load _mlsql_.`jobs` as output;":"ConnectMySQL"===e?'connect jdbc where\n url="jdbc:mysql://127.0.0.1:3306/wow?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&tinyInt1isBit=false"\n and driver="com.mysql.jdbc.Driver"\n and user=""\n and password=""\n as db_1;':"ShowResource"===e?"load _mlsql_.`resource` as output;":""}},Ge=a(268),ze=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).text=function(e,t){a.setState({value:e,scriptId:t}),a.aceEditorRef.current.editor.setValue(e)},a.executeSave=function(){var e=new k(C),t=Object(b.a)(Object(b.a)(a)),n=a.getMessageBoxAceEditor();t.state.scriptId?e.request(v.POST,{id:t.state.scriptId,content:t.getAceEditor().getValue()},function(e){n.setValue("saved")},function(e){}):n.setValue("no file are opened, cannot executeSave")},a.executeQuery=function(){var e=Ge();a.enterLoading(e);var t=new k(R),n=Object(b.a)(Object(b.a)(a));n.getMessageBoxAceEditor().setValue("");var r=n.getSelection(),l=n.getAllText();""!==r&&(l=r);var o=(new Date).getTime();function c(){return n.exitLoading(),(new Date).getTime()-o}t.runScript({jobName:e,background:a.state.background||!1},l,function(e){try{n.queryApp.setData(e),n.getDisplay().update(e),n.getMessageBoxAceEditor().setValue("\nTime cost:"+c()+"ms")}catch(t){console.log(t),n.getMessageBoxAceEditor().setValue("Can not display the result. raw data:\n"+JSON.stringify(e,null,2))}n.exitLoading()},function(e){var t=e.toString();try{t=JSON.parse(t).msg}catch(a){}n.getMessageBoxAceEditor().setValue(t+"\nTime cost:"+c()+"ms"),n.exitLoading()})},a.getAllText=function(){return a.getAceEditor().getValue()},a.getSelection=function(){var e=a.getAceEditor().getSelectionRange();return a.getAceEditor().session.getTextRange(e)},a.appendToEditor=function(e){var t=a.getAceEditor(),n=t.getCursorPosition();t.session.insert(n,e),t.focus()},a.getAceEditor=function(){return a.aceEditorRef.current.editor},a.getMessageBoxAceEditor=function(){return a.queryApp.messageBox.current.editor},a.getDashBoard=function(){return a.queryApp.dash.current},a.getDisplay=function(){return a.queryApp.display.current},a.enterLoading=function(e){a.commandGroup.current.setState({loading:!0}),a.resourceProgressRef.current.enter({jobName:e}),a.taskProgressRef.current.enter({jobName:e})},a.exitLoading=function(){a.commandGroup.current.setState({loading:!1}),a.resourceProgressRef.current.exit(),a.taskProgressRef.current.exit()},a.etOver=function(e){var t=e.dataTransfer.getData("eventName"),n=e.dataTransfer.getData("popName"),r=e.dataTransfer.getData("processType"),l=e.dataTransfer.getData("pathAlias"),o=e.dataTransfer.getData("tableHidden"),c=e.dataTransfer.getData("pathHidden"),i=e.dataTransfer.getData("outputTableHidden"),s=e.dataTransfer.getData("outputTableAlias"),u=e.dataTransfer.getData("tableAlias");"direct"===r?a.appendToEditor((new Ue).makeSQL(t)):a.etRef.current.setState({etPop:!0,eventName:t,popName:n,processType:r,pathAlias:l,tableHidden:o,pathHidden:c,outputTableHidden:i,outputTableAlias:s,tableAlias:u})},a.queryApp=a.props.parent,a.aceEditorRef=n.createRef(),a.commandGroup=n.createRef(),a.resourceProgressRef=n.createRef(),a.taskProgressRef=n.createRef(),a.etRef=n.createRef(),a.state={value:"",loading:!1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"onChange",value:function(e){}},{key:"render",value:function(){return n.createElement("div",{className:"mlsql-editor-area"},n.createElement("div",null,n.createElement(Fe,{ref:this.etRef,parent:this})),n.createElement("div",{onDragOver:function(e){return e.preventDefault()},onDrop:this.etOver},n.createElement(Q.a,{ref:this.aceEditorRef,mode:"sql",theme:"github",width:"100%",height:"300px",onChange:this.onChange,name:"mlsql_editor",fontSize:16,showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0,value:"",editorProps:{$blockScrolling:1/0},setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!1,showLineNumbers:!0,tabSize:2}})),n.createElement(He,{ref:this.commandGroup,parent:this}),n.createElement(Qe,{ref:this.resourceProgressRef,parent:this}),n.createElement(Je,{ref:this.taskProgressRef,parent:this}))}}]),t}(n.Component),He=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={loading:!1},a.parent=e.parent,a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.createElement("div",{className:"mslql-editor-buttons"},n.createElement(J.a,{onClick:this.parent.executeQuery,loading:this.state.loading},"Run"),n.createElement(J.a,{onClick:this.parent.executeSave},"Save"))}}]),t}(n.Component),Qe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).enter=function(e){var t=Object(b.a)(Object(b.a)(a));a.setState({mark:!0}),setTimeout(function(){t.state.mark&&(t.setState({loading:!0}),t.intervalTimer=setInterval(function(){if("loading"!==t.resourceCompute){t.resourceCompute="loading";var a=new k(R);K(e.hasOwnProperty("jobName"),"jobName is required");var n=e.jobName;a.runScript({},"load _mlsql_.`resource/".concat(n,"` as output;"),function(e){var a=e[0];t.setState({percent:a.activeTasks/a.totalCores*100,successPercent:a.currentJobGroupActiveTasks/a.totalCores*100,title:"Resource (for all users): taken/Total: ".concat(a.activeTasks,"/").concat(a.totalCores,"(").concat(a.currentJobGroupActiveTasks," you took)")}),t.resourceCompute="loaded"},function(e){t.resourceCompute="loaded";try{t.parent.getMessageBoxAceEditor().setValue(e)}catch(a){console.log(a)}})}},3e4))},3e3)},a.exit=function(){a.setState({loading:!1,percent:0,successPercent:0,mark:!1}),a.intervalTimer&&clearInterval(a.intervalTimer)},a.state={loading:!1,percent:0,successPercent:0,mark:!1},a.parent=e.parent,a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.state.loading?n.createElement("div",null,this.state.title,n.createElement(W.a,{percent:this.state.percent,successPercent:this.state.successPercent})):n.createElement("div",null)}}]),t}(n.Component),Je=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).enter=function(e){var t=Object(b.a)(Object(b.a)(a));a.setState({mark:!0}),setTimeout(function(){t.state.mark&&(t.setState({loading:!0}),t.intervalTimer=setInterval(function(){if("loading"!==t.taskCompute){t.taskCompute="loading";var a=new k(R);K(e.hasOwnProperty("jobName"),"jobName is required");var n=e.jobName;a.runScript({},"load _mlsql_.`jobs/".concat(n,"` as output;"),function(e){t.taskCompute="loaded";var a=e[0],n={numTasks:0,numActiveTasks:0,numCompletedTasks:0};a.activeJobs.forEach(function(e){n.numTasks+=e.numTasks,n.numActiveTasks+=e.numActiveTasks,n.numCompletedTasks+=e.numCompletedTasks}),t.setState({percent:n.numActiveTasks/n.numTasks*100,successPercent:n.numCompletedTasks/n.numTasks*100,title:"Tasks (for all stages): Succeeded/Total:\n".concat(n.numCompletedTasks,"/").concat(n.numTasks,"(").concat(n.numActiveTasks," running)")})},function(e){t.taskCompute="loaded";try{t.parent.getMessageBoxAceEditor().setValue(e)}catch(a){console.log(a)}})}},3e4))},3e3)},a.exit=function(){a.taskCompute="loaded",a.resourceCompute="loaded",a.setState({loading:!1,percent:0,successPercent:0,mark:!1}),a.intervalTimer&&clearInterval(a.intervalTimer)},a.state={loading:!1,percent:0,successPercent:0,mark:!1},a.parent=e.parent,a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.state.loading?n.createElement("div",null,this.state.title,n.createElement(W.a,{percent:this.state.percent,successPercent:this.state.successPercent})):n.createElement("div",null)}}]),t}(n.Component),We=ze,Ke=a(304),$e=a(592),Ye=a(97),Xe=a(98),Ze=a(96),et=a(954),tt=a(99),at=a(100),nt=a(2),rt=a.n(nt),lt=(a(582),function e(){Object(c.a)(this,e),this.build=function(e){var t,a,n={},r=[];for(a=0;a<e.length;a+=1)n[e[a].id]=a,e[a].childNodes=[];for(a=0;a<e.length;a+=1)if(0!==(t=e[a]).parentId)try{e[n[t.parentId]].childNodes.push(t)}catch(l){console.log("------------"),console.log(t),console.log(n[t.parentId])}else r.push(t);return r}}),ot=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).reloadData=function(){var e=new k(C),t=Object(b.a)(Object(b.a)(a));e.request(v.GET,{},function(e){e.content.then(function(e){var a=[];try{a=JSON.parse(e||"[]")}catch(r){}var n=(new lt).build(a).sort(function(e,t){return e.id-t.id});t.setState({nodes:n})})},function(e){})},a.isRootNode=function(e){return a.state.nodes[0].id===e},a.onNodeContextMenu=function(e,t,r){r.preventDefault();var l=Object(b.a)(Object(b.a)(a));et.a.show(n.createElement(it,{parent:l,nodeId:e.id}),{left:r.clientX,top:r.clientY},function(){return a.setState({isContextMenuOpen:!1})}),a.setState({isContextMenuOpen:!0})},a.handNodeDoubleClick=function(e,t,n){if(e.isDir)e.isExpanded=!e.isExpanded,a.toggleIsExpanded(e.id,e.isExpanded);else{var r=new k(D),l=Object(b.a)(Object(b.a)(a));r.request(v.GET,{id:e.id},function(t){t.content.then(function(t){var a=JSON.parse(t||"{}");l.parent.editor.current.text(a.content,e.id)})},function(e){})}a.setState(a.state)},a.handleNodeClick=function(e,t,n){var r=e.isSelected;n.shiftKey||a.forEachNode(a.state.nodes,function(e){return e.isSelected=!1}),e.isSelected=null==r||!r,a.setState(a.state)},a.toggleIsExpanded=function(e,t){var n=new k(C);Object(b.a)(Object(b.a)(a));n.request(v.POST,{id:e,isExpanded:t},function(e){e.content.then(function(e){})},function(e){})},a.handleNodeCollapse=function(e){e.isExpanded=!1,a.setState(a.state)},a.handleNodeExpand=function(e){e.isExpanded=!0,a.setState(a.state)},a.state={isContextMenuOpen:!1,openCreateScriptDialog:!1},a.parent=a.props.parent,a.reloadData(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.createElement("div",null,n.createElement(Ke.a,{contents:this.state.nodes,onNodeClick:this.handleNodeClick,onNodeCollapse:this.handleNodeCollapse,onNodeExpand:this.handleNodeExpand,onNodeContextMenu:this.onNodeContextMenu,onNodeDoubleClick:this.handNodeDoubleClick,className:"mlsql-directory-tree"}),this.state.openCreateScriptDialog?n.createElement(ct,{nodeId:this.state.nodeId,parent:this,queryApp:this.parent}):"")}},{key:"forEachNode",value:function(e,t){if(null!=e){var a=!0,n=!1,r=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done);a=!0){var c=l.value;t(c),this.forEachNode(c.childNodes,t)}}catch(i){n=!0,r=i}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}}}}]),t}(n.Component),ct=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).title=function(){return a.props.parent.state.isDir?"Create Folder":"Create Script"},a.fileName=function(e){a.setState({fileName:e.target.value})},a.content=function(e){a.setState({content:e.target.value})},a.finish=function(){a.props.parent.setState({openCreateScriptDialog:!1}),a.props.parent.reloadData()},a.create=function(){var e=new k(C),t=Object(b.a)(Object(b.a)(a)),n={fileName:a.state.fileName,isDir:a.props.parent.state.isDir,content:a.state.content,parentId:a.props.nodeId};n.fileName?n.isDir||n.fileName.endsWith(".mlsql")?e.request(v.POST,n,function(e){e.status===y.Success?t.finish():e.content.then(function(e){a.setState({msg:e})})},function(e){t.setState({msg:"Server error"})}):a.setState({msg:"filename should be ends with .mlsql"}):a.setState({msg:"filename should not be empty"})},a.close=function(){var e=a.props.parent;e.setState({openCreateScriptDialog:!1}),e.reloadData()},a.state={msg:""},a.messageBox=a.props.queryApp.messageBox.current.editor,a.directoryTree=a.props.parent,a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=rt()($e.a.CARD,$e.a.ELEVATION_4,"docs-md-overlay-example-transition");return n.createElement("div",null,n.createElement(Ye.a,{className:"msql-treenode-dialog",isOpen:!0,usePortal:!0},n.createElement("div",{className:e},n.createElement(Xe.a,null,this.title()," "),n.createElement("div",{className:"msql-treenode-dialog-form"},n.createElement("p",{style:{color:"red"}},this.state.msg),n.createElement(g.a,{helperText:"The file of name you want create.",label:"fileName",labelFor:"fileName",labelInfo:"(required)"},n.createElement(E.a,{id:"fileName",placeholder:"example.mlsql",onChange:this.fileName}))),n.createElement("br",null),n.createElement(h.a,{onClick:this.create},"Create"),n.createElement(h.a,{intent:Ze.a.DANGER,onClick:this.close,style:{float:"right"}},"Close"))))}}]),t}(n.Component),it=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).removeFile=function(){var e=new k(N),t=Object(b.a)(Object(b.a)(a));e.request(v.POST,{id:t.nodeId},function(e){e.status===y.Success?t.parent.reloadData():e.content.then(function(e){t.parent.setState({msg:e})})},function(e){t.parent.setState({msg:"Server error"})})},a.isCreateProject=function(){return a.parent.isRootNode(a.nodeId)},a.createDocMenuItem=function(){if(!a.isCreateProject())return n.createElement(tt.a,{icon:"document",text:"Create Script",onClick:function(){a.parent.setState({openCreateScriptDialog:!0,nodeId:a.nodeId,isDir:!1})}.bind(Object(b.a)(Object(b.a)(a)))})},a.createFolderTitle=function(){return a.isCreateProject()?"Create Project":"Create Folder"},a.deleteMenu=function(){if(!a.isCreateProject())return n.createElement(tt.a,{icon:"remove",text:"Delete",onClick:function(){a.removeFile()}.bind(Object(b.a)(Object(b.a)(a)))})},a.parent=a.props.parent,a.nodeId=a.props.nodeId,a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return n.createElement("div",null,n.createElement(at.a,null,this.createDocMenuItem(),n.createElement(tt.a,{icon:"folder-new",text:this.createFolderTitle(),onClick:function(){e.parent.setState({openCreateScriptDialog:!0,nodeId:e.nodeId,isDir:!0})}.bind(this)}),this.deleteMenu()))}}]),t}(n.Component),st=(a(307),a(946)),ut=a(147),mt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).setRender=function(e,t){var r=t[0][e.key];if(a.state.config&&a.state.config.render){var l=a.state.config.render[e.key];l&&(e.render=l)}else{try{if(n.Component.isPrototypeOf(r.type))return void(e.render=function(e){return n.createElement("span",null,e)})}catch(o){}"object"!==typeof r?"array"!==typeof r?"boolean"!==typeof r||(e.render=function(e){return n.createElement("span",null,e.toString())}):e.render=function(e){return n.createElement("span",null,e.join(",").substring(0,300))}:e.render=function(e){return n.createElement("span",null,JSON.stringify(e).substring(0,300))}}},a.update=function(e,t){a.setState({config:t});var n=[],r={},l=[],o=Object(b.a)(Object(b.a)(a));e.forEach(function(t){for(var a in t)if(!r[a]){var l={title:a,dataIndex:a,key:a};o.setRender(l,e),n.push(l),r[a]=!0}}),e.forEach(function(e,t){var a={};n.forEach(function(t){a[t.key]=e[t.key]}),a.key=t,l.push(a)}),a.setState({columns:n,data:l})},a.rowDoubleClick=function(e,t,n){"codeExample"!==e.name&&"doc"!==e.name||a.setState({view:{enabled:!0,content:e.value}})},a.disablePreview=function(){a.setState({view:{enabled:!1}})},a.state={columns:[],rows:[],view:{enabled:!1}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return n.createElement("div",null,n.createElement(st.a,{onRow:function(t,a){return{onDoubleClick:function(n){e.rowDoubleClick(t,a,n)}}},columns:this.state.columns,dataSource:this.state.data}),n.createElement(ae.a,{title:"View",visible:this.state.view.enabled,onCancel:this.disablePreview,onOk:this.disablePreview,cancelText:"Cancel",OkText:"Ok"},n.createElement(ut,{source:this.state.view.content||""})))}}]),t}(n.Component),dt=a(196),pt=a(415),ht=a(414),ft=a(400),bt=a.n(ft),gt={width:200,height:200,borderWidth:2,borderColor:"#666",borderStyle:"dashed",borderRadius:5},Et={borderStyle:"solid",borderColor:"#6c6",backgroundColor:"#eee"},vt={borderStyle:"solid",borderColor:"#c66",backgroundColor:"#eee"},yt={display:"flex"},Ot=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).onDrop=function(t){e.setState({files:t});var a=bt.a.post(x);a.set("Access-Token",sessionStorage.getItem(O.name)||""),t.forEach(function(e){a.attach(e.path,e)}),a.end(function(a,n){e.setState({files:[]}),a?(console.log(a),e.setState({msg:a.toString()+"\n Sometimes this caused by your upload space is not enough."})):n.ok&&e.setState({msg:"total files:"+t.length+" are uploaded"})})},e.state={files:[]},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.files.map(function(e){return r.a.createElement("li",{key:e.name},e.path," - ",e.size," bytes")});return r.a.createElement("section",{style:yt},r.a.createElement("div",null,r.a.createElement(pt.a,{onDrop:this.onDrop,getDataTransferItems:function(e){return Object(ht.a)(e)}},function(e){var t=e.getRootProps,a=e.getInputProps,n=e.isDragActive,l=e.isDragAccept,o=e.isDragReject,c=(e.acceptedFiles,e.rejectedFiles,Object(dt.a)({},gt));return c=n?Object(dt.a)({},c,Et):c,c=o?Object(dt.a)({},c,vt):c,r.a.createElement("div",Object.assign({},t(),{style:c}),r.a.createElement("input",a()),r.a.createElement("div",null,l?"Drop":"Drag"," files here..."),o&&r.a.createElement("div",null,"Unsupported file type..."))})),r.a.createElement("aside",null,r.a.createElement("h4",null,0==e.length?"":"Files"),r.a.createElement("ul",null,e)),r.a.createElement("div",null,this.state.msg?this.state.msg:""))}}]),t}(r.a.Component),St=(a(743),a(256)),jt=a.n(St),Tt=a(139),kt=a(35),wt=a(379),Ct=function(){function e(){Object(c.a)(this,e)}return Object(i.a)(e,null,[{key:"render",value:function(e){var t=e[0].hasOwnProperty("z");e.hasOwnProperty("dataType")||e.forEach(function(e){e.dataType="default",t||(e.z=0)});var a=e.reduce(function(e,t){t.x,t.y,t.z;var a=t.dataType,n=e.get(a);return n?n.push(t):e.set(a,[t]),e},new Map),n=e[0]._dash_config||{},l=Object(Tt.a)(a.keys()).map(function(e){var t=Object.assign({fill:function(){var e=wt();return"#000000"===e&&(e="#8884d8"),e}(),shape:"triangle"},n[e]||{});return r.a.createElement(kt.g,Object.assign({key:e,name:e,data:a.get(e)},t))}),o=Object.assign({type:"number",dataKey:"x"},n.x||{}),c=Object.assign({type:"number",dataKey:"y"},n.y||{}),i=Object.assign({type:"number",dataKey:"z"},n.z||{});return r.a.createElement(kt.h,{width:400,height:400,margin:{top:20,right:20,bottom:20,left:20}},r.a.createElement(kt.c,null),r.a.createElement(kt.j,o),r.a.createElement(kt.k,c),t?r.a.createElement(kt.l,i):"",r.a.createElement(kt.i,{cursor:{strokeDasharray:"3 3"}}),r.a.createElement(kt.d,null),l)}}]),e}();Ct.basicCheck=function(e,t){if(e.length<1)return!1;try{return t(e[0])}catch(a){return!1}return!0},Ct.isShouldRender=function(e){return Ct.basicCheck(e,function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")&&(e.hasOwnProperty("_dash_config")||e.hasOwnProperty("dash"))&&("scatter"===e.dash||"scatter"===(e._dash_config||{}).dash)})};var Nt=a(379),Dt=function(){var e=Nt();return"#000000"===e&&(e="#8884d8"),e},Rt=function(){function e(){Object(c.a)(this,e)}return Object(i.a)(e,null,[{key:"render",value:function(e){var t=e[0],a=[],n=t._dash_config||{};return"line"===t.dash||"line"===n.dash?(Object.keys(t).forEach(function(e){if("number"===typeof t[e]){var l=Object.assign({stroke:Dt()},n[e]||{});a.push(r.a.createElement(kt.e,Object.assign({key:e,type:"monotone",dataKey:e},l)))}}),r.a.createElement(kt.f,{width:500,height:300,data:e,margin:{top:5,right:30,left:20,bottom:5}},r.a.createElement(kt.c,{strokeDasharray:"3 3"}),r.a.createElement(kt.j,{dataKey:"x"}),r.a.createElement(kt.k,null),r.a.createElement(kt.i,null),r.a.createElement(kt.d,null),a)):"bar"===t.dash||"bar"===n.dash?(Object.keys(t).forEach(function(e){if("number"===typeof t[e]){var l=Object.assign({fill:Dt()},n[e]||{});a.push(r.a.createElement(kt.a,Object.assign({key:e,dataKey:e},l)))}}),r.a.createElement(kt.b,{width:500,height:300,data:e,margin:{top:5,right:30,left:20,bottom:5}},r.a.createElement(kt.c,{strokeDasharray:"3 3"}),r.a.createElement(kt.j,{dataKey:"x"}),r.a.createElement(kt.k,null),r.a.createElement(kt.i,null),r.a.createElement(kt.d,null),a)):void 0}}]),e}();Rt.basicCheck=function(e,t){if(e.length<1)return!1;try{return t(e[0])}catch(a){return!1}return!0},Rt.isShouldRender=function(e){return Rt.basicCheck(e,function(e){return e.hasOwnProperty("x")&&(e.hasOwnProperty("dash")||e.hasOwnProperty("_dash_config"))})};var xt=a(82),Mt=a(260),It=a.n(Mt),_t=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).renderStream=function(){var e=a.state.data,t=[],n=[];e.forEach(function(e){var a=JSON.parse(e.value),r=It.a.utc(a.timestamp).toDate().getTime();t.push({x:r,y1:a.inputRowsPerSecond,y2:a.processedRowsPerSecond}),n.push({x:r,y1:a.numInputRows})}),a.setState({dataForRender:t,titleMap:{y1:"inputRowsPerSecond",y2:"processedRowsPerSecond"},dataForRender2:n,titleMap2:{y1:"numInputRows"}})},a.queryApp=e.parent.parent,a.state={data:e.data,dataForRender:[],titleMap:{}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.renderStream()}},{key:"render",value:function(){return 0===this.state.dataForRender.length?null:r.a.createElement("div",null,r.a.createElement(xt.TimelineChart,{height:200,data:this.state.dataForRender,titleMap:this.state.titleMap}),r.a.createElement(xt.TimelineChart,{height:200,data:this.state.dataForRender2,titleMap:this.state.titleMap2}))}}]),t}(n.Component);_t.isStream=function(e){if(e.length<1)return!1;try{if(!JSON.parse(e[0].value).runId)return!1}catch(t){return!1}return!0},_t.isShouldRender=function(e){return _t.isStream(e)},_t.renderRawData=function(e){if(!_t.isShouldRender(e))return"";var t=[];return e.forEach(function(e){var a=JSON.parse(e.value);t.push(JSON.stringify(a,null,2))}),t.join("\n")};var Pt=a(257),Lt=a.n(Pt),At=a(259),Bt=a.n(At),qt=a(70),Vt=a.n(qt),Ft=a(191),Ut=a.n(Ft),Gt=a(73),zt=a.n(Gt),Ht=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).resourceRender=function(){var e=a.state.data[0],t=[{x:"used",y:e.activeTasks},{x:"free",y:e.totalCores-e.activeTasks}],n=[{x:"taskTime",y:e.taskTime},{x:"gcTime",y:e.gcTime}],l=[{x:"used",y:e.activeExecutorNum},{x:"free",y:e.totalExecutorNum-e.activeExecutorNum}],o=-1===e.totalMemory?[]:[{x:"used",y:e.usedMemory/1048576},{x:"free",y:(e.totalMemory-e.usedMemory)/1048576}],c=function(t,a,n){return r.a.createElement(Lt.a,{title:t,action:r.a.createElement(Bt.a,{title:a},r.a.createElement(Vt.a,{type:"info-circle-o"})),total:function(){return r.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.shuffleData[n]/1048576}})}})},i=c("Disk Spilled","The size(M) spilled in disk","diskBytesSpilled"),s=c("Memory Spilled","The memory size(M) spilled in disk","memoryBytesSpilled"),u=c("InputRecords","Current active jobs have processed how many records","inputRecords");return r.a.createElement("div",null,r.a.createElement(Ut.a,null,r.a.createElement(zt.a,{span:6},r.a.createElement(xt.Pie,{hasLegend:!0,title:"CPU",subTitle:"CPU",total:function(){return r.a.createElement("span",{dangerouslySetInnerHTML:{__html:t.reduce(function(e,t){return t.y+e},0)}})},data:t,valueFormat:function(e){return r.a.createElement("span",{dangerouslySetInnerHTML:{__html:e}})},height:200})),r.a.createElement(zt.a,{span:6},r.a.createElement(xt.Pie,{hasLegend:!0,title:"Memory",subTitle:"Memory",total:function(){return r.a.createElement("span",{dangerouslySetInnerHTML:{__html:(o.reduce(function(e,t){return t.y+e},0)+"").split(".")[0]+"M"}})},data:o,valueFormat:function(e){return r.a.createElement("span",{dangerouslySetInnerHTML:{__html:(e+"").split(".")[0]+"M"}})},height:200})),r.a.createElement(zt.a,{span:6},r.a.createElement(xt.Pie,{hasLegend:!0,title:"Task/GC",subTitle:"Task/GC",total:function(){return r.a.createElement("span",{dangerouslySetInnerHTML:{__html:n.reduce(function(e,t){return t.y+e},0)}})},data:n,valueFormat:function(e){return r.a.createElement("span",{dangerouslySetInnerHTML:{__html:e}})},height:200})),r.a.createElement(zt.a,{span:6},r.a.createElement(xt.Pie,{hasLegend:!0,title:"Executors",subTitle:"Executors",total:function(){return r.a.createElement("span",{dangerouslySetInnerHTML:{__html:l.reduce(function(e,t){return t.y+e},0)}})},data:l,valueFormat:function(e){return r.a.createElement("span",{dangerouslySetInnerHTML:{__html:e}})},height:200}))),r.a.createElement(Ut.a,null,r.a.createElement(zt.a,{span:8},i),r.a.createElement(zt.a,{span:8},s),r.a.createElement(zt.a,{span:8},u)))},a.queryApp=e.parent.parent,a.state={data:e.data,dataForRender:[],titleMap:{}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.resourceRender()}}]),t}(n.Component);Ht.isResource=function(e){if(e.length<1)return!1;var t=e[0];try{return t.hasOwnProperty("activeTasks")&&t.hasOwnProperty("totalCores")&&t.hasOwnProperty("activeExecutorNum")}catch(a){return!1}},Ht.isShouldRender=function(e){return Ht.isResource(e)};var Qt=$.a.Panel,Jt=Y.a.TabPane;function Wt(e){}var Kt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).isNormalXY=function(e){return t.basicCheck(e,function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")&&"number"===typeof e.y})},a.xYRender=function(e){return r.a.createElement(jt.a,{height:200,title:"Bar",data:e})},a.renderDash=function(){var e=a.state.data;return Ht.isShouldRender(e)?r.a.createElement(Ht,{data:e,parent:Object(b.a)(Object(b.a)(a))}):_t.isShouldRender(e)?r.a.createElement(_t,{data:e,parent:Object(b.a)(Object(b.a)(a))}):Ct.isShouldRender(e)?Ct.render(e):a.isNormalXY(e)?a.xYRender(e):Rt.isShouldRender(e)?Rt.render(e):r.a.createElement("div",null)},a.queryApp=e.parent,a.state={data:[],dataForRender:[],titleMap:{}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"refresh",value:function(){try{var e=this.queryApp.queryResData||[];this.setState({data:e})}catch(t){}}},{key:"render",value:function(){return r.a.createElement($.a,{onChange:Wt},r.a.createElement(Qt,{header:"Tools/Dashboard",key:"1"},r.a.createElement(Y.a,{defaultActiveKey:"1",onChange:Wt},r.a.createElement(Jt,{tab:"Upload",key:"1"},r.a.createElement(Ot,null)),r.a.createElement(Jt,{tab:"Dashboard",key:"2"},this.renderDash()),r.a.createElement(Jt,{tab:"RawData",key:"3"},r.a.createElement("pre",null,_t.renderRawData(this.state.data))))))}}]),t}(n.PureComponent);Kt.basicCheck=function(e,t){if(e.length<1)return!1;try{return t(e[0])}catch(a){return!1}return!0};var $t=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).setData=function(e){a.queryResData=e,a.dash.current.refresh()},a.state={sqlContent:""},a.directoryTree=r.a.createRef(),a.editor=r.a.createRef(),a.messageBox=r.a.createRef(),a.display=r.a.createRef(),a.dash=r.a.createRef(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"mlsql-queryapp"},r.a.createElement("div",{className:"mlsql-directory-tree"},r.a.createElement(ot,{ref:this.directoryTree,parent:this})),r.a.createElement("div",{className:"mlsql-editor"},r.a.createElement(We,{ref:this.editor,parent:this}),r.a.createElement("div",{className:"mlsql-messagebox"},r.a.createElement(Q.a,{height:"100px",width:"100%",ref:this.messageBox,mode:"text",theme:"github",name:"message_box"})),r.a.createElement("div",null,r.a.createElement(Kt,{ref:this.dash,parent:this})),r.a.createElement("div",{className:"mlsql-query-display"},r.a.createElement(mt,{ref:this.display,parent:this}))))}}]),t}(n.Component),Yt="console",Xt="team",Zt="demo",ea="bigdl",ta="nlp",aa="stream",na="basic",ra="team_view_basic",la="cluster_view_basic",oa=a(953),ca=a(941),ia=a(951),sa=a(955),ua=a(944),ma=ia.a.Step,da=a(147),pa=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).setData=function(e){a.queryResData=e,a.dash.current.refresh()},a.getEditor=function(){return a.editor.current.aceEditorRef.current.editor},a.state={current:0},a.editor=n.createRef(),a.dash=n.createRef(),a.display=n.createRef(),a.messageBox=n.createRef(),a.techData=a.generateTechData(),a.commandData=a.generateCommandData(),a.steps=a.generateSteps(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"generateView",value:function(e){return n.createElement("div",{style:{marginTop:"30px"}},this.techData[e].length>0&&n.createElement(sa.a,{header:n.createElement("div",null,"How to do:"),footer:n.createElement("div",null,"Congratulations"),bordered:!0,dataSource:this.techData[e],renderItem:function(e){return n.createElement(sa.a.Item,null,e)}}),n.createElement("div",{className:"mlsql-queryapp"},n.createElement("div",{className:"mlsql-editor"},n.createElement(We,{ref:this.editor,parent:this}),n.createElement("div",{className:"mlsql-messagebox"},n.createElement(Q.a,{height:"100px",width:"100%",ref:this.messageBox,mode:"text",theme:"github",name:"message_box"})),n.createElement("div",null,n.createElement(Kt,{ref:this.dash,parent:this})),n.createElement("div",{className:"mlsql-query-display"},n.createElement(mt,{ref:this.display,parent:this})))))}},{key:"generateSteps",value:function(){return[{title:"Download Cifar10 Images",content:this.generateView(0)},{title:"Resize Images",content:this.generateView(1)},{title:"Extract Label",content:this.generateView(2)},{title:"Train",content:this.generateView(3)},{title:"Predict",content:this.generateView(4)}]}},{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){try{e.getEditor().setValue(e.commandData[0],-1)}catch(t){}},1e3)}},{key:"next",value:function(){var e=this,t=this.state.current+1;this.setState({current:t}),setTimeout(function(){try{e.getEditor().setValue(e.commandData[t],-1)}catch(a){}},1e3)}},{key:"prev",value:function(){var e=this,t=this.state.current-1;this.setState({current:t}),setTimeout(function(){try{e.getEditor().setValue(e.commandData[t],-1)}catch(a){}},1e3)}},{key:"render",value:function(){var e=this,t=this.state.current;return n.createElement("div",null,n.createElement("div",{className:"steps-action",style:{marginBottom:"30px"}},t<this.steps.length-1&&n.createElement(J.a,{type:"primary",onClick:function(){return e.next()}},"Next Step"),t===this.steps.length-1&&n.createElement(J.a,{type:"primary",onClick:function(){return ua.a.success("Processing complete!")}},"Done"),t>0&&n.createElement(J.a,{style:{marginLeft:8},onClick:function(){return e.prev()}},"Previous Step")),n.createElement(ia.a,{current:t},this.steps.map(function(e){return n.createElement(ma,{key:e.title,title:e.title})})),n.createElement("div",{className:"steps-content"},this.steps[t].content))}},{key:"generateTechData",value:function(){return[["Step 0: Clear the content in editor","Step 1: Click Quick Menu","Step 2: Drag Tools/Download uploaded file to Editor","Step 3: An dialog will be opened, fill field [from] with 'public/cifar.tar' and field [to] with '/tmp'","Step 4: Click Ok in dialog","Step 5: Click button Run(Since there are so many files, it will take a while.)"],["Step 0: Clear the content in editor","Step 1: Click Quick Menu","Step 2: Drag Tools/Load images",n.createElement(da,{source:"Step 3: An dialog will be opened\nfill field [Output table] with 'images'\nfield [imageDir]  with '/tmp/cifar'\nfield [code]  with \n\n```scala\ndef apply(params:Map[String,String]) = {\n         Resize(256, 256) -> CenterCrop(224, 224) ->\n          MatToTensor() -> ImageFrameToSample()\n       }\n```"}),"Step 4: Click Ok in dialog","Step 5: Click button Run"],["Step 0: Use set statement to set a variable named labelMappingPath.","Step 1: extract the class name from path","Step 2: map label string to number","Step 3: add 1 to label number since the bigdl requires that.","Step 4: finally, we get features and label","Step 5: Click button Run"],["Step 0: Clear the content in editor","Step 1: Click Quick Menu","Step 2: Drag Algorithms/Deep Learning",n.createElement(da,{source:"Step 3: An dialog will be opened  \nfill field [tableName] with 'trainData'  \nfield [Model save path]  with '/tmp/bigdl' \nfield [code]  with    \n```scala  \n def apply(params:Map[String,String])={\n                        val model = Sequential()\n                        model.add(Reshape(Array(3, 28, 28), inputShape = Shape(28, 28, 3)))\n"+'                        model.add(Convolution2D(6, 5, 5, activation = "tanh").setName("conv1_5x5"))\n                        model.add(MaxPooling2D())\n                        model.add(Convolution2D(12, 5, 5, activation = "tanh").setName("conv2_5x5"))\n                        model.add(MaxPooling2D())\n                        model.add(Flatten())\n                        model.add(Dense(100, activation = "tanh").setName("fc1"))\n                        model.add(Dense(params("classNum").toInt, activation = "softmax").setName("fc2"))\n                    }```  \n'}),"Step 4: Click Ok in dialog",n.createElement(da,{source:'Step 5: modify the where statement, add \n```\nfitParam.0.featureSize="[3,28,28]"\nand fitParam.0.classNum="10"\nand fitParam.0.maxEpoch="50"\n```'}),"Step 6: Click button Run"],[]]}},{key:"generateCommandData",value:function(){return['run command as DownloadExt.`` where \n            from="public/cifar.tar" \n            and to="/tmp";'.stripMargin(),"run command as ImageLoaderExt.`/tmp/cifar` \n            where code='''\n        def apply(params:Map[String,String]) = {\n         Resize(256, 256) -> CenterCrop(224, 224) ->\n          MatToTensor() -> ImageFrameToSample()\n       }''' as images;".stripMargin(),'-- convert image path to number label \n            set labelMappingPath = "/tmp/si"; \n            select split(split(imageName,"_")[1],"\\\\.")[0] as labelStr,features from images as tempData;\n            --convert the label string to number \n            train tempData as StringIndex.`${labelMappingPath}` where inputCol="labelStr" and outputCol="labelIndex";\n            predict tempData as StringIndex.`${labelMappingPath}` as tempData;\n            -- Since the bigdl need label number from 1, we should plus one\n            select (cast(labelIndex as float) + 1) as label,features from tempData as trainData;'.stripMargin(),'--train with LeNet5 model\n            set modelPath = "/tmp/bigdl";            \n            train trainData as BigDLClassifyExt.`${modelPath}` where\n            fitParam.0.featureSize="[3,28,28]"\n            and fitParam.0.classNum="10"\n            and fitParam.0.maxEpoch="50"\n            and fitParam.0.code=\'\'\'\n            |       def apply(params:Map[String,String])={\n            |            val model = Sequential()\n            |            model.add(Reshape(Array(3, 28, 28), inputShape = Shape(28, 28, 3)))\n            |            model.add(Convolution2D(6, 5, 5, activation = "tanh").setName("conv1_5x5"))\n            |            model.add(MaxPooling2D())\n            |            model.add(Convolution2D(12, 5, 5, activation = "tanh").setName("conv2_5x5"))\n            |            model.add(MaxPooling2D())\n            |            model.add(Flatten())\n            |            model.add(Dense(100, activation = "tanh").setName("fc1"))\n            |            model.add(Dense(params("classNum").toInt, activation = "softmax").setName("fc2"))\n            |        }\'\'\';\n            '.stripMargin(),'set modelPath = "/tmp/bigdl";\n            \n            -- batch predict            \n            predict trainData as BigDLClassifyExt.`${modelPath}` as predictdata;\n            \n            -- register BigDLClassifyExt.`/tmp/bigdl` as cifarPredict;\n            select vec_argmax(cifarPredict(vec_dense(features))) as predicted_label,\n            label from trainData\n            as output;'.stripMargin()]}}]),t}(n.Component),ha=a(147),fa=function(e){function t(e){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"generateSteps",value:function(){return[{title:"Download Dataset SogouCS.WWW08",content:this.generateView(0)},{title:"Parse the xml file",content:this.generateView(1)},{title:"Extract Label",content:this.generateView(2)},{title:"Run TFIDF",content:this.generateView(3)},{title:"Train/Register",content:this.generateView(4)},{title:"Predict",content:this.generateView(5)}]}},{key:"generateTechData",value:function(){return[["Step 0: Clear the content in editor","Step 1: Click Quick Menu","Step 2: Drag Tools/Download uploaded file to Editor","Step 3: An dialog will be opened, fill field [from] with 'public/SogouCS.reduced.tar' and field [to] with '/tmp/nlp/sogo'","Step 4: Click Ok in dialog","Step 5: Click button Run(it will take a while.)"],["Step 0: Clear the content in editor","Step 1: Click Quick Menu","Step 2: Drag Load/Save Data/Load data",n.createElement(ha,{source:"\n                |\n                |Step 3: An dialog will be opened,\n                |fill field [path] with '/tmp/nlp/sogo' and field [Output table] with 'xmlData',\n                |specify rowTag to doc and charset to GBK\n                |\"\n                |\n                ".stripMargin()}),"Step 4: Click Ok in dialog","Step 5: Use SQL to filter _corrupt_record","Step 6: Click button Run(it will take a while.)"],[n.createElement(ha,{source:'\n                | Step 0: We will treat url as label source, we use SQL to extract label from url:\n                |\n                |\n                |```\n                |-- http://sports.sohu.com/20070422/n249599819.shtml extract sports from url\n                |select temp.* from (select split(split(url,"/")[2],"\\\\.")[0] as labelStr,content from xmlData) as temp\n                |where temp.labelStr is not null\n                |as rawData;\n                |```\n                |\n                |For now , the label is string, we should convert them to number\n\n                '.stripMargin()}),n.createElement(ha,{source:"\n                |Step 1:  Drag Tools/Convert String to number, a dialog will open,\n                |\n                |```\n                |     1. set Input table as rawData,\n                |     2. Set save path as /tmp/nlp/label_mapping\n                |     3. Set inputCol as labelStr\n                |     4. Set outputCol as label\n                |     5. set Output table as rawDataWithLabel\n                |     6. set functionName table as rawDataWithLabel\n                |```\n                |We can use the functionName in SQL to convert String to number or number to String.\n                ".stripMargin()})],[n.createElement(ha,{source:"\n                |Step 0:  Drag Algorithms/TfIdf, a dialog will open,\n                |\n                |```\n                |         1. set Input table as rawDataWithLabel,\n                |         2. Set save path as /tmp/nlp/tfidf\n                |         3. Set inputCol as content\n                |         4. Set nGrams as 2\n                |         5. set Output table as trainData\n                |```\n                |Click Ok in dialog\n                ".stripMargin()}),n.createElement(ha,{source:"\n                |Step 1:  Drag [Register model as Function]/[Register Model As Function], a dialog will open,\n                |\n                |```\n                |         1. set Function name  as tfidf_predict,\n                |         2. Set Model saved path as /tmp/nlp/tfidf\n                |         3. Set et as TfIdfInPlace\n                |```\n                |Click Ok in dialog\n                ".stripMargin()}),"Step 2: Click button Run(it will take a while.)"],[n.createElement(ha,{source:"\n                |Step 0:  Drag Algorithms/RandomForest, a dialog will open,\n                |\n                |```\n                |         1. set tableName as trainData,\n                |         2. Set Model save path as /tmp/nlp/rf\n                |```\n                |Click Ok in dialog\n                ".stripMargin()}),n.createElement(ha,{source:"\n                |Step 1:  Drag [Register model as Function]/[Register Model As Function], a dialog will open,\n                |\n                |```\n                |         1. set Function name  as rf_predict,\n                |         2. Set Model saved path as /tmp/nlp/rf\n                |         3. Set et as RandomForest\n                |```\n                |Click Ok in dialog\n                ".stripMargin()}),"Step 2: Click button Run(it will take a while.)"],[n.createElement(ha,{source:'\n                |Paste:\n                |\n                |```sql\n                |select rf_predict(tfidf_predict("china is cool")) as predicted as output;\n                |```\n                '.stripMargin()}),"Step 2: Click button Run(it will take a while.)"]]}},{key:"generateCommandData",value:function(){return['run command as DownloadExt.`` where \n             |from="public/SogouCS.reduced.tar" and\n             |to="/tmp/nlp/sogo";'.stripMargin(),'load xml.`/tmp/nlp/sogo` where rowTag="doc" and charset="GBK" as xmlData;\n            |select * from xmlData where _corrupt_record is null as xmlData; \n            '.stripMargin(),'-- http://sports.sohu.com/20070422/n249599819.shtml extract sports from url\n            |select temp.* from (select split(split(url,"/")[2],"\\\\.")[0] as labelStr,content from xmlData) as temp \n            |where temp.labelStr is not null \n            |as rawData;\n            |-- select distinct(split(split(url,"/")[2],"\\\\.")[0]) as labelStr from rawData as output;\n            |-- select split(split(url,"/")[2],"\\\\.")[0] as labelStr,url from rawData as output;\n            |\n            |run rawData as StringIndex.`/tmp/nlp/label_mapping` where inputCol="labelStr"and\n            |outputCol="label" ;\n            |predict rawData as StringIndex.`/tmp/nlp/label_mapping` as rawDataWithLabel;\n            |register StringIndex.`/tmp/nlp/label_mapping` as convert_label; '.stripMargin(),'train rawDataWithLabel as TfIdfInPlace.`/tmp/nlp/tfidf` where inputCol="content"\n            |and nGrams="2" as trainData;\n            |\n            |register TfIdfInPlace.`/tmp/nlp/tfidf` as tfidf_predict;'.stripMargin(),'train trainData as RandomForest.`/tmp/nlp/rf` where \n            |keepVersion="true";\n            |\n            |register RandomForest.`/tmp/nlp/rf` as rf_predict;'.stripMargin(),'select rf_predict(tfidf_predict("china is cool")) as predicted as output;'.stripMargin()]}}]),t}(pa),ba=a(147),ga=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"generateSteps",value:function(){return[{title:"Variable in MLSQL",content:this.generateView(0)},{title:"Process excel",content:this.generateView(1)},{title:"Extract Label",content:this.generateView(2)},{title:"Run TFIDF",content:this.generateView(3)},{title:"Train/Register",content:this.generateView(4)},{title:"Predict",content:this.generateView(5)}]}},{key:"generateTechData",value:function(){return[[n.createElement(ba,{source:"\n                |\n                |\n                |\n                ".stripMargin()})],[],[],[],[],[]]}},{key:"generateCommandData",value:function(){return['|-- set string\n             |set email="allwefantasy@gmail.com";\n             |select "${email}" as email  as table1;\n             |             \n             |-- nested variable reference\n             |set email="allwefantasy@gmail.com";\n             |set hello="hello ${email}";\n             |\n             |-- build-in variable: HOME OWNER date\n             |set day_id =\'\'\'${date.toString("yyyy-MM-dd")}\'\'\';\n             |select "${day_id}" as a as test111;\n             |\n             |-- conf/spark.sql("set spark.sql.shuffle.partitions=200")\n             |set spark.sql.shuffle.partitions="200" where type="conf";\n             |\n             |-- shell\n             |set date=`date` where type="shell";\n             |select "${date}" as dt as output;\n             |                \n             '.stripMargin(),'load xml.`/tmp/nlp/sogo` where rowTag="doc" and charset="GBK" as xmlData;\n            |select * from xmlData where _corrupt_record is null as xmlData; \n            '.stripMargin(),'-- http://sports.sohu.com/20070422/n249599819.shtml extract sports from url\n            |select temp.* from (select split(split(url,"/")[2],"\\\\.")[0] as labelStr,content from xmlData) as temp \n            |where temp.labelStr is not null \n            |as rawData;\n            |-- select distinct(split(split(url,"/")[2],"\\\\.")[0]) as labelStr from rawData as output;\n            |-- select split(split(url,"/")[2],"\\\\.")[0] as labelStr,url from rawData as output;\n            |\n            |run rawData as StringIndex.`/tmp/nlp/label_mapping` where inputCol="labelStr"and\n            |outputCol="label" ;\n            |predict rawData as StringIndex.`/tmp/nlp/label_mapping` as rawDataWithLabel;\n            |register StringIndex.`/tmp/nlp/label_mapping` as convert_label; '.stripMargin(),'train rawDataWithLabel as TfIdfInPlace.`/tmp/nlp/tfidf` where inputCol="content"\n            |and nGrams="2" as trainData;\n            |\n            |register TfIdfInPlace.`/tmp/nlp/tfidf` as tfidf_predict;'.stripMargin(),'train trainData as RandomForest.`/tmp/nlp/rf` where \n            |keepVersion="true";\n            |\n            |register RandomForest.`/tmp/nlp/rf` as rf_predict;'.stripMargin(),'select rf_predict(tfidf_predict("china is cool")) as predicted as output;'.stripMargin()]}}]),t}(pa),Ea=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).renderView=function(){return a.state.currentView===ea?n.createElement(pa,null):a.state.currentView===ta?n.createElement(fa,null):a.state.currentView===na?n.createElement(ga,null):null},a.state={currentView:na},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.renderView()}}]),t}(n.Component),va=oa.a.Header,ya=oa.a.Content,Oa=oa.a.Footer,Sa=oa.a.Sider,ja=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).switchToBigDL=function(e){a.demosRef.current.setState({currentView:ea})},a.switchToNLP=function(e){a.demosRef.current.setState({currentView:ta})},a.switchToStream=function(e){a.demosRef.current.setState({currentView:aa})},a.switchToBasic=function(){a.demosRef.current.setState({currentView:na})},a.demosRef=n.createRef(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.createElement(oa.a,{style:{minHeight:"100vh"}},n.createElement(Sa,null,n.createElement("div",{className:"logo"}),n.createElement(ca.a,{theme:"dark",defaultSelectedKeys:["0"],mode:"inline"},n.createElement(ca.a.Item,{key:"0"},n.createElement(J.a,{block:!0,onClick:this.switchToBasic},"Basic Tutorial")),n.createElement(ca.a.Item,{key:"1"},n.createElement(J.a,{block:!0,onClick:this.switchToBigDL},"Cifar10")),n.createElement(ca.a.Item,{key:"2"},n.createElement(J.a,{block:!0,onClick:this.switchToNLP},"NLP")),n.createElement(ca.a.Item,{key:"3"},n.createElement(J.a,{block:!0},"Stream")),n.createElement(ca.a.Item,{key:"4"},n.createElement(J.a,{block:!0},"Excel")))),n.createElement(oa.a,null,n.createElement(va,{style:{background:"#fff",padding:0}}),n.createElement(ya,{style:{margin:"0 16px"}},n.createElement("div",{style:{padding:24,background:"#fff",minHeight:360}},n.createElement(Ea,{ref:this.demosRef}))),n.createElement(Oa,{style:{textAlign:"center"}})))}}]),t}(n.Component),Ta=function(e){function t(e){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.createElement("div",null,n.createElement(ja,null))}}]),t}(n.Component),ka=(a(113),a(947)),wa=a(20),Ca=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=Object(b.a)(Object(b.a)(a));a.props.form.validateFields(function(e,a){e||new k(M).request2(a,function(e){"success"===e.msg?(ua.a.success("Create team success",3),t.teamCards.teamsRef.current.refresh()):ua.a.warning("Create team fail"+e.msg,10)},function(e){ua.a.error("Create team fail:"+e,10)})})},a.teamNameCheck=function(e,t,a){t?new k(I).request2({name:t},function(e){e.msg?a():a("".concat(t," have been taken. Try another"))},function(e){a("server error:"+e)}):a()},console.log(e),a.teamCards=e.parent,a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return n.createElement(ka.a,{onSubmit:this.handleSubmit,className:"login-form"},n.createElement(ka.a.Item,null,e("name",{rules:[{required:!0,message:"Please input the team name!"},{validator:this.teamNameCheck}]})(n.createElement(ne.a,{prefix:n.createElement(wa.a,{type:"team",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Team name"}))),n.createElement(ka.a.Item,null,n.createElement(J.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Create")))}}]),t}(n.Component),Na=ka.a.create({name:"create_team"})(Ca),Da=(a(114),a(34)),Ra=function(){function e(){Object(c.a)(this,e)}return Object(i.a)(e,null,[{key:"fetchTeams",value:function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data";new k(t).request2({},function(e){a.setState(Object(Da.a)({},n,e))},function(t){ua.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"fetchMembersByTeam",value:function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data";new k("/api_v1/team/members").request2({teamName:a},function(e){t.setState(Object(Da.a)({},n,e))},function(t){ua.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"fetchRoles",value:function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data";new k("/api_v1/team/roles").request2({teamName:a},function(e){t.setState(Object(Da.a)({},n,e))},function(t){ua.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"fetchTablesByRole",value:function(t,a,n,r){new k("/api_v1/role/tables").request2({teamName:a,roleName:n},function(e){r&&t.setState(Object(Da.a)({},r,e))},function(t){ua.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"removeRoleMember",value:function(t,a,n,r,l,o){new k("/api_v1/role/member/remove").request2({teamName:a,roleName:n,userName:r},function(e){l&&t.setState(Object(Da.a)({},l,e)),o&&o()},function(t){ua.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"fetchMembersByRole",value:function(t,a,n,r,l){new k("/api_v1/role/members").request2({teamName:a,roleName:n},function(e){r&&t.setState(Object(Da.a)({},r,e)),l&&l()},function(t){ua.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"removeRole",value:function(t,a,n){new k("/api_v1/team/role/remove").request2({teamName:a,roleName:n},function(e){},function(t){ua.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"removeTeamMember",value:function(t,a,n,r){new k("/api_v1/team/member/remove").request2({teamName:a,userName:n},function(e){r()},function(t){ua.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"teamInvite",value:function(t,a,n,r,l){new k(a).request2({teamName:n},function(e){r&&t.setState(Object(Da.a)({},r,e)),l&&l()},function(t){ua.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"fetchTables",value:function(t,a,n,r){new k("/api_v1/team/tables").request2({teamName:a},function(e){n&&t.setState(Object(Da.a)({},n,e)),r&&r()},function(t){ua.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"removeTable",value:function(t,a,n,r,l){new k("/api_v1/team/table/remove").request2({teamName:a,tableId:n},function(e){r&&t.setState(Object(Da.a)({},r,e)),l&&l()},function(t){ua.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"fetchTableTypes",value:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data";new k(R).runScript({},"load _mlsql_.`tables/tableTypes` as output;",function(e){t.setState(Object(Da.a)({},a,e))},function(t){ua.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"fetchSourceTypes",value:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data";new k(R).runScript({},"load _mlsql_.`tables/sourceTypes` as output;",function(e){t.setState(Object(Da.a)({},a,e))},function(t){ua.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"fetchOperateTypes",value:function(t,a){new k(R).runScript({},"load _mlsql_.`tables/operateTypes` as output;",function(e){a&&t.setState(Object(Da.a)({},a,e))},function(t){ua.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"removeRoleTable",value:function(t,a,n,r,l,o){new k("/api_v1/role/table/remove").request2({teamName:a,roleName:n,tableId:r},function(e){l&&t.setState(Object(Da.a)({},l,e)),o&&o()},function(t){ua.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}}]),e}();Ra.MESSAGE_TIMEOUT=10;var xa=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).accept=function(e){e.preventDefault(),Ra.teamInvite(Object(b.a)(Object(b.a)(a)),A,a.teamName,null,function(){Ra.fetchTeams(a.apiUrl,Object(b.a)(Object(b.a)(a)),"data"),a.teamCards.teamYourJoinRef.current.refresh()})},a.refuse=function(e){e.preventDefault(),Ra.teamInvite(Object(b.a)(Object(b.a)(a)),B,a.teamName,null,function(){Ra.fetchTeams(a.apiUrl,Object(b.a)(Object(b.a)(a)),"data")})},a.refresh=function(){Ra.fetchTeams(a.apiUrl,Object(b.a)(Object(b.a)(a)),"data")},a.renderCommand=function(e){return a.teamName=e,a.apiUrl===P?[n.createElement("a",{onClick:a.accept},"accept"),n.createElement("a",{onClick:a.refuse},"refuse")]:[]},a.teamCards=e.parent,a.apiUrl=e.apiUrl,a.state={data:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){Ra.fetchTeams(this.apiUrl,this,"data")}},{key:"render",value:function(){var e=this;return n.createElement("div",null,n.createElement(sa.a,{dataSource:this.state.data,renderItem:function(t){return n.createElement(sa.a.Item,{key:t.name,actions:e.renderCommand(t.name)},n.createElement(sa.a.Item.Meta,{title:n.createElement("a",{href:"#"},t.name)}))}}))}}]),t}(n.Component),Ma=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=Object(b.a)(Object(b.a)(a));a.props.form.validateFields(function(e,a){e||new k(L).request2(a,function(e){"success"===e.msg?(t.teamCards.setState({refresh:!0}),ua.a.success("Invite success",3)):ua.a.warning("Invite fail:"+e.msg,10)},function(e){t.teamCards.setState({refresh:!0}),ua.a.error("Invite fail:"+e,10)})})},a.renderTeams=function(){return a.state.teams.map(function(e){return n.createElement(re.a.Option,{key:e.name,name:e.name},e.name)})},a.teamCards=e.parent,a.state={teams:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=new k(_),t=this;e.request2({},function(e){t.setState({teams:e})},function(e){ua.a.warning("load data fail:"+e,15)})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return n.createElement(ka.a,{onSubmit:this.handleSubmit,className:"login-form"},n.createElement(ka.a.Item,null,e("teamName",{rules:[{required:!0,message:"Please choose the team name"}]})(n.createElement(re.a,{placeholder:"Team name",size:"large",style:{width:200}},this.renderTeams()))),n.createElement(ka.a.Item,null,e("userNames",{rules:[{required:!0,message:"Please input the user name you want invite"}]})(n.createElement(ne.a,{prefix:n.createElement(wa.a,{type:"team",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"User name, split with ','"}))),n.createElement(ka.a.Item,null,n.createElement(J.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Create")))}}]),t}(n.Component),Ia=ka.a.create({name:"create_team"})(Ma),_a=function e(){Object(c.a)(this,e)};_a.renderTeamsForSelect=function(e){return e.state.teams.map(function(e){return n.createElement(re.a.Option,{key:e.name,name:e.name},e.name)})},_a.onTeamSelect=function(e,t){e.currentTeamName=t,Ra.fetchRoles(e,t,"roles")},_a.renderTeams=function(e){return e.state.teams.map(function(e){return n.createElement(re.a.Option,{key:e.name,name:e.name},e.name)})},_a.renderRoles=function(e){return e.state.roles.map(function(e){return n.createElement(re.a.Option,{key:e.name,name:e.name},e.name)})},_a.renderMembers=function(e){return e.state.members.map(function(e){return n.createElement(re.a.Option,{key:e.name,name:e.name},e.name)})},_a.renderBackends=function(e){return e.state.backends.map(function(e){return n.createElement(re.a.Option,{key:e.name,name:e.name},e.name)})},_a.teamSelect=function(e,t){return n.createElement(re.a,{placeholder:"Team name",size:"large",style:{width:200},onChange:t},_a.renderTeams(e))},_a.roleSelect=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";return n.createElement(re.a,{placeholder:"role name",mode:a,size:"large",style:{width:200},onChange:t},_a.renderRoles(e))},_a.backendSelect=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";return n.createElement(re.a,{placeholder:"backend name",mode:a,size:"large",style:{width:200},onChange:t},_a.renderBackends(e))},_a.memberSelect=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";return n.createElement(re.a,{placeholder:"member name",mode:a,size:"large",style:{width:200},onChange:t},_a.renderMembers(e))};var Pa=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).selectTeam=function(e){a.currentTeam=e,Ra.fetchMembersByTeam(Object(b.a)(Object(b.a)(a)),e,"members")},a.renderCommand=function(e){var t=Object(b.a)(Object(b.a)(a));return[n.createElement("a",{onClick:function(){Ra.removeTeamMember(t,t.currentTeam,e,function(){Ra.fetchMembersByTeam(t,t.currentTeam,"members")})}},"remove")]},a.renderMembers=function(){return n.createElement(sa.a,{dataSource:a.state.members,renderItem:function(e){return n.createElement(sa.a.Item,{key:e.name,actions:a.renderCommand(e.name)},n.createElement(sa.a.Item.Meta,{title:n.createElement("a",{href:"#"},e.name)}))}})},a.teamCards=e.parent,a.apiUrl=e.apiUrl,a.state={teams:[],members:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){Ra.fetchTeams(this.apiUrl,this,"teams")}},{key:"render",value:function(){return n.createElement("div",null,n.createElement(re.a,{placeholder:"Team name",size:"large",style:{width:200},onChange:this.selectTeam},_a.renderTeamsForSelect(this)),this.renderMembers())}}]),t}(n.Component),La=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=Object(b.a)(Object(b.a)(a));a.props.form.validateFields(function(e,a){e||new k(q).request2(a,function(e){"success"===e.msg?(ua.a.success("Create roles success",3),t.teamCards.teamsRef.current.refresh()):ua.a.warning("Create roles fail:"+e.msg,10)},function(e){ua.a.error("Create roles fail:"+e,10)})})},a.renderTeams=function(){return a.state.teams.map(function(e){return n.createElement(re.a.Option,{key:e.name,name:e.name},e.name)})},a.teamCards=e.parent,a.state={teams:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=new k(_),t=this;e.request2({},function(e){t.setState({teams:e})},function(e){ua.a.warning("load data fail:"+e,15)})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return n.createElement(ka.a,{onSubmit:this.handleSubmit,className:"login-form"},n.createElement(ka.a.Item,null,e("teamName",{rules:[{required:!0,message:"Please choose the team name"}]})(n.createElement(re.a,{placeholder:"Team name",size:"large",style:{width:200}},this.renderTeams()))),n.createElement(ka.a.Item,null,e("roleNames",{rules:[{required:!0,message:"Please input the role name you want to create"}]})(n.createElement(ne.a,{prefix:n.createElement(wa.a,{type:"role",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"User name, split with ','"}))),n.createElement(ka.a.Item,null,n.createElement(J.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Create")))}}]),t}(n.Component),Aa=ka.a.create({name:"add_role_for_team"})(La),Ba=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).selectTeam=function(e){a.currentTeam=e,Ra.fetchRoles(Object(b.a)(Object(b.a)(a)),e,"roles")},a.refresh=function(){a.currentTeam&&Ra.fetchRoles(Object(b.a)(Object(b.a)(a)),a.currentTeam,"roles")},a.renderCommand=function(e){return[n.createElement("a",{onClick:function(){Ra.removeRole(Object(b.a)(Object(b.a)(a)),a.currentTeam,e),Ra.fetchRoles(Object(b.a)(Object(b.a)(a)),a.currentTeam,"roles")}},"remove")]},a.renderRoles=function(){return n.createElement(sa.a,{dataSource:a.state.roles,renderItem:function(e){return n.createElement(sa.a.Item,{key:e.name,actions:a.renderCommand(e.name)},n.createElement(sa.a.Item.Meta,{title:n.createElement("a",{href:"#"},e.name)}))}})},a.teamCards=e.parent,a.apiUrl=e.apiUrl,a.state={teams:[],members:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){Ra.fetchTeams(_,this,"teams")}},{key:"render",value:function(){return n.createElement("div",null,n.createElement(re.a,{placeholder:"Team name",size:"large",style:{width:200},onChange:this.selectTeam},_a.renderTeamsForSelect(this)),this.renderRoles())}}]),t}(n.Component),qa=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();Object(b.a)(Object(b.a)(a));a.props.form.validateFields(function(e,t){e||new k(V).request2(t,function(e){"success"===e.msg?ua.a.success("Create  success",3):ua.a.warning("Create  fail:"+e.msg,10)},function(e){ua.a.error("Create  fail:"+e,10)})})},a.renderTeams=function(){return a.state.teams.map(function(e){return n.createElement(re.a.Option,{key:e.name,name:e.name},e.name)})},a.renderTableTypes=function(){return a.state.tableTypes.map(function(e){return n.createElement(re.a.Option,{key:e.value,name:e.value},e.value)})},a.renderSourceTypes=function(){return a.state.sourceTypes.map(function(e){return n.createElement(re.a.Option,{key:e.value,name:e.value},e.value)})},a.teamCards=e.parent,a.state={teams:[],tableTypes:[],sourceTypes:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){Ra.fetchTeams(_,this,"teams"),Ra.fetchTableTypes(this,"tableTypes"),Ra.fetchSourceTypes(this,"sourceTypes")}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return n.createElement(ka.a,{onSubmit:this.handleSubmit,className:"login-form"},n.createElement(ka.a.Item,null,e("teamName",{rules:[{required:!0,message:"Please choose the team name"}]})(n.createElement(re.a,{placeholder:"Team name",size:"large",style:{width:200}},this.renderTeams()))),n.createElement(ka.a.Item,null,e("name",{rules:[{required:!0,message:"Please input the table name"}]})(n.createElement(ne.a,{prefix:n.createElement(wa.a,{type:"table",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"table name"}))),n.createElement(ka.a.Item,null,e("db",{rules:[]})(n.createElement(ne.a,{prefix:n.createElement(wa.a,{type:"table",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"db name"}))),n.createElement(ka.a.Item,null,e("tableType",{rules:[{required:!0,message:"Please input the table type you want to create"}]})(n.createElement(re.a,{placeholder:"table Type",size:"large",style:{width:200}},this.renderTableTypes()))),n.createElement(ka.a.Item,null,e("sourceType",{rules:[]})(n.createElement(re.a,{placeholder:"source Type",size:"large",style:{width:200}},this.renderSourceTypes()))),n.createElement(ka.a.Item,null,n.createElement(J.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Create")))}}]),t}(n.Component),Va=ka.a.create({name:"add_table_for_team"})(qa),Fa=(n.Component,function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=Object(b.a)(Object(b.a)(a));a.props.form.validateFields(function(e,a){e||new k(F).request2(a,function(e){"success"===e.msg?(t.teamCards.roleTablesRef.current.refresh(),ua.a.success("Create  success",3)):ua.a.warning("Create  fail:"+e.msg,10)},function(e){ua.a.error("Create  fail:"+e,10)})})},a.onTeamSelect=function(e){Ra.fetchRoles(Object(b.a)(Object(b.a)(a)),e,"roles"),Ra.fetchTables(Object(b.a)(Object(b.a)(a)),e,"tables"),Ra.fetchOperateTypes(Object(b.a)(Object(b.a)(a)),"operateTypes")},a.renderTeams=function(){return a.state.teams.map(function(e){return n.createElement(re.a.Option,{key:e.name,name:e.name},e.name)})},a.renderRoles=function(){return a.state.roles.map(function(e){return n.createElement(re.a.Option,{key:e.name,name:e.name},e.name)})},a.renderTables=function(){return a.state.tables.map(function(e){return n.createElement(re.a.Option,{key:e.name,value:e.id},e.name)})},a.renderOperateTypes=function(){return a.state.operateTypes.map(function(e){return n.createElement(re.a.Option,{key:e.value,name:e.value},e.value)})},a.teamCards=e.parent,a.state={teams:[],roles:[],tables:[],operateTypes:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){Ra.fetchTeams(_,this,"teams")}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return n.createElement(ka.a,{onSubmit:this.handleSubmit,className:"login-form"},n.createElement(ka.a.Item,null,e("teamName",{rules:[{required:!0,message:"Please choose the team name"}]})(n.createElement(re.a,{placeholder:"Team name",size:"large",style:{width:200},onChange:this.onTeamSelect},this.renderTeams()))),n.createElement(ka.a.Item,null,e("roleName",{rules:[{required:!0,message:"Please input the role name "}]})(n.createElement(re.a,{placeholder:"role name",size:"large",style:{width:200}},this.renderRoles()))),n.createElement(ka.a.Item,null,e("tableName",{rules:[{required:!0,message:"Please input the tableName name "}]})(n.createElement(re.a,{mode:"multiple",placeholder:"table name",size:"large",style:{width:200}},this.renderTables()))),n.createElement(ka.a.Item,null,e("operateType",{rules:[{required:!0,message:"Please input the operateType to Role "}]})(n.createElement(re.a,{mode:"multiple",placeholder:"Operate type",size:"large",style:{width:200}},this.renderOperateTypes()))),n.createElement(ka.a.Item,null,n.createElement(J.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Create")))}}]),t}(n.Component)),Ua=ka.a.create({name:"add_table_for_role"})(Fa),Ga=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).selectTeam=function(e){a.currentTeam=e,Ra.fetchRoles(Object(b.a)(Object(b.a)(a)),e,"roles")},a.onRoleSelect=function(e){a.currentRole=e,Ra.fetchTablesByRole(Object(b.a)(Object(b.a)(a)),a.currentTeam,e,"tables")},a.refresh=function(){a.currentTeam&&a.currentRole&&Ra.fetchTablesByRole(Object(b.a)(Object(b.a)(a)),a.currentTeam,a.currentRole,"tables")},a.renderCommand=function(e){var t=Object(b.a)(Object(b.a)(a));return[n.createElement("a",{onClick:function(){a.currentTeam&&a.currentRole&&Ra.removeRoleTable(Object(b.a)(Object(b.a)(a)),a.currentTeam,a.currentRole,e,null,function(){t.refresh()})}},"remove")]},a.renderRoles=function(){return a.state.roles.map(function(e){return n.createElement(re.a.Option,{key:e.name,name:e.name},e.name)})},a.renderTables=function(){return n.createElement(sa.a,{dataSource:a.state.tables,renderItem:function(e){return n.createElement(sa.a.Item,{key:e.name,actions:a.renderCommand(e.id)},n.createElement(sa.a.Item.Meta,{title:e.name+":"+e.operateType}))}})},a.teamCards=e.parent,a.apiUrl=e.apiUrl,a.state={teams:[],roles:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){Ra.fetchTeams(_,this,"teams")}},{key:"render",value:function(){return n.createElement("div",null,n.createElement(X.a,{gutter:16},n.createElement(Z.a,null,n.createElement(re.a,{placeholder:"Team name",size:"large",style:{width:200},onChange:this.selectTeam},_a.renderTeamsForSelect(this)))),n.createElement("br",null),n.createElement(X.a,{gutter:16},n.createElement(Z.a,null,n.createElement(re.a,{placeholder:"role name",size:"large",style:{width:200},onChange:this.onRoleSelect},this.renderRoles()))),n.createElement("br",null),n.createElement(X.a,{gutter:16},n.createElement(Z.a,null,this.renderTables())))}}]),t}(n.Component),za=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=Object(b.a)(Object(b.a)(a));a.props.form.validateFields(function(e,a){e||new k(U).request2(a,function(e){console.log(e),console.log("----"),"success"===e.msg?(t.teamCards.roleMembersRef.current.refresh(),ua.a.success("Create  success",3)):ua.a.warning("Create  fail:"+e.msg,10)},function(e){ua.a.error("Create  fail:"+e,10)})})},a.onTeamSelect=function(e){_a.onTeamSelect(Object(b.a)(Object(b.a)(a)),e),Ra.fetchMembersByTeam(Object(b.a)(Object(b.a)(a)),e,"members")},a.teamCards=e.parent,a.state={teams:[],roles:[],members:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){Ra.fetchTeams(_,this,"teams")}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this;return n.createElement(ka.a,{onSubmit:this.handleSubmit,className:"login-form"},n.createElement(ka.a.Item,null,e("teamName",{rules:[{required:!0,message:"Please choose the team name"}]})(_a.teamSelect(t,function(e){t.onTeamSelect(e)}))),n.createElement(ka.a.Item,null,e("roleName",{rules:[{required:!0,message:"Please input the role name"}]})(_a.roleSelect(t,function(){},"multiple"))),n.createElement(ka.a.Item,null,e("userName",{rules:[{required:!0,message:"Please input the member name"}]})(_a.memberSelect(t,function(){},"multiple"))),n.createElement(ka.a.Item,null,n.createElement(J.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Create")))}}]),t}(n.Component),Ha=ka.a.create({name:"add_member_for_role"})(za),Qa=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).onRoleSelect=function(e){a.currentRoleName=e,Ra.fetchMembersByRole(Object(b.a)(Object(b.a)(a)),a.currentTeamName,a.currentRoleName,"members")},a.refresh=function(){a.currentTeamName&&a.currentRoleName&&Ra.fetchMembersByRole(Object(b.a)(Object(b.a)(a)),a.currentTeamName,a.currentRoleName,"members")},a.renderCommand=function(e){var t=Object(b.a)(Object(b.a)(a));return[n.createElement("a",{onClick:function(){a.currentTeamName&&a.currentRoleName&&Ra.removeRoleMember(Object(b.a)(Object(b.a)(a)),a.currentTeamName,a.currentRoleName,e,null,function(){t.refresh()})}},"remove")]},a.renderMembers=function(){return n.createElement(sa.a,{dataSource:a.state.members,renderItem:function(e){return n.createElement(sa.a.Item,{key:e.name,actions:a.renderCommand(e.name)},n.createElement(sa.a.Item.Meta,{title:e.name}))}})},a.teamCards=e.parent,a.apiUrl=e.apiUrl,a.state={teams:[],roles:[],members:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){Ra.fetchTeams(_,this,"teams")}},{key:"render",value:function(){var e=this;return n.createElement("div",null,n.createElement(X.a,{gutter:16},n.createElement(Z.a,null,_a.teamSelect(e,function(t){_a.onTeamSelect(e,t)}))),n.createElement("br",null),n.createElement(X.a,{gutter:16},n.createElement(Z.a,null,_a.roleSelect(e,e.onRoleSelect,"default"))),n.createElement("br",null),n.createElement(X.a,{gutter:16},n.createElement(Z.a,null,this.renderMembers())))}}]),t}(n.Component),Ja=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).openNotificationWithIcon=function(e,t,a){f.a[e]({message:t,description:a})},a.parent=e.parent,a.state={},a.teamRolesRef=n.createRef(),a.teamMembersRef=n.createRef(),a.teamsRef=n.createRef(),a.roleTablesRef=n.createRef(),a.roleMembersRef=n.createRef(),a.teamYourJoinRef=n.createRef(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.createElement("div",{style:{background:"#ECECEC",padding:"30px"}},n.createElement(X.a,{gutter:24},n.createElement(Z.a,{span:16},n.createElement(ee.a,{title:"Team belongs to you",bordered:!1},n.createElement(xa,{parent:this,ref:this.teamsRef,apiUrl:_}))),n.createElement(Z.a,{span:8},n.createElement(ee.a,{title:"Create new team",bordered:!1},n.createElement(Na,{parent:this})))),n.createElement("br",null),n.createElement(X.a,{gutter:24},n.createElement(Z.a,{span:16},n.createElement(ee.a,{title:"View members By Team",bordered:!1},n.createElement(Pa,{ref:this.teamMembersRef,parent:this,apiUrl:_}))),n.createElement(Z.a,{span:8},n.createElement(ee.a,{title:"Invite members",bordered:!1},n.createElement(Ia,{parent:this})))),n.createElement("br",null),n.createElement(X.a,{gutter:24},n.createElement(Z.a,{span:8},n.createElement(ee.a,{title:"Team you join",bordered:!1},n.createElement(xa,{parent:this,ref:this.teamYourJoinRef,apiUrl:"/api_v1/team/joined"}))),n.createElement(Z.a,{span:8},n.createElement(ee.a,{title:"Team inviting you",bordered:!1},n.createElement(xa,{parent:this,apiUrl:P}))),n.createElement(Z.a,{span:8},n.createElement(ee.a,{title:"Add Table to Team",bordered:!1},n.createElement(Va,{parent:this})))),n.createElement("br",null),n.createElement(X.a,{gutter:24},n.createElement(Z.a,{span:16},n.createElement(ee.a,{title:"View Roles By Team",bordered:!1},n.createElement(Ba,{ref:this.teamRolesRef,parent:this,apiUrl:q}))),n.createElement(Z.a,{span:8},n.createElement(ee.a,{title:"Add role to Team",bordered:!1},n.createElement(Aa,{parent:this})))),n.createElement("br",null),n.createElement(X.a,{gutter:24},n.createElement(Z.a,{span:16},n.createElement(ee.a,{title:"View tables By Role",bordered:!1},n.createElement(Ga,{parent:this,ref:this.roleTablesRef}))),n.createElement(Z.a,{span:8},n.createElement(ee.a,{title:"Add table to role",bordered:!1},n.createElement(Ua,{parent:this})))),n.createElement("br",null),n.createElement(X.a,{gutter:24},n.createElement(Z.a,{span:16},n.createElement(ee.a,{title:"View members By Role",bordered:!1},n.createElement(Qa,{parent:this,ref:this.roleMembersRef}))),n.createElement(Z.a,{span:8},n.createElement(ee.a,{title:"Add Member to Role",bordered:!1},n.createElement(Ha,{parent:this})))))}}]),t}(n.Component),Wa=a(416),Ka=function(){function e(){Object(c.a)(this,e)}return Object(i.a)(e,null,[{key:"fetchBackends",value:function(t,a,n,r){var l=new k("/api_v1/cluster"),o=Object.assign(a,{action:"/backend/list"});l.request2(o,function(e){n&&t.setState(Object(Da.a)({},n,e)),r&&r()},function(t){ua.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"checkBackendName",value:function(t,a,n,r){var l=new k("/api_v1/cluster"),o=Object.assign({name:a},{action:"/backend/name/check"});l.request2(o,function(e){n&&t.setState(Object(Da.a)({},n,e)),r&&r(e)},function(t){ua.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"fetchBackendsByNames",value:function(t,a,n,r){var l=new k("/api_v1/cluster"),o=Object.assign({names:a},{action:"/backend/list/names"});l.request2(o,function(e){n&&t.setState(Object(Da.a)({},n,e)),r&&r(e)},function(t){ua.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"fetchBackendNamesByTeam",value:function(t,a,n,r){new k("/api_v1/backends").request2({teamName:a},function(e){n&&t.setState(Object(Da.a)({},n,e)),r&&r(e)},function(t){ua.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"addBackend",value:function(t,a,n,r){var l=new k("/api_v1/cluster"),o=Object.assign(a,{action:"/backend/add"});l.request2(o,function(e){n&&t.setState(Object(Da.a)({},n,e)),r&&r()},function(t){ua.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"removeBackend",value:function(t,a,n,r){var l=new k("/api_v1/cluster"),o=Object.assign({name:a},{action:"/backend/remove"});l.request2(o,function(e){n&&t.setState(Object(Da.a)({},n,e)),r&&r()},function(t){ua.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}},{key:"updateBackendTags",value:function(t,a,n,r,l){var o=new k("/api_v1/cluster"),c=Object.assign({tags:n,name:a},{action:"/backend/tags/update",merge:"append"});o.request2(c,function(e){r&&t.setState(Object(Da.a)({},r,e)),l&&l()},function(t){ua.a.warning("load data fail:"+t,e.MESSAGE_TIMEOUT)})}}]),e}();Ka.MESSAGE_TIMEOUT=10;var $a=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).renderBackends=function(){return n.createElement(mt,{ref:a.dataViewer,parent:Object(b.a)(Object(b.a)(a))})},a.onRoleSelect=function(e){var t=Object(b.a)(Object(b.a)(a)),r=t.currentTeamName+"_"+e;Ka.fetchBackends(Object(b.a)(Object(b.a)(a)),{tag:r},"backends",function(){t.dataViewer.current.update(t.state.backends.map(function(a){a.ecsResourcePoolId,a.id,a.tags;var r=Object(Wa.a)(a,["ecsResourcePoolId","id","tags"]);return r.command=n.createElement(J.a,{onClick:function(a){Ka.removeBackend(t,r.name,null,function(){t.onRoleSelect(e)})}},"remove"),r}),{})})},a.parent=e.parent,a.dataViewer=n.createRef(),a.state={teams:[],roles:[],backends:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){Ra.fetchTeams(_,this,"teams")}},{key:"render",value:function(){var e=this;return n.createElement("div",null,n.createElement(X.a,null,n.createElement(Z.a,null,_a.teamSelect(e,function(t){_a.onTeamSelect(e,t)}))),n.createElement("br",null),n.createElement(X.a,null,n.createElement(Z.a,null,_a.roleSelect(e,e.onRoleSelect))),n.createElement("br",null),n.createElement(X.a,null,n.createElement(Z.a,null,this.renderBackends())))}}]),t}(n.Component),Ya=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=Object(b.a)(Object(b.a)(a));a.props.form.validateFields(function(e,a){if(!e){var n=a.teamName,r=a.roleName,l=a.name,o=a.url,c=r.map(function(e){return n+"_"+e}).reduce(function(e,t){return e.push(t),e},[]).join(",");Ka.addBackend(t,{name:l,url:o,tag:c,teamName:n},null,function(){ua.a.success("Add backend success")})}})},a.onTeamSelect=function(e){Ra.fetchRoles(Object(b.a)(Object(b.a)(a)),e,"roles")},a.renderTeams=function(){return a.state.teams.map(function(e){return n.createElement(re.a.Option,{key:e.name,name:e.name},e.name)})},a.renderRoles=function(){return a.state.roles.map(function(e){return n.createElement(re.a.Option,{key:e.name,name:e.name},e.name)})},a.checkBackendName=function(e,t,n){Ka.checkBackendName(Object(b.a)(Object(b.a)(a)),t,null,function(e){e.msg?n("Name have been taken. Try another."):n()})},a.teamCards=e.parent,a.state={teams:[],roles:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){Ra.fetchTeams(_,this,"teams")}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return n.createElement(ka.a,{onSubmit:this.handleSubmit,className:"login-form"},n.createElement(ka.a.Item,null,e("name",{rules:[{required:!0,message:"Please input the backend name"},{validator:this.checkBackendName}]})(n.createElement(ne.a,{prefix:n.createElement(wa.a,{type:"table",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"backend name"}))),n.createElement(ka.a.Item,null,e("url",{rules:[{required:!0,message:"Please input the url name"}]})(n.createElement(ne.a,{prefix:n.createElement(wa.a,{type:"table",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"url e.g. 127.0.0.1:9003"}))),n.createElement(ka.a.Item,null,e("teamName",{rules:[{required:!0,message:"Please input the team name"}]})(n.createElement(re.a,{placeholder:"Team name",size:"large",style:{width:200},onChange:this.onTeamSelect},this.renderTeams()))),n.createElement(ka.a.Item,null,e("roleName",{rules:[{required:!0,message:"Please input the role name"}]})(n.createElement(re.a,{mode:"multiple",placeholder:"role name",size:"large",style:{width:200}},this.renderRoles()))),n.createElement(ka.a.Item,null,n.createElement(J.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Create")))}}]),t}(n.Component),Xa=ka.a.create({name:"add_backend_for_cluster"})(Ya),Za=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=Object(b.a)(Object(b.a)(a));a.props.form.validateFields(function(e,a){e||new k(q).request2(a,function(e){"success"===e.msg?(ua.a.success("Create roles success",3),t.teamCards.teamsRef.current.refresh()):ua.a.warning("Create roles fail:"+e.msg,10)},function(e){ua.a.error("Create roles fail:"+e,10)})})},a.onTeamSelect=function(e){Ra.fetchRoles(Object(b.a)(Object(b.a)(a)),e,"roles")},a.renderTeams=function(){return a.state.teams.map(function(e){return n.createElement(re.a.Option,{key:e.name,name:e.name},e.name)})},a.renderRoles=function(){return a.state.roles.map(function(e){return n.createElement(re.a.Option,{key:e.name,name:e.name},e.name)})},a.renderTags=function(){return a.state.tags.map(function(e){return n.createElement(re.a.Option,{key:e,name:e},e)})},a.teamCards=e.parent,a.state={teams:[],roles:[],tags:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;Ra.fetchTeams(_,this,"teams"),Ka.fetchBackends(this,"backends",function(){var t=e.state.backends.map(function(e){return e.tags}).reduce(function(e,t){return e.push.apply(e,Object(Tt.a)(t)),e},[]),a=new Set(t);e.setState({tags:Object(Tt.a)(a)})})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return n.createElement(ka.a,{onSubmit:this.handleSubmit,className:"login-form"},n.createElement(ka.a.Item,null,e("teamName",{rules:[{required:!0,message:"Please input the team name"}]})(n.createElement(re.a,{placeholder:"Team name",size:"large",style:{width:200},onChange:this.onTeamSelect},this.renderTeams()))),n.createElement(ka.a.Item,null,e("roleName",{rules:[{required:!0,message:"Please input the role name"}]})(n.createElement(re.a,{mode:"multiple",placeholder:"role name",size:"large",style:{width:200}},this.renderRoles()))),n.createElement(ka.a.Item,null,e("tag",{rules:[{required:!0,message:"Please input the tag name"}]})(n.createElement(re.a,{mode:"multiple",placeholder:"tag name",size:"large",style:{width:200}},this.renderTags()))),n.createElement(ka.a.Item,null,n.createElement(J.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Create")))}}]),t}(n.Component),en=(ka.a.create({name:"add_tag_to_role"})(Za),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();Object(b.a)(Object(b.a)(a));a.props.form.validateFields(function(e,t){e||new k(w).request2({backendTags:t.tag},function(e){console.log(e),console.log(t.tag),e.backendTags===t.tag?ua.a.success("Set Default backend success",3):ua.a.warning("Set Default backend fail:"+e.backendTags,10)},function(e){ua.a.error("Set Default backend fail:"+e,10)})})},a.renderTags=function(){return a.state.tags.map(function(e){return n.createElement(re.a.Option,{key:e,name:e},e)})},a.onRoleSelect=function(e){var t=Object(b.a)(Object(b.a)(a));a.currentRoleName=e;var n=a.currentTeamName;Ka.fetchBackends(Object(b.a)(Object(b.a)(a)),{tag:n+"_"+e},"backends",function(){t.state.backends.length>0&&t.setState({tags:[n+"_"+e]})})},a.teamCards=e.parent,a.state={teams:[],roles:[],tags:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){Ra.fetchTeams("/api_v1/team/in",this,"teams")}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this;return n.createElement(ka.a,{onSubmit:this.handleSubmit,className:"login-form"},n.createElement(ka.a.Item,null,e("teamName",{rules:[{required:!0,message:"Please input the team name"}]})(_a.teamSelect(t,function(e){_a.onTeamSelect(t,e)}))),n.createElement(ka.a.Item,null,e("roleName",{rules:[{required:!0,message:"Please input the role name"}]})(_a.roleSelect(t,function(e){t.onRoleSelect(e)},"default"))),n.createElement(ka.a.Item,null,e("tag",{rules:[{required:!0,message:"Please input the tag name"}]})(n.createElement(re.a,{mode:"default",placeholder:"tag name",size:"large",style:{width:200}},this.renderTags()))),n.createElement(ka.a.Item,null,n.createElement(J.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Set Default")))}}]),t}(n.Component)),tn=ka.a.create({name:"configure_default_backend"})(en),an=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=Object(b.a)(Object(b.a)(a));a.props.form.validateFields(function(e,a){if(!e){var n=a.teamName,r=a.roleName,l=a.backendName,o=r.map(function(e){return n+"_"+e}).reduce(function(e,t){return e.push(t),e},[]).join(",");Ka.updateBackendTags(t,l,o,null,function(){ua.a.success("Update backend tags success")})}})},a.teamCards=e.parent,a.state={teams:[],roles:[],backends:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){Ra.fetchTeams(_,this,"teams")}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return n.createElement(ka.a,{onSubmit:this.handleSubmit,className:"login-form"},n.createElement(ka.a.Item,null,t("teamName",{rules:[{required:!0,message:"Please input the team name"}]})(_a.teamSelect(this,function(t){Ka.fetchBackendNamesByTeam(e,t,null,function(t){Ka.fetchBackendsByNames(e,t.map(function(e){return e.name}).join(","),"backends",function(){console.log(e.state.backends)})}),_a.onTeamSelect(e,t)}))),n.createElement(ka.a.Item,null,t("roleName",{rules:[{required:!0,message:"Please input the role name"}]})(_a.roleSelect(this,function(e){},"multiple"))),n.createElement(ka.a.Item,null,t("backendName",{rules:[{required:!0,message:"Please input the backend name"}]})(_a.backendSelect(this,function(e){},"multiple"))),n.createElement(ka.a.Item,null,n.createElement(J.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Confirm")))}}]),t}(n.Component),nn=ka.a.create({name:"AddExistClusterBackendToRole"})(an),rn=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).openNotificationWithIcon=function(e,t,a){f.a[e]({message:t,description:a})},a.parent=e.parent,a.backendsRef=n.createRef(),a.state={},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.createElement("div",{style:{background:"#ECECEC",padding:"30px"}},n.createElement(X.a,{gutter:24},n.createElement(Z.a,{span:12},n.createElement(ee.a,{title:"Set your default backend tag",bordered:!1},n.createElement(tn,{parent:this}))),n.createElement(Z.a,{span:12},n.createElement(ee.a,{title:"Add Backend",bordered:!1},n.createElement(Xa,{parent:this})))),n.createElement("br",null),n.createElement(X.a,{gutter:24},n.createElement(Z.a,{span:24},n.createElement(ee.a,{title:"Your Backends",bordered:!1},n.createElement($a,{parent:this,ref:this.backendsRef})))),n.createElement("br",null),n.createElement(X.a,{gutter:24},n.createElement(Z.a,{span:24},n.createElement(ee.a,{title:"Add role to backend",bordered:!1},n.createElement(nn,{parent:this})))))}}]),t}(n.Component),ln=oa.a.Header,on=oa.a.Content,cn=oa.a.Footer,sn=oa.a.Sider,un=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).switchToBasic=function(){a.setState({currentView:ra})},a.switchToCluster=function(){a.setState({currentView:la})},a.renderView=function(){return a.state.currentView===ra?n.createElement(Ja,null):a.state.currentView===la?n.createElement(rn,null):void 0},a.app=e.parent,a.state={currentView:ra},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.createElement(oa.a,{style:{minHeight:"100vh"}},n.createElement(sn,null,n.createElement("div",{className:"logo"}),n.createElement(ca.a,{theme:"dark",defaultSelectedKeys:["0"],mode:"inline"},n.createElement(ca.a.Item,{key:"0"},n.createElement(J.a,{block:!0,onClick:this.switchToBasic},"Team")),n.createElement(ca.a.Item,{key:"1"},n.createElement(J.a,{block:!0,onClick:this.switchToCluster},"Cluster")))),n.createElement(oa.a,null,n.createElement(ln,{style:{background:"#fff",padding:0}}),n.createElement(on,{style:{margin:"0 16px"}},n.createElement("div",{style:{padding:24,background:"#fff",minHeight:360}},this.renderView())),n.createElement(cn,{style:{textAlign:"center"}})))}}]),t}(n.Component),mn=function(e){function t(e){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.createElement("div",null,n.createElement(un,{parent:this}))}}]),t}(n.Component),dn="login",pn="register",hn=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).getLoginOrRegisterManager=function(){return a.app.registerOrLoginRef.current},a.logout=function(){a.auth.logout(),a.app.updateLoginoutStatus()},a.login=function(){a.logout(),a.getLoginOrRegisterManager().setState({loginType:dn})},a.register=function(){a.logout(),a.getLoginOrRegisterManager().setState({loginType:pn})},a.updateLoginoutStatus=function(){a.setState({isLogin:a.auth.isLogin()})},a.auth=new z,a.state={isLogin:a.auth.isLogin()},a.app=a.props.parent,a.auth.userName(function(e){a.setState({userName:e})}),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=n.createElement(h.a,{className:"bp3-minimal",icon:"log-in",text:"Login",onClick:this.login}),t=n.createElement(h.a,{className:"bp3-minimal",icon:"log-out",text:"Logout",onClick:this.logout}),a=n.createElement(h.a,{className:"bp3-minimal",icon:"intersection",text:"Register",onClick:this.register});return n.createElement("div",null,this.state.isLogin?"welcome  "+this.state.userName:"",this.state.isLogin?t:e,a)}}]),t}(n.Component),fn=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).currentView=function(){return a.app.state.currentView},a.userName=function(e){a.setState({userName:e.target.value})},a.password=function(e){a.setState({password:e.target.value})},a.updateLoginoutStatus=function(){a.setState({isLogin:a.auth.isLogin()})},a.registerSuccess=function(e){if(e.status===y.Success)a.setState({registerOrLoginSuccess:!0}),a.app.updateLoginoutStatus();else{var t=Object(b.a)(Object(b.a)(a)),n=function(e){var a=e;try{a=JSON.parse(e).msg}catch(n){}t.setState({msg:a})};e.content.then(n).catch(n)}},a.registerFail=function(e){a.setState({msg:e.value.message})},a.login=function(){new bn(Object(b.a)(Object(b.a)(a))).validate()&&a.auth.login(a.state.userName,a.state.password,a.registerSuccess,a.registerFail)},a.register=function(){new bn(Object(b.a)(Object(b.a)(a))).validate()&&a.auth.register(a.state.userName,a.state.password,a.registerSuccess,a.registerFail)},a.auth=new z,a.app=a.props.parent,a.state={registerOrLoginSuccess:!1,msg:"",isLogin:a.auth.isLogin(),loginType:a.props.loginType||dn},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.auth.isLogin()&&this.currentView()===Yt?n.createElement($t,null):this.auth.isLogin()&&this.currentView()===Zt?n.createElement(Ta,null):this.auth.isLogin()&&this.currentView()===Xt?n.createElement(mn,null):n.createElement("div",{className:"mlsql-register"},n.createElement("div",{className:"mlsql-register-form"},n.createElement(g.a,{helperText:"email",label:"userName",labelFor:"userName",labelInfo:"(required)"},n.createElement(E.a,{id:"userName",placeholder:"email",onChange:this.userName})),n.createElement(g.a,{helperText:"password",label:"password",labelFor:"password",labelInfo:"(required)"},n.createElement(E.a,{id:"password",type:"password",placeholder:"password",onChange:this.password})),n.createElement(h.a,{type:"submit",text:this.state.loginType===dn?"Login":"Register",onClick:this.state.loginType===dn?this.login:this.register}),""!==this.state.msg&&n.createElement("div",{className:"mlsql-register-messagebox"},this.state.msg)))}}]),t}(n.Component),bn=function(){function e(t){Object(c.a)(this,e),this.parent=t}return Object(i.a)(e,[{key:"validate",value:function(){return this.validateUserName()&&this.validatePassword()}},{key:"validateUserName",value:function(){var e=/[a-zA-Z0-9]+[\.]?([a-zA-Z0-9]+)?[\@][a-z]{3,9}[\.][a-z]{2,5}/g.test(this.parent.state.userName);return e||this.parent.setState({msg:"userName should be email"}),e}},{key:"validatePassword",value:function(){var e=this.parent.state.password.length>=4;return e||this.parent.setState({msg:"the length of password should > 4"}),e}}]),e}();a(935).inject();var gn=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).updateLoginoutStatus=function(){a.menuRef.current.updateLoginoutStatus(),a.registerOrLoginRef.current.updateLoginoutStatus()},a.switchToTeam=function(){a.setState({currentView:Xt})},a.switchToConsole=function(){a.setState({currentView:Yt})},a.switchToDemo=function(){a.setState({currentView:Zt})},a.switchToCnDoc=function(){window.open("http://docs.mlsql.tech/zh/","_blank")},a.menuRef=r.a.createRef(),a.registerOrLoginRef=r.a.createRef(),a.state={currentView:Yt},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(d.a,null,r.a.createElement(d.a.Group,{align:p.a.LEFT},r.a.createElement(d.a.Heading,null,"MLSQL Web Console"),r.a.createElement(d.a.Divider,null),r.a.createElement(h.a,{className:"bp3-minimal",icon:"home",text:"Console",onClick:this.switchToConsole}),r.a.createElement(h.a,{className:"bp3-minimal",icon:"document",text:"Demo Center",onClick:this.switchToDemo}),r.a.createElement(h.a,{className:"bp3-minimal",icon:"document",text:"Team",onClick:this.switchToTeam}),r.a.createElement(h.a,{className:"bp3-minimal",icon:"document",text:"\u4e2d\u6587\u6587\u6863",onClick:this.switchToCnDoc})),r.a.createElement(d.a.Group,{align:p.a.RIGHT},r.a.createElement(hn,{ref:this.menuRef,parent:this}))),r.a.createElement(fn,{ref:this.registerOrLoginRef,parent:this,loginType:dn}),r.a.createElement("div",{style:{bottom:"100px",textAlign:"center",width:"100%"}},"MLSQL Licensed under the Apache License, Version 2.0. @",r.a.createElement("a",{className:"copyright",href:"http://www.miitbeian.gov.cn/"},"\u6d59ICP\u590718052520\u53f7"),r.a.createElement("div",null,"@",r.a.createElement("a",{target:"_blank",href:"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010802009683"},r.a.createElement("img",{src:""}),"\u6d59\u516c\u7f51\u5b89\u5907 33010802009683\u53f7"))))}}]),t}(n.Component);o.a.render(r.a.createElement(gn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[473,2,1]]]);
//# sourceMappingURL=main.05b38d25.chunk.js.map